{# 
  Generated by JinjaGenerator for template 'modules/individu'
    at 2025-10-26T15:16:12.494254

  Used macros:
  - cousin(l1, l2, dd, cc)
  - rela()
  - link(xxx, zzz)
  - detailed_names()
  - nthgen(xxx)
  - sosa(ccc)
  - ancestor(aaa, bbb, sss, ttt)
  - all_link()
  - from_sosa(ccc)
  - remainder(xxx)
  - nb_days(xx)
  - compute_age1(z1, z2, z3)
  - compute_age(z1, z2)
  - curr_age()
  - etat_civil()
  - portrait()
  - border()

  Used includes:
  None

  Used variables:
  - op_m (x10)
  - cc (x2)
  - count2 (x4)
  - sp (x3)
  - cancel_links (x12)
  - first_name (x6)
  - first_name_key (x2)
  - surname (x6)
  - surname_key (x2)
  - has_qualifiers (x4)
  - has_aliases (x2)
  - has_nobility_titles (x2)
  - has_public_name (x3)
  - has_surnames_aliases (x2)
  - has_first_names_aliases (x2)
  - has_linked_page.HEAD (x2)
  - has_linked_page.DEATH (x1)
  - has_linked_page.OCCU (x1)
  - computable_death_age (x5)
  - computable_age (x6)
  - linked_page.HEAD (x2)
  - linked_page.DEATH (x2)
  - linked_page.OCCU (x2)
  - xxx (x3)
  - reset_count (x2)
  - sosa (x2)
  - sosa.lvl (x4)
  - sosa_link (x1)
  - ccc (x3)
  - sosa_ref.is_restricted (x1)
  - sosa_ref (x6)
  - sosa_ref.access (x2)
  - sosa_ref.index (x2)
  - self (x2)
  - index (x4)
  - l1 (x11)
  - browsing_with_sosa_ref (x2)
  - has_parents (x1)
  - reset_count1 (x1)
  - l2 (x5)
  - count (x3)
  - ancestor1_index (x1)
  - ancestor1 (x1)
  - ancestor1_access (x1)
  - ancestor1_anc_sosa (x1)
  - ancestor1_sosa_cujus (x1)
  - ancestor2 (x1)
  - ancestor2_access (x1)
  - ancestor2_anc_sosa (x1)
  - ancestor2_sosa_cujus (x1)
  - tmp (x5)
  - is_dead (x6)
  - birth_date.day (x4)
  - birth_date.prec (x2)
  - birth_date.julian_day (x4)
  - birth_date.year (x2)
  - birth_date.month (x2)
  - death_date.day (x2)
  - death_date.prec (x1)
  - death_date.julian_day (x2)
  - death_date.month (x1)
  - has_birth_date (x3)
  - today.julian_day (x2)
  - today.year (x1)
  - z1 (x3)
  - z1.month (x10)
  - z1.day (x12)
  - z1.year (x8)
  - z2 (x4)
  - z2.month (x11)
  - z2.day (x12)
  - z2.year (x8)
  - z3 (x7)
  - lang (x2)
  - l_nbd (x6)
  - age (x2)
  - has_image (x3)
  - b.default_image (x3)
  - b.show_consang (x1)
  - has_birth_place (x3)
  - on_birth_date (x1)
  - in_place (x7)
  - birth_place (x2)
  - birthday (x1)
  - has_baptism_date (x2)
  - has_baptism_place (x3)
  - on_baptism_date (x1)
  - baptism_place (x2)
  - nl (x6)
  - died (x1)
  - has_death_date (x1)
  - on_death_date (x1)
  - has_death_place (x1)
  - death_place (x1)
  - is_buried (x3)
  - is_cremated (x3)
  - has_burial_date (x1)
  - on_burial_date (x1)
  - has_burial_place (x1)
  - burial_place (x1)
  - has_cremation_date (x1)
  - on_cremation_date (x1)
  - has_cremation_place (x1)
  - cremation_place (x1)
  - death_age (x1)
  - has_occupation (x1)
  - occupation (x1)
  - has_consanguinity (x1)
  - consanguinity (x2)
  - mother.index (x1)
  - father.index (x1)
  - e.image (x2)
  - e.m (x4)
  - reset_count2 (x1)
  - has_sosa (x1)
  - has_blason (x3)
  - image_url (x2)
  - image_size (x2)
  - blason_url (x4)
  - blason_size (x1)
  - images_prefix (x1)
  - is_female (x1)
  - is_male (x1)
  - prefix_set.pmod (x1)
  - has_portrait (x1)
  - blason_small_size (x1)
  - public_name (x2)
  - qualifier (x2)
  - dates (x1)
  - p_mod (x2)
#}
<!-- $Id: modules/individu.txt v7.1 19/06/2024 06:41:02 $ -->
{% with %}
    {% set op_m = (op_m) if (( op_m != "" )) else ("1") %}
    {% macro cousin(l1, l2, dd, cc) %}
        {% if ( _(cousin.l1.l2) != "[cousin.l1.l2]" ) %}
            {% if ( cc > 0 ) %}
                {{ _(cousin.l1.l2:::dd, variant='s') }}
            {% else %}
                {{ _(cousin.l1.l2:::dd, variant='s') |capitalize }}
            {% endif %}
        {% else %}
            {% if ( cc > 0 ) %}
                {{ _(close family, variant='0') }}
            {% else %}
                {{ _(close family, variant='0') |capitalize }}
            {% endif %}
            (<small class="text-muted">l1/l2</small>)
        {% endif %}
    {% endmacro %}
    {% macro rela() %}
        {% if ( count2 == 1 ) %}
            {{ _(godson/goddaughter/godchild, variant='s') |capitalize }}
        {% else %}
            {% if ( count2 == 2 ) %}{{ _(godfather/godmother/godparents, variant='s') |capitalize }}{% endif %}
        {% endif %}
        {{ _(and) }}{{ sp }}
    {% endmacro %}
    {% macro link(xxx, zzz) %}
        {% if ( not cancel_links ) %}
            <a href="/m=zzz&v={% if ( "xxx" == first_name ) %}{{ first_name_key }}{% else %}{% if ( "xxx" == surname ) %}{{ surname_key }}{% else %}xxx{% endif %}{% endif %}">
            {% endif %}
            xxx
            {% if ( not cancel_links ) %}</a>{% endif %}
    {% endmacro %}
    {% macro detailed_names() %}
        {% if ( has_qualifiers or ( has_aliases or ( has_nobility_titles or ( has_public_name or ( has_surnames_aliases or ( has_first_names_aliases or ( has_linked_page.HEAD or ( computable_death_age or computable_age ) ) ) ) ) ) ) ) %}
            {# foreach not implemented yet #}
            {% if ( has_public_name or has_qualifiers ) %}
                <span class="font-weight-bold">{{ link(first_name, "P") }} {{ link(surname, "N") }}</span>
                <br>
            {% endif %}
            {% if has_aliases %}
                Alias{{ sp }}{{ lazy_print("") }}{# foreach not implemented yet #}
                <br>
            {% endif %}
            {% if has_nobility_titles %}
                {# foreach not implemented yet #}
                <br>
            {% endif %}
        </br>
        {% if ( has_linked_page.HEAD and ( linked_page.HEAD != "" ) ) %}
            {{ linked_page.HEAD }}
            <br>
        {% endif %}
        {% if has_first_names_aliases %}
            {{ lazy_print("") }}{{ link(first_name, "P") }}/{# foreach not implemented yet #}
            <br>
        {% endif %}
        {% if has_surnames_aliases %}
            {{ lazy_print("") }}{{ link(surname, "N") }}/{# foreach not implemented yet #}
            <br>
        {% endif %}
    {% endif %}
{% endmacro %}
{% macro nthgen(xxx) %}
    {{ nth(_(nth (generation) ), xxx) }} {{ _(generation/generations, variant='0') }}
{% endmacro %}
{% macro sosa(ccc) %}
    {{ reset_count }}
    <li class="mt-1">
        <span class="fa-li"><i class="far fa-circle-dot text-success"></i></span>
        {% if ( sosa == 1 ) %}
            {{ _(Sosa 1) |capitalize }}
        {% else %}
            {{ a_of_b("<a href="""/"sosa_link"">"_(Sosa) " "sosa"</a> – "(rela()) if (( ccc > 0 ))(cousin(( sosa.lvl - 1 ), "0", , "ccc")) if (( sosa.lvl < 10 )) else ((_(an ancestor, variant='s')) if (( ccc > 0 )) else (_(an ancestor, variant='s')|capitalize)), (sosa_ref) if (sosa_ref.is_restricted) else ("<a href="""/"sosa_ref.access"" title=""_(Sosa 1)"">"sosa_ref"</a>")(" ("nthgen(sosa.lvl)")") if (( sosa.lvl > 9 ))) }}
        {% endif %}
    </li>
{% endmacro %}
{% macro ancestor(aaa, bbb, sss, ttt) %}
    {% if cancel_links %}
        aaa
    {% else %}
        <a href="/bbb"
           title="{{ a_of_b("Sosa sss", self) }}&#10; {{ a_of_b("Sosa ttt", sosa_ref) }}">aaa</a>
    {% endif %}
{% endmacro %}
{% macro all_link() %}
    <a href="/em=R&et=S&ei={{ index }}&i={{ sosa_ref.index }}&dag=on"
       title="{{ _(link between) |capitalize }} {{ self }} {{ _(and) }} {{ sosa_ref }}">
        <i class="fas fa-{% if ( l1 == 0 ) %}child{% else %}user-group{% endif %}"></i></a>
{% endmacro %}
{% macro from_sosa(ccc) %}
    {% if ( browsing_with_sosa_ref and has_parents ) %}
        {{ reset_count }}{{ reset_count1 }}{# foreach not implemented yet #}
        {% with %}
            {% set l1 = getvar(l1) %}
            {% with %}
                {% set l2 = getvar(l2) %}
                {% if ( count > 0 ) %}
                    <li class="mt-2">
                        <span class="fa-li">{{ all_link() }}</span>
                        {{ a_of_b((rela() ) if (( ccc > 0 ))"<a href=""
   "
   /
   "
   "
   m="RL"
   i="getvar(ancestor1_index)"
   i1="sosa_ref.index"
   l1="l1"
   i2="index"
   l2="l2"
   spouse="on"
   dag="on"
   "
   title=""
   _
   to
   see
   the
   first
   relationship
   link
   capitalize
   "
   "
   _
   with
   "
   "
   sosa_ref
   "
   "
   l1
   l2
   "
   "
   _
   degree
   of
   kinship
   variant='1'
   "
   "
   l1
   "
   "
   l2
   "
   ">"cousin(l1, l2, (_(half-relationship, variant='s')) if (( ( count == 3 ) and ( l1 != 0 ) )) else (_(half-relationship, variant='3')), "ccc")"</a>
                        ", "<a href="""/"sosa_ref.access"" title=""_(Sosa 1)"">"sosa_ref"</a>") }}
                        {% if ( l1 != 0 ) %}
                            {{ sp }}{{ _(passing by) }}
                            {{ ancestor(getvar(ancestor1) , getvar(ancestor1_access), getvar(ancestor1_anc_sosa), getvar(ancestor1_sosa_cujus)) }}
                        {% endif %}
                        {% if ( count == 2 ) %}
                            {{ _(and) }}
                            {{ ancestor(getvar(ancestor2) , getvar(ancestor2_access), getvar(ancestor2_anc_sosa), getvar(ancestor2_sosa_cujus)) }}
                        {% endif %}
                        .
                    </li>
                {% endif %}
            {% endwith %}
        {% endwith %}
    {% endif %}
{% endmacro %}
{% macro remainder(xxx) %}
    {% with %}
        {% set tmp = ( xxx - ( ( ( ( xxx / 10 ) / 10 ) / 10 ) * 1000 ) ) %}
        {% if ( tmp < 10 ) %}
            00{{ tmp }}
        {% else %}
            {% if ( tmp < 100 ) %}
                0{{ tmp }}
            {% else %}
                {{ tmp }}
            {% endif %}
        {% endif %}
    {% endwith %}
{% endmacro %}
{% with %}
    {% set l_nbd = ((( death_date.julian_day - birth_date.julian_day )) if (( death_date.julian_day > birth_date.julian_day )) else ("0")) if (( is_dead and ( computable_death_age and ( ( birth_date.day != "" ) and ( ( birth_date.prec == "" ) and ( ( death_date.day != "" ) and ( death_date.prec == "" ) ) ) ) ) )) else (((( today.julian_day - birth_date.julian_day )) if (( today.julian_day > birth_date.julian_day )) else ("0")) if (( computable_age and ( has_birth_date and ( ( birth_date.day != "" ) and ( birth_date.prec == "" ) ) ) )) else ("0")) %}
    {% macro nb_days(xx) %}
        {{ nth('/31/28/31/30/31/30/31/31/30/31/30/31', 'xx') }}
    {% endmacro %}
    {% macro compute_age1(z1, z2, z3) %}
        {% if ( z1 > 0 ) %}
            z1 
            {% if ( z1 == 1 ) %}
                {{ _(year/month/day, variant='0') }}
            {% else %}
                {{ _(years old) }}
            {% endif %}
            {% if ( ( z2 > 0 ) or ( z3 > 0 ) ) %},{% endif %}
        {% endif %}
        {% if ( z2 > 0 ) %}
            z2 
            {% if ( z2 == 1 ) %}
                {{ _(year/month/day, variant='1') }}
            {% else %}
                {{ _(months old) }}
            {% endif %}
            {% if ( z3 > 0 ) %},{% endif %}
        {% endif %}
        {% if ( ( z1 + z2 ) == 0 ) %}
            {% if ( z3 >= 0 ) %}
                z3 
                {% if ( ( z3 == 0 ) or ( z3 == 1 ) ) %}
                    {{ _(year/month/day, variant='2') }}
                {% else %}
                    {{ _(days old) }}
                {% endif %}
            {% endif %}
        {% else %}
            {% if ( z3 > 0 ) %}
                z3 
                {% if ( z3 == 1 ) %}
                    {{ _(year/month/day, variant='2') }}
                {% else %}
                    {{ _(days old) }}
                {% endif %}
            {% endif %}
        {% endif %}
        {% if ( lang == "en" ) %}old{% endif %}
    {% endmacro %}
    {% macro compute_age(z1, z2) %}
        {% with %}
            {% set l1 = nb_days(z2.month) %}
            {% if ( ( z1.month != "" ) and ( ( z2.month != "" ) and ( z1.month > z2.month ) ) ) %}
                {% if ( ( z1.day != "" ) and ( ( z2.day != "" ) and ( z1.day >= z2.day ) ) ) %}
                    {{ compute_age1(( z1.year - z2.year) , ( z1.month - z2.month ), ( z1.day - z2.day )) }}
                {% else %}
                    {{ compute_age1(( z1.year - z2.year) , ( ( z1.month - z2.month ) - 1 ), ( ( l1 + z1.day ) - z2.day )) }}
                {% endif %}
            {% endif %}
            {% if ( ( z1.month != "" ) and ( ( z2.month != "" ) and ( z1.month == z2.month ) ) ) %}
                {% if ( ( z1.day != "" ) and ( ( z2.day != "" ) and ( z1.day >= z2.day ) ) ) %}
                    {{ compute_age1(( z1.year - z2.year) , 0, ( z1.day - z2.day )) }}
                {% else %}
                    {% if ( z1.year > z2.year ) %}
                        {{ compute_age1(( ( z1.year - z2.year) - 1 ), 11, ( ( l1 + z1.day ) - z2.day )) }}
                    {% endif %}
                {% endif %}
            {% endif %}
            {% if ( ( z1.month != "" ) and ( ( z2.month != "" ) and ( ( z1.month < z2.month ) and ( z1.year > z2.year ) ) ) ) %}
                {% if ( ( z1.day != "" ) and ( ( z2.day != "" ) and ( z1.day >= z2.day ) ) ) %}
                    {{ compute_age1(( ( z1.year - z2.year) - 1 ), ( ( 12 + z1.month ) - z2.month ), ( z1.day - z2.day )) }}
                {% else %}
                    {{ compute_age1(( ( z1.year - z2.year) - 1 ), ( ( 11 + z1.month ) - z2.month ), ( ( l1 + z1.day ) - z2.day )) }}
                {% endif %}
            {% endif %}
        {% endwith %}
    {% endmacro %}
    {% macro curr_age() %}
        {# foreach not implemented yet #}
        {% if computable_age %}
            {% if ( ( birth_date.year != "" ) and ( ( today.year >= birth_date.year ) and ( l_nbd != "" ) ) ) %}
                {{ compute_age('today', 'birth_date') }}
            {% else %}
                {{ age }}
            {% endif %}
        {% endif %}
    {% endmacro %}
    {% macro etat_civil() %}
        <ul class="fa-ul{% if ( not ( has_image or ( b.default_image == "yes" ) ) ) %} pl-0{% endif %} mb-0">
            {% if ( has_birth_date or has_birth_place ) %}
                <li {{ getvar("ns"_(birth) ) }}>
                    <span class="fa-li"><i class="fas fa-baby"></i></span>
                    {% if has_birth_date %}
                        {{ _(born, variant='s') |capitalize }} {{ on_birth_date }}
                        {% if has_birth_place %}{{ in_place }} {{ birth_place }}{% endif %}
                    {% else %}
                        {% if has_birth_place %}{{ _(born, variant='s') |capitalize }} {{ in_place }} {{ birth_place }}{% endif %}
                    {% endif %}
                </li>
                {% if birthday %}
                    <li>
                        <span class="fa-li"><i class="fa-solid fa-cake-candles"></i></span>
                        {{ _(happy birthday to you!) |capitalize }}
                    </li>
                {% endif %}
            {% endif %}
            {% if ( has_baptism_date or has_baptism_place ) %}
                <li {{ getvar("ns"_(baptism) ) }}>
                    <span class="fa-li"><i class="fas fa-dove"></i></span>
                    {% if has_baptism_date %}
                        {{ _(baptized, variant='s') |capitalize }} {{ on_baptism_date }}
                        {% if has_baptism_place %}{{ in_place }} {{ baptism_place }}{% endif %}
                    {% else %}
                        {% if has_baptism_place %}{{ _(baptized, variant='s') |capitalize }} {{ in_place }} {{ baptism_place }}{% endif %}
                    {% endif %}
                </li>
                {{ nl }}
            {% endif %}
            {% if is_dead %}
                <li class="mt-1" {{ getvar("ns"_(death) ) }}>
                    <span class="fa-li"><i class="fas fa-skull-crossbones"></i></span>
                    {{ capitalize(died) }}
                    {% if has_death_date %}{{ on_death_date }}{% endif %}
                    {% if has_death_place %}{{ in_place }} {{ death_place }}{% endif %}
                    {% if ( has_linked_page.DEATH and ( linked_page.DEATH != "" ) ) %}({{ linked_page.DEATH }}){% endif %}
                </li>
                {{ nl }}
            {% endif %}
            {% if ( is_buried or is_cremated ) %}
                <li {% if is_buried %}{{ getvar("ns"_(burial) ) }}{% else %}{% if is_cremated %}{{ getvar("ns"_(cremation) ) }}{% endif %}
                    {% endif %}>
                    <span class="fa-li"><i class="fas fa-cross"></i></span>
                    {% if is_buried %}
                        {{ _(buried, variant='s') |capitalize }}
                        {% if has_burial_date %}{{ on_burial_date }}{% endif %}
                        {% if has_burial_place %}{{ in_place }} {{ burial_place }}{% endif %}
                    {% endif %}
                    {% if is_cremated %}
                        {{ _(cremated, variant='s') |capitalize }}
                        {% if has_cremation_date %}{{ on_cremation_date }}{% endif %}
                        {% if has_cremation_place %}{{ in_place }} {{ cremation_place }}{% endif %}
                    {% endif %}
                </li>
                {{ nl }}
            {% endif %}
            {% if ( computable_death_age or computable_age ) %}
                <li class="mt-1"
                    title="{% if ( is_dead and computable_death_age ) %}{{ _(age at death) |capitalize }} {% else %}{% if ( ( not is_dead ) and computable_age ) %}{{ _(age) |capitalize }} {% endif %}{% endif %}= {% if ( l_nbd > 999 ) %}{{ ( ( l_nbd / 10 ) / 10 ) / 10 }}{{ _((thousand separator) ) }}{{ remainder(l_nbd) }} {{ _(days old) }}{% else %}{% if ( l_nbd > 31 ) %}{{ l_nbd }} {{ _(days old) }}{% endif %}{% endif %}{% if ( lang == "en" ) %} old{% endif %}">
                    <span class="fa-li"><i class="far fa-id-card"></i></span>
                    {% if ( is_dead and computable_death_age ) %}
                        {% if ( ( death_date.month != "" ) and ( ( death_date.day != "" ) and ( ( birth_date.month != "" ) and ( birth_date.day != "" ) ) ) ) %}
                            {{ curr_age() }}
                        {% else %}
                            ~ {{ death_age }}
                        {% endif %}
                    {% endif %}
                    {% if ( ( not is_dead ) and computable_age ) %}
                        {% if ( ( birth_date.month != "" ) and ( birth_date.day != "" ) ) %}
                            {{ curr_age() }}
                        {% else %}
                            ~ {{ age }}
                        {% endif %}
                    {% endif %}
                </li>
            {% endif %}
            {% if has_occupation %}
                <li class="mt-1"
                    title="{{ _(occupation/occupations, variant='0') |capitalize }}">
                    <span class="fa-li"><i class="fas fa-user-tie"></i></span>
                    {{ capitalize(occupation) }}
                </li>
                {{ nl }}
            {% endif %}
            {% if ( has_linked_page.OCCU and ( linked_page.OCCU != "" ) ) %}
                <li>{{ capitalize(linked_page.OCCU) }}</li>
                {{ nl }}
            {% endif %}
            {% if ( has_consanguinity and ( b.show_consang != "no" ) ) %}
                <li class="mt-1" title="{{ _(consanguinity) |capitalize }}">
                    <span class="fa-li"><i class="fas fa-percent"></i></span>
                    {% if cancel_links %}
                        {{ _(consanguinity) |capitalize }}{{ _(:) }} {{ consanguinity }}
                    {% else %}
                        <a href="/m=NG&em=R&et=A&ei={{ mother.index }}&select={{ father.index }}&spouse=on{% if ( e.image != "" ) %}&image={{ e.image }}{% endif %}&long=on"
                           title="{{ _(link between) |capitalize }} {{ _(the father/the mother/a parent, variant='0') }} {{ _(and) }} {{ _(the father/the mother/a parent, variant='1') }}">{{ _(consanguinity) |capitalize }}{{ _(:) }} {{ consanguinity }}</a>
                    {% endif %}
                </li>
                {{ nl }}
            {% endif %}
            {% if ( not cancel_links ) %}
                {{ reset_count2 }}
                {% if browsing_with_sosa_ref %}{# foreach not implemented yet #}{# foreach not implemented yet #}{% endif %}
                {% if has_sosa %}
                    {{ sosa(count2) }}
                {% else %}
                    {{ from_sosa(count2) }}
                {% endif %}
            {% endif %}
        </ul>
    {% endmacro %}
    {% macro portrait() %}
        {% if ( has_image or ( has_blason or ( b.default_image == "yes" ) ) ) %}
            <div class="d-flex align-items-center">
                {% if has_image %}
                    {% if ( not cancel_links ) %}<a href="{{ image_url }}" target="_blank">{% endif %}
                        <img src="{{ image_url }}"
                             {{ image_size }}
                             class=" {% if ( op_m == 3 ) %}align-self-center mx-1{% endif %} rounded"
                             alt="{{ _(image/images, variant='0') }}"
                             title="{{ _(him/her, variant='s') }}">
                        {% if ( not cancel_links ) %}</a>{% endif %}
                {% else %}
                    {% if has_blason %}
                        {% if ( not cancel_links ) %}<a href="{{ blason_url }}" target="_blank">{% endif %}
                            <img src="{{ blason_url }}"
                                 {{ blason_size }}
                                 class="{% if ( op_m == 3 ) %}align-self-center mx-1{% endif %}"
                                 alt="{{ _(blason/blasons, variant='0') }}">
                            {% if ( not cancel_links ) %}</a>{% endif %}
                    {% else %}
                        {% if ( b.default_image == "yes" ) %}
                            <img class="{% if ( op_m == 3 ) %}d-flex align-self-center mx-1{% endif %} rounded"
                                 src="{{ images_prefix }}img_unknown_{% if is_female %}wo{% else %}{% if is_male %}{% else %}u_{% endif %}{% endif %}man.png"
                                 {{ image_size }}
                                 alt="{{ _(missing image) }}">
                        {% endif %}
                    {% endif %}
                {% endif %}
            </div>
        {% endif %}
    {% endmacro %}
    {% macro border() %}
        <div class="w-50 border border-dark border-left-0 border-top-0 border-bottom-0">&#8203;</div>
    {% endmacro %}
    {% with %}
        {% set evm = ("m=F;") if (( e.m == "F" )) %}
        {% with %}
            {% set prefx = (prefix_set.pmod) if (( e.m == "F" )) else ("/") %}
            {% if ( e.m != "MOD_IND" ) %}
                <div class="col-12">
                    <h1 class="{% if ( op_m == 2 ) %}text-center{% else %}text-xs-center text-md-left{% endif %}">
                        {% if ( has_portrait and has_blason ) %}
                            {% if ( not cancel_links ) %}<a href="{{ blason_url }}" target="_blank">{% endif %}
                                <img src="{{ blason_url }}"
                                     {{ blason_small_size }}
                                     class="{% if ( op_m == 3 ) %}align-self-center mx-1{% endif %} mx-2"
                                     alt="{{ _(blason/blasons, variant='0') }}">
                                {% if ( not cancel_links ) %}</a>{% endif %}
                        {% endif %}
                        {% if has_public_name %}
                            {% if has_qualifiers %}
                                {{ public_name }} <em>{{ qualifier }}</em>
                            {% else %}
                                {{ public_name }} {{ surname }}
                            {% endif %}
                        {% else %}
                            {% if has_qualifiers %}
                                {{ first_name }} <em>{{ qualifier }}</em>
                            {% else %}
                                {% if cancel_links %}
                                    {{ first_name }} {{ surname }}
                                {% else %}
                                    <a href="/m=P&v={{ first_name_key }}#i{{ index }}">{{ first_name }}</a>
                                    <a href="/m=N&v={{ surname_key }}#i{{ index }}">{{ surname }}</a>
                                {% endif %}
                            {% endif %}
                        {% endif %}
                        <span class="font-weight-light small">{{ dates }}</span>
                    </h1>
                </div>
                {% if ( ( ( p_mod == "zz" ) or ( p_mod == "" ) ) and ( e.m != "F" ) ) %}<div class="col-lg-8">{% endif %}
                    {% if ( op_m == 1 ) %}
                        {{ portrait() }}{{ etat_civil() }}
                        <div class="mt-2 mb-1 ml-2">{{ detailed_names() }}</div>
                    {% else %}
                        {% if ( op_m == 2 ) %}
                            <div class="col-12 text-center mb-2 mx-2">{{ portrait() }}</div>
                            <div class="col-12 text-center mb-2 mx-2">{{ detailed_names() }}</div>
                            {{ etat_civil() }}
                        {% else %}
                            {% if ( op_m == 3 ) %}
                                <div class="d-flex flex-column flex-md-row align-items-center align-items-md-start">
                                    <div>{{ portrait() }}</div>
                                    <div>
                                        <div class="text-center mb-2 mx-2">{{ detailed_names() }}</div>
                                        {{ etat_civil() }}
                                    </div>
                                </div>
                            {% else %}
                                Unavailable option value!
                            {% endif %}
                        {% endif %}
                    {% endif %}
                {% endif %}
            {% endwith %}
        {% endwith %}
    {% endwith %}
{% endwith %}

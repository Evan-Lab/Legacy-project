{# 
  Generated by JinjaGenerator for template 'modules/relations'
    at 2025-10-26T15:16:13.609914

  Used macros:
  - relations_tree(z1)
  - str(xxx, yyy)

  Used includes:
  None

  Used variables:
  - op_m (x4)
  - reset_count (x10)
  - incr_count (x4)
  - count (x11)
  - index (x3)
  - sex (x5)
  - browsing_with_sosa_ref (x3)
  - sosa_ref.index (x3)
  - p_mod (x3)
  - timeline (x1)
  - has_relations (x2)
  - cnt (x1)
  - cancel_links (x2)
  - l_ref (x2)
  - rel_nbr (x1)
  - self (x3)
  - g_cnt (x1)
  - sp (x1)
  - nl (x1)
#}
<!-- $Id: modules/relations.txt v7.1 17/11/2023 10:30:00 $ -->
{% with %}
    {% set op_m = (op_m) if (( op_m != "" )) else ("1") %}
    {% macro relations_tree(z1) %}
        {{ reset_count }}href="/m=RLM&{# foreach not implemented yet #}{# foreach not implemented yet #}{# foreach not implemented yet #}{# foreach not implemented yet #}{{ incr_count }}i{{ count }}={{ index }}&t{{ count }}=
        {% if ( sex == 0 ) %}
            {{ _(him/her, variant='0') }}
        {% else %}
            {% if ( sex == 1 ) %}
                {{ _(him/her, variant='1') }}
            {% else %}
                0
            {% endif %}
        {% endif %}
        &
        {% if browsing_with_sosa_ref %}{{ incr_count }}i{{ count }}={{ sosa_ref.index }}&t{{ count }}=sosa_1&{% endif %}
        " title="{{ _(relations tree) |capitalize }} ({{ _(and) }} {{ _(witnesses at his events) }})"
        {{ reset_count }}
    {% endmacro %}
    {{ reset_count }}
    {% if ( ( p_mod != "" ) and ( ( "c" in p_mod ) or ( p_mod == "zz" ) ) ) %}{{ incr_count }}{% endif %}
    {% with %}
        {% set timeline = ("0") if (( count == 0 )) %}{{ reset_count }}
        {% if ( timeline == 0 ) %}
            {% if has_relations %}{{ incr_count }}{% endif %}
            {# foreach not implemented yet #}{# foreach not implemented yet #}{% endif %}{# foreach not implemented yet #}{# foreach not implemented yet #}{% with %}{% set rel_nbr = count %}{% if ( ( op_m == 1 ) and has_relations ) %}{{ reset_count }}{# foreach not implemented yet #}{# foreach not implemented yet #}{# foreach not implemented yet #}
            {% with %}
                {% set cnt = 0 %}
                {% with %}
                    {% set l_ref = (sosa_ref.index) if (browsing_with_sosa_ref) else (index) %}
                    <h2>
                        {{ _(relation/relations, variant='1') |capitalize }}
                        {% if ( cnt > 0 ) %}
                            {% if ( not cancel_links ) %}
                                <a {{ relations_tree(l_ref) }}>
                                    <img class="ml-2 mb-1"
                                         src="{{ url_for('static/images/', path='gui_create.png') }}"
                                         height="18"
                                         alt="Tree">
                                </a>
                            {% endif %}
                        {% endif %}
                    </h2>
                    <ul class="pl-4">
                        {# foreach not implemented yet #}{# foreach not implemented yet #}
                    </ul>
                {% endwith %}
            {% endwith %}
        {% else %}
            {% if ( ( op_m == 2 ) and ( rel_nbr > 0 ) ) %}
                {% with %}
                    {% set l_ref = (sosa_ref.index) if (browsing_with_sosa_ref) else (index) %}
                    <h2 id="relations">
                        {{ _(relation/relations, variant='1') |capitalize }}
                        {% if ( not cancel_links ) %}
                            <a {{ relations_tree(l_ref) }}>
                                <img src="{{ url_for('static/images/', path='gui_create.png') }}"
                                     height="20"
                                     alt="Tree">
                            </a>
                        {% endif %}
                    </h2>
                    {{ reset_count }}{# foreach not implemented yet #}{# foreach not implemented yet #}{# foreach not implemented yet #}
                    {% if ( count > 0 ) %}<h3>{{ _(relations of) |capitalize }} {{ self }}</h3>{% endif %}
                    <ul class="pl-4">
                        {# foreach not implemented yet #}{# foreach not implemented yet #}{{ reset_count }}{# foreach not implemented yet #}
                        {% with %}
                            {% set g_cnt = 0 %}
                            {% if ( g_cnt > 0 ) %}
                                <li>
                                    {% if ( sex == 0 ) %}
                                        {{ _(godfather/godmother/godparents, variant='0') |capitalize }}
                                    {% else %}
                                        {% if ( sex == 1 ) %}
                                            {{ _(godfather/godmother/godparents, variant='1') |capitalize }}
                                        {% else %}
                                            {{ _(godparent) |capitalize }}
                                        {% endif %}
                                    {% endif %}
                                    {{ _(of) }}{{ sp }}{{ reset_count }}{# foreach not implemented yet #}
                                </li>
                            {% endif %}
                        </ul>
                        {{ reset_count }}{# foreach not implemented yet #}
                        {% if ( count > 0 ) %}<h3>{{ _(witnesses to events of) |capitalize }} {{ self }}</h3>{% endif %}
                        <ul class="pl-4">
                            {# foreach not implemented yet #}
                        </ul>
                        {% macro str(xxx, yyy) %}
                            {{ _(events to which %s was witness:::xxx) |capitalize }}
                        {% endmacro %}
                        {{ reset_count }}{# foreach not implemented yet #}
                        {% if ( count > 0 ) %}<h3>{{ str(self, sex) }}</h3>{% endif %}
                        <ul class="pl-4">
                            {# foreach not implemented yet #}
                        </ul>
                        {{ nl }}
                    {% endwith %}
                {% endwith %}
            {% endif %}
        {% endif %}
    {% endwith %}
{% endwith %}
{% endwith %}

{# 
  Generated by JinjaGenerator for template 'modules/unions'
    at 2025-10-29T22:35:40.714350

  Used macros:
  - relations_tree(z1)
  - list_witness_of_kind(kindx)
  - havingaschildren(xx)
  - havingchildren(cc)
  - loc_married_to(sexx, date)
  - loc_long_married(xx)
  - picture(xxx, yyy)

  Used includes:
  None

  Used variables:
  - op_m (x12)
  - reset_count (x9)
  - evar.image (x1)
  - incr_count (x3)
  - count (x8)
  - index (x1)
  - sex (x2)
  - browsing_with_sosa_ref (x1)
  - sosa_ref.index (x1)
  - k_cnt (x2)
  - sp (x4)
  - cc (x1)
  - sexx (x2)
  - are_married (x2)
  - are_not_married (x2)
  - are_engaged (x2)
  - is_no_sexes_check (x2)
  - is_no_mention (x2)
  - xx.sex (x1)
  - on_marriage_date (x2)
  - wedding_birthday (x1)
  - cancel_links (x3)
  - xxx.yyy_url (x2)
  - xxx (x3)
  - parent.is_male (x1)
  - count1 (x1)
  - child.is_male (x1)
  - child.is_female (x1)
  - has_children (x3)
  - has_families (x6)
  - count2 (x1)
  - prefix_base_password (x1)
  - access (x1)
  - reset_count2 (x1)
#}

<!-- $Id: modules/unions.txt v7.1 17/11/2023 10:30:00 $ -->
{% with %}
    {% set op_m = (op_m) if (op_m != "") else ("1") %}
    {% macro relations_tree(z1) %}
        {{ reset_count }}href="/spouse=on;m=RLM;image={{ evar.image }}&{# foreach not implemented yet #}{{ incr_count }}i{{ count }}={{ index }}&t{{ count }}=
        {% if sex == 0 %}
            {{ _('him/her', variant='0') }}
        {% else %}
            {% if sex == 1 %}
                {{ _('him/her', variant='1') }}
            {% else %}
                0
            {% endif %}
        {% endif %}
        {% if browsing_with_sosa_ref %}{{ incr_count }}i{{ count }}={{ sosa_ref.index }}&t{{ count }}=sosa_1;{% endif %}
        " title="{{ _("relations tree") |capitalize }}"
    {% endmacro %}
    {% macro list_witness_of_kind(kindx) %}
        {{ reset_count }}{# foreach not implemented yet #}{% with %}{% set k_cnt = count %}{% if k_cnt > 0 %}{% if k_cnt == 1 %}{{ _('kindx', variant='0')|capitalize }}{% else %}{{ _('kindx', variant='1')|capitalize }}{% endif %}{{ _(':') }}{{ sp }}{% endif %}{{ reset_count }}{# foreach not implemented yet #}
    {% endwith %}
{% endmacro %}
{% macro havingaschildren(xx) %}
    {{ _('having as children:::xx', variant='1') }}
{% endmacro %}
{% macro havingchildren(cc) %}
    {% if cc > 1 %}
        {{ havingaschildren(nth(_('n (number)') , "cc")) }}
    {% else %}
        {{ _('having as children', variant='0') }}
    {% endif %}
{% endmacro %}
{% macro loc_married_to(sexx, date) %}
    {% if sexx == 0 or sexx == 2 %}
        {% if are_married %}
            {{ _('married%t to:::date', variant='0') }}
        {% else %}
            {% if are_not_married %}
                {{ _('relationship%t to:::date', variant='0') }}
            {% else %}
                {% if are_engaged %}
                    {{ _('engaged%t to:::date', variant='0') }}
                {% else %}
                    {% if is_no_sexes_check %}
                        {{ _('relationship%t to:::date', variant='0') }}
                    {% else %}
                        {% if is_no_mention %}date {{ _("with") }}{% endif %}
                    {% endif %}
                {% endif %}
            {% endif %}
        {% endif %}
    {% else %}
        {% if are_married %}
            {{ _('married%t to:::date', variant='1') }}
        {% else %}
            {% if are_not_married %}
                {{ _('relationship%t to:::date', variant='1') }}
            {% else %}
                {% if are_engaged %}
                    {{ _('engaged%t to:::date', variant='1') }}
                {% else %}
                    {% if is_no_sexes_check %}
                        {{ _('relationship%t to:::date', variant='1') }}
                    {% else %}
                        {% if is_no_mention %}date {{ _("with") }}{% endif %}
                    {% endif %}
                {% endif %}
            {% endif %}
        {% endif %}
    {% endif %}
{% endmacro %}
{% macro loc_long_married(xx) %}
    {{ loc_married_to(xx.sex, () if (on_marriage_date == "") else (" <em>"+on_marriage_date+(" ("+_('happy birthday to them!')+")") if (wedding_birthday)+"</em>
    ")) }}
{% endmacro %}
{% macro picture(xxx, yyy) %}
    {% if not cancel_links %}<a href="{{ xxx.yyy_url }}" class="align-self-start" target="_blank">{% endif %}
        <img class="{% if "xxx" == "spouse" %}big{% else %}small{% endif %}_image fade_image mx-1 rounded"
             src="{{ xxx.yyy_url }}"
             alt="{{ _('xxx/xxxs', variant='0') }} {{ _('yyy/yyys', variant='0') }}"
             title="{% if "xxx" == "spouse" %}{{ xxx }} ({{ _('spouse/spouses', variant='0') }}) {% else %}{% if "xxx" == "parent" %}{{ xxx }} ({% if parent.is_male %}{{ _('father-in-law/mother-in-law', variant='0') }}{% else %}{{ _('father-in-law/mother-in-law', variant='1') }}{% endif %}) {% else %}{% if "xxx" == "child" %}{{ count1 }}. {{ xxx }} ({% if child.is_male %}{{ _('son/daughter/child', variant='0') }}{% else %}{% if child.is_female %}{{ _('son/daughter/child', variant='1') }}{% else %}{{ _('son/daughter/child', variant='2') }}{% endif %}{% endif %}) {% endif %}{% endif %}{% endif %}">
        {% if not cancel_links %}</a>{% endif %}
{% endmacro %}
{{ reset_count }}
{% if has_children %}{{ incr_count }}{# foreach not implemented yet #}{% endif %}{% if has_families %}{# foreach not implemented yet #}
    <h2 class="mt-2 w-100">
        {% if op_m != 1 %}
            {% if count2 > 0 %}
                {{ _('marriage/marriages', variant='f') |capitalize }}
            {% else %}
                {{ _('spouse/spouses', variant='f') |capitalize }}
            {% endif %}
            {% if op_m == 2 or op_m == 3 or count > 0 and has_children %}
                {{ sp }}{{ _("and") }} {{ _('child/children', variant='c') }}
            {% endif %}
        {% else %}
            {{ _('family/families', variant='f') |capitalize }}
        {% endif %}
        {% if op_m == 4 or op_m == 5 %}
            {% if count > 2 %}
                {{ sp }}{{ _("to the great-grandchildren") }}
            {% else %}
                {% if count > 1 %}{{ sp }}{{ _("to the grandchildren") }}{% endif %}
            {% endif %}
        {% endif %}
        {% if not cancel_links and has_children %}
            <span class="ml-2"><a href="{{ prefix_base_password }}{{ access }}&m=D&t=T&v=1">
                <img class="mx-1 mb-1"
                     src="{{ url_for("static", path="images/gui_create.png") }}"
                     height="18"
                     alt="tree desc."
                     title="{{ _("descendants tree") |capitalize }} {{ _("to the children") }} ({{ _("with") }} {{ _('spouse/spouses', variant='0') }})">
            </a>
        </span>
    {% endif %}
</h2>
{% endif %}
{% if op_m == 1 and has_families %}
    <ul class="marriage_perso">
        {{ reset_count }}{# foreach not implemented yet #}
    </ul>
{% else %}
    {% if op_m == 2 and has_families %}
        {{ reset_count }}{{ reset_count2 }}{# foreach not implemented yet #}
    {% else %}
        {% if op_m == 3 and has_families %}
            <ul class="marriage_perso">
                {{ reset_count }}{# foreach not implemented yet #}
            </ul>
        {% else %}
            {% if op_m == 4 and has_families %}
                <ul class="marriage_perso">
                    {{ reset_count }}{# foreach not implemented yet #}
                </ul>
            {% else %}
                {% if op_m == 5 and has_families %}
                    <ul>
                        {{ reset_count }}{# foreach not implemented yet #}
                    </ul>
                {% endif %}
            {% endif %}
        {% endif %}
    {% endif %}
{% endif %}
{% endwith %}

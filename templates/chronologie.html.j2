{# 
  Generated by JinjaGenerator for template 'modules/chronologie'
    at 2025-10-26T20:25:13.907879

  Used macros:
  - event_tree(z1)
  - relations_tree(z1)
  - list_witness_of_kind(kindx)
  - date_to_sort(ddd)
  - month(mmm)
  - day(ddd)
  - dprec(ddd)
  - one_child(ccc, evm, labl, ddd)

  Used includes:
  None

  Used variables:
  - reset_count (x7)
  - evar.image (x2)
  - evar.allmar (x4)
  - evar.ma_s (x2)
  - evar.allevt (x3)
  - evar.simple (x4)
  - has_relations (x1)
  - incr_count (x4)
  - count (x10)
  - index (x3)
  - sex (x4)
  - browsing_with_sosa_ref (x3)
  - sosa_ref.index (x3)
  - k_cnt (x2)
  - ddd.year (x2)
  - ddd.month (x2)
  - ddd.day (x6)
  - ddd (x3)
  - ddd.prec (x3)
  - mm (x4)
  - dd (x4)
  - yyyy (x1)
  - m1 (x1)
  - d1 (x1)
  - mmm.month (x4)
  - mmm.prec (x1)
  - dummy (x4)
  - ccc.birth_date.year (x1)
  - ccc.birth_date (x2)
  - ccc.is_male (x2)
  - ccc.is_female (x2)
  - ccc (x2)
  - ccc.death_date.year (x3)
  - ccc.death_date.month (x3)
  - ccc.death_date.day (x3)
  - ccc.is_dead (x1)
  - ccc.death_date (x2)
  - ccc.computable_death_age (x1)
  - ccc.death_age (x1)
  - ccc.has_families (x1)
  - count2 (x4)
  - sp (x5)
  - his_death_date_year (x1)
  - his_death_date_month (x1)
  - his_death_date_day (x1)
  - his_death_date (x1)
  - my_death_date (x1)
  - evm (x1)
  - has_event (x1)
  - cancel_links (x2)
  - l_ref (x1)
  - e.allmar (x1)
  - e.allevt (x2)
  - e.simple (x2)
  - url_set.allmar.on (x1)
  - url_set.allmar (x1)
  - url_set.allevt.on (x1)
  - url_set.allevt (x1)
  - url_set.simple.on (x1)
  - url_set.simple (x1)
  - self.death_date.year (x2)
  - self.death_date.month (x3)
  - self.death_date.day (x3)
  - self (x1)
  - is_dead (x1)
  - my_death_date_year (x1)
  - my_death_date_month (x1)
  - my_death_date_day (x1)
  - reset_count2 (x2)
  - empty_sorted_list (x1)
  - has_parents (x1)
  - evarevp (x2)
  - father.is_dead (x1)
  - father.death_date.year (x1)
  - father.death_date (x2)
  - father.computable_death_age (x1)
  - father.death_age (x1)
  - father (x1)
  - cas2 (x2)
  - mother.is_dead (x1)
  - mother.death_date.year (x1)
  - mother.death_date (x2)
  - mother.computable_death_age (x1)
  - mother.death_age (x1)
  - mother (x1)
  - has_siblings (x1)
  - has_families (x1)
#}
<!-- $Id: modules/chronologie.txt v7.1 04/03/2023 09:51:04 $ -->
{% macro event_tree(z1) %}
    {{ reset_count }}href="/spouse=on;m=RLM;image={{ evar.image }}&{# foreach not implemented yet #}{% if has_relations %}{# foreach not implemented yet #}{% endif %}{{ incr_count }}i{{ count }}={{ index }}&t{{ count }}={% if ( sex == 0 ) %}{{ _("him/her", variant='0') }}{% else %}{% if ( sex == 1 ) %}{{ _("him/her", variant='1') }}{% else %}0{% endif %}{% endif %}&{% if browsing_with_sosa_ref %}{{ incr_count }}i{{ count }}={{ sosa_ref.index }}&t{{ count }}=sosa_1;{% endif %}"{% if ( count < 3 ) %} style="display:none;"{% endif %} title="{{ _("witness tree")|capitalize }} ({{ _("witnesses to my events and godparents") }})"{{ reset_count }}{% endmacro %}{% macro relations_tree(z1) %}{{ reset_count }}href="/spouse=on;m=RLM;image={{ evar.image }}&{# foreach not implemented yet #}{# foreach not implemented yet #}{# foreach not implemented yet #}{# foreach not implemented yet #}{{ incr_count }}i{{ count }}={{ index }}&t{{ count }}=
    {% if ( sex == 0 ) %}
        {{ _("him/her", variant='0') }}
    {% else %}
        {% if ( sex == 1 ) %}
            {{ _("him/her", variant='1') }}
        {% else %}
            0
        {% endif %}
    {% endif %}
    {% if browsing_with_sosa_ref %}{{ incr_count }}i{{ count }}={{ sosa_ref.index }}&t{{ count }}=sosa_1;{% endif %}
    " class="ml-2" title="{{ _("relations tree") |capitalize }}"
    {{ reset_count }}
{% endmacro %}
{% macro list_witness_of_kind(kindx) %}
    {{ reset_count }}{# foreach not implemented yet #}
    {% with %}
        {% set k_cnt = 0 %}{{ reset_count }}
        {% if ( k_cnt > 0 ) %}<br>{% endif %}
        {% if ( k_cnt >= 1 ) %}
            {% if ( "kindx" == "" ) %}
                {{ _("witness/witness/witnesses", variant='2') |capitalize }}{{ _(":") }}
            {% else %}
                {% if ( "kindx" == "offi" ) %}
                    {{ _("civil registrar/civil registrar/civil registrar", variant='2') |capitalize }}{{ _(":") }}
                {% else %}
                    {% if ( "kindx" == "reli" ) %}
                        {{ _("parrish registrar/parrish registrar/parrish registrar", variant='2') |capitalize }}{{ _(":") }}
                    {% else %}
                        {% if ( "kindx" == "info" ) %}
                            {{ _("informant/informant/informant", variant='2') |capitalize }}{{ _(":") }}
                        {% else %}
                            {% if ( "kindx" == "pres" ) %}
                                {{ _("present/present/present", variant='2') |capitalize }}{{ _(":") }}
                            {% else %}
                                {% if ( "kindx" == "ment" ) %}
                                    {{ _("mentioned/mentioned/mentioned", variant='2') |capitalize }}{{ _(":") }}
                                {% else %}
                                    {% if ( "kindx" == "othe" ) %}{{ _("other/other/other", variant='2') |capitalize }}{{ _(":") }}{% endif %}
                                {% endif %}
                            {% endif %}
                        {% endif %}
                    {% endif %}
                {% endif %}
            {% endif %}
        {% endif %}
        {{ reset_count }}{# foreach not implemented yet #}{% endwith %}{% endmacro %}{% macro date_to_sort(ddd) %}{% with %}{% set yyyy = (ddd.year) if (( ddd.year != "" )) else ("0000") %}{% with %}{% set mm = (ddd.month) if (( ddd.month != "" )) else ("00") %}{% with %}{% set dd = (ddd.day) if (( ddd.day != "" )) else ("00") %}{% with %}{% set m1 = ("0"mm) if (( ( mm > 0 ) and ( mm < 10 ) )) else (mm) %}{% with %}{% set d1 = ("0"dd) if (( ( dd > 0 ) and ( dd < 10 ) )) else (dd) %}{{ ddd }}, {{ yyyy }}{{ m1 }}{{ d1 }}{% endwith %}{% endwith %}{% endwith %}{% endwith %}{% endwith %}{% endmacro %}{% macro month(mmm) %}{% if ( mmm.month == "" ) %}{% if ( mmm.prec == "&#62;" ) %}12{% else %}00{% endif %}{% else %}{% if ( mmm.month < 10 ) %}0{{ mmm.month }}{% else %}{{ mmm.month }}{% endif %}{% endif %}{% endmacro %}{% macro day(ddd) %}{% if ( ddd.day == "" ) %}{% if ( ddd.prec == "&#62;" ) %}32{% else %}00{% endif %}{% else %}{% if ( ddd.day < 10 ) %}0{{ ddd.day }}{% else %}{{ ddd.day }}{% endif %}{% endif %}{% endmacro %}{% macro dprec(ddd) %}{% if ( ddd.prec == "&#60;" ) %}2{% else %}{% if ( ddd.prec == "&#62;" ) %}2{% else %}2{% endif %}{% endif %}{% endmacro %}{% macro one_child(ccc, evm, labl, ddd) %}{{ add_in_sorted_list(dummy, ccc.birth_date.year, month("ccc.birth_date"), day("ccc.birth_date"), dprec("ccc.birth_date"), count2, (ccc.birth_date) if (( ccc.birth_date != "" )) else ("("_("missing date", variant='0')")"), a_of_b(_("birth"), (_("labl", variant='0')) if (ccc.is_male) else ((_("labl", variant='1')) if (ccc.is_female) else (_("labl", variant='2'))))spshort_display_person("ccc"), , , , ccc, ddd) }}{% with %}{% set his_death_date_year = (ccc.death_date.year) if (( ccc.death_date.year != "" )) else ("0") %}{% with %}{% set his_death_date_month = (("0") if (( ccc.death_date.month <= 9 ))ccc.death_date.month) if (( ccc.death_date.month != "" )) else ("00") %}{% with %}{% set his_death_date_day = (("0") if (( ccc.death_date.day <= 9 ))ccc.death_date.day) if (( ccc.death_date.day != "" )) else ("00") %}{% with %}{% set his_death_date = his_death_date_yearhis_death_date_monthhis_death_date_day %}{% if ( ccc.is_dead and ( his_death_date <= my_death_date ) ) %}{{ add_in_sorted_list(dummy, ccc.death_date.year, month("ccc.death_date"), day("ccc.death_date"), dprec("ccc.death_date"), count2, (ccc.death_date) if (( ccc.death_date != "" )) else ("("_("missing date", variant='0')")"), a_of_b(_("death"), (_("labl", variant='0')) if (ccc.is_male) else ((_("labl", variant='1')) if (ccc.is_female) else (_("labl", variant='2'))))spshort_display_person("ccc")(sp"("ccc.death_age")") if (ccc.computable_death_age), , , , ccc, ddd) }}{% endif %}{% if ( ccc.has_families and ( evm == 1 ) ) %}{# foreach not implemented yet #}
    {% endif %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endmacro %}
{% if has_event %}
    {% with %}
        {% set evarmac = ("1") if (( ( evar.allmar != "" ) and ( evar.allmar == "on" ) )) else ("0") %}
        {% with %}
            {% set evarmas = ("1") if (( ( evar.ma_s != "" ) and ( evar.ma_s == "on" ) )) else ("0") %}
            {% with %}
                {% set evarevp = ("1") if (( ( evar.allevt != "" ) and ( evar.allevt == "on" ) )) else ("0") %}
                {% with %}
                    {% set oneline = ("1") if (( ( evar.simple != "" ) and ( evar.simple == "on" ) )) else ("0") %}
                    {% with %}
                        {% set l_ref = (sosa_ref.index) if (browsing_with_sosa_ref) else (index) %}
                        <div class="d-flex justify-content-between">
                            <h2 class="my-1" id="c">
                                {{ _("time line") |capitalize }}
                                {% if ( not cancel_links ) %}
                                    <a {{ relations_tree(l_ref) }}>
                                        <img src="{{ url_for('static', path='images/gui_create.png') }}"
                                             class="ml-1 mb-1"
                                             height="18"
                                             alt="Tree">
                                    </a>
                                {% else %}
                                    <img src="{{ url_for('static', path='images/gui_create.png') }}"
                                         class="ml-1 mb-1"
                                         height="18"
                                         alt="Tree">
                                {% endif %}
                            </h2>
                            {% if ( not cancel_links ) %}
                                <div class="d-inline-flex align-items-center">
                                    <div>
                                        <a href="{% if ( e.allmar != "on" ) %}{{ url_set.allmar.on }}{% else %}{{ url_set.allmar }}{% endif %}"
                                           class="btn btn-outline-primary btn-sm border-0 px-0{% if ( evar.allmar != "on" ) %} text-muted{% endif %}"
                                           role="button"
                                           title="{% if ( evar.allmar != "on" ) %}{{ _("visualize/show/hide/summary", variant='1') |capitalize }}{% else %}{{ _("visualize/show/hide/summary", variant='2') |capitalize }}{% endif %} {{ _("marriage/marriages", variant='1') }} {{ _("spouse/spouses", variant='1') }} & {{ _("child/children", variant='1') }}">
                                            <i class="fa fa-shuffle fa-fw fa-sm mr-1"></i>
                                        </a>
                                    </div>
                                    <div class="ml-1">
                                        <a href="{% if ( e.allevt != "on" ) %}{{ url_set.allevt.on }}{% else %}{{ url_set.allevt }}{% endif %}"
                                           class="btn btn-outline-primary btn-sm border-0 px-0{% if ( evar.allevt != "on" ) %} text-muted{% endif %}"
                                           role="button"
                                           title="{% if ( e.allevt != "on" ) %}{{ _("visualize/show/hide/summary", variant='1') |capitalize }}{% else %}{{ _("visualize/show/hide/summary", variant='2') |capitalize }}{% endif %} {{ _("event/events", variant='1') }} {{ _("parents") }} & {{ _("siblings") }}">
                                            <i class="fa fa-graduation-cap fa-fw"></i>
                                        </a>
                                    </div>
                                    <div class="ml-1">
                                        <a href="{% if ( e.simple != "on" ) %}{{ url_set.simple.on }}{% else %}{{ url_set.simple }}{% endif %}"
                                           class="btn btn-outline-primary btn-sm border-0 px-0{% if ( evar.simple != "on" ) %} text-muted{% endif %}"
                                           role="button"
                                           title="{% if ( e.simple != "on" ) %}{{ _("visualize/show/hide/summary", variant='1') |capitalize }}{% else %}{{ _("visualize/show/hide/summary", variant='2') |capitalize }}{% endif %} {{ _("inline chronology", variant='0') }}">
                                            <i class="fa fa-align-justify fa-fw"></i>
                                        </a>
                                    </div>
                                </div>
                            {% endif %}
                        </div>
                        {% with %}
                            {% set dummy =  %}
                            {% with %}
                                {% set cas1 = "self" %}
                                {% with %}
                                    {% set cas2 = "parent" %}
                                    {% with %}
                                        {% set cas3 = "child" %}
                                        {% with %}
                                            {% set cas4 = "sibling" %}
                                            {% with %}
                                                {% set my_death_date_year = (self.death_date.year) if (( self.death_date.year != "" )) else (("0000") if (is_dead) else ("9999")) %}
                                                {% with %}
                                                    {% set my_death_date_month = (("0") if (( self.death_date.month <= 9 ))self.death_date.month) if (( self.death_date.month != "" )) else ("00") %}
                                                    {% with %}
                                                        {% set my_death_date_day = (("0") if (( self.death_date.day <= 9 ))self.death_date.day) if (( self.death_date.day != "" )) else ("00") %}
                                                        {% with %}
                                                            {% set my_death_date = my_death_date_yearmy_death_date_monthmy_death_date_day %}
                                                            {% with %}
                                                                {% set central_person = self %}{{ reset_count2 }}{{ empty_sorted_list }}{{ reset_count2 }}{# foreach not implemented yet #}{# foreach not implemented yet #}{# foreach not implemented yet #}{# foreach not implemented yet #}{% if ( has_parents and ( evarevp == 1 ) ) %}{% if father.is_dead %}{{ add_in_sorted_list(dummy, father.death_date.year, month("father.death_date"), day("father.death_date"), dprec("father.death_date"), count2, (father.death_date) if (( father.death_date != "" )) else ("("_("missing date", variant='0')")"), a_of_b(_("death"), _("father/mother", variant='0'))short_display_person("father")(sp"("father.death_age")") if (father.computable_death_age), , , , father, cas2) }}{% endif %}{% if mother.is_dead %}{{ add_in_sorted_list(dummy, mother.death_date.year, month("mother.death_date"), day("mother.death_date"), dprec("mother.death_date"), count2, (mother.death_date) if (( mother.death_date != "" )) else ("("_("missing date", variant='0')")"), a_of_b(_("death"), _("father/mother", variant='1'))short_display_person("mother")(sp"("mother.death_age")") if (mother.computable_death_age), , , , mother, cas2) }}{% endif %}{% endif %}{% if ( has_siblings and ( evarevp == 1 ) ) %}{# foreach not implemented yet #}{% endif %}{% if has_families %}{# foreach not implemented yet #}
                                                            {% endif %}
                                                            <table class="table-sm {% if ( evar.simple == "on" ) %}table-hover{% endif %} w-100">
                                                                <tbody>
                                                                    {# foreach not implemented yet #}
                                                                </tbody>
                                                            </table>
                                                        {% endwith %}
                                                    {% endwith %}
                                                {% endwith %}
                                            {% endwith %}
                                        {% endwith %}
                                    {% endwith %}
                                {% endwith %}
                            {% endwith %}
                        {% endwith %}
                    {% endwith %}
                {% endwith %}
            {% endwith %}
        {% endwith %}
    {% endwith %}
{% endwith %}
{% endif %}

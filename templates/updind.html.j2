{# 
  Generated by JinjaGenerator for template 'updind'
    at 2025-10-26T20:24:52.333914

  Used macros:
  - nav()
  - card_header(xx, yy)
  - date(xlab, xvar, xdt, xcond)
  - small_date(kind, xvar, xx, verbose)
  - birth(xvar, xx, verbose)
  - death(xvar, xx, verbose)
  - w_birth(xcnt, wcnt, xx, verbose)
  - w_death(xcnt, wcnt, xx, verbose)
  - note(xx)
  - source(xx)
  - selector_pevent(xcnt)
  - insert_pevent(xcnt)
  - insert_witness(xcnt, wcnt, evt_name)
  - one_witness(xcnt, wcnt, evt_name)
  - one_pevent(xcnt)
  - one_specific_pevent(xcnt, evt_name)
  - one_empty_specific_pevent(xcnt, evt_name)
  - insert_relation(xx)
  - relation_type(xx)
  - one_relation(xcnt, xvar, xrel, xsex)
  - insert_title(xcnt)
  - one_title(xcnt)

  Used includes:
  - css
  - hed
  - toolbar
  - characters
  - trl
  - copyr
  - js
  - upd_js

  Used variables:
  - lang (x1)
  - e.m (x4)
  - mrg (x4)
  - mod (x3)
  - index (x6)
  - body_prop (x1)
  - message_to_wizard (x1)
  - include_menubar (x1)
  - xdt.day (x3)
  - xdt.month (x4)
  - xdt.year (x3)
  - xdt.prec (x7)
  - xdt.ormonth (x4)
  - xdt.calendar (x5)
  - xdt.orday (x3)
  - xdt.oryear (x3)
  - xdt.text (x1)
  - day_input (x9)
  - month_input (x9)
  - year_input (x9)
  - verbose (x10)
  - true (x10)
  - xx.create.kind_day (x3)
  - xx.create.kind_month (x3)
  - xx.create.kind_year (x3)
  - xx.create.kind_place (x1)
  - datalist_places (x4)
  - l_on1s (x9)
  - xx_note (x1)
  - xx_src (x1)
  - event.e_name (x53)
  - event.e_place (x2)
  - event.e_note (x2)
  - event.e_src (x6)
  - i (x3)
  - nl (x5)
  - witness.surname (x4)
  - witness.first_name (x4)
  - witness.create (x1)
  - witness.link (x1)
  - witness.occ (x3)
  - witness.index (x2)
  - witness.sex (x2)
  - witness.create.sex (x3)
  - witness.create.occupation (x1)
  - witness_kind (x9)
  - datalist_fnames (x4)
  - datalist_snames (x4)
  - prefix_base_password (x2)
  - wcnt (x1)
  - datalist_occupations (x2)
  - xcnt (x4)
  - has_witness (x2)
  - has_birth_date (x6)
  - dont_know_if_dead (x7)
  - not_dead (x4)
  - sp (x6)
  - death.year (x3)
  - death.text (x3)
  - dead_dont_know_when (x3)
  - died_young (x3)
  - of_course_dead (x3)
  - dr_killed (x3)
  - dr_murdered (x3)
  - dr_executed (x3)
  - dr_disappeared (x3)
  - dr_unspecified (x3)
  - datalist_sources (x2)
  - action (x1)
  - hidden (x1)
  - digest (x1)
  - evar_i2 (x2)
  - evar_ini1 (x2)
  - evar_ini2 (x2)
  - evar.iexcl (x3)
  - evar.fexcl (x3)
  - evar.ip (x1)
  - first_name (x3)
  - surname (x3)
  - occ (x3)
  - is_male (x2)
  - is_female (x2)
  - public_name (x1)
  - datalist_pub_names (x1)
  - image (x1)
  - acc_if_titles (x1)
  - acc_public (x1)
  - b.semi_public (x1)
  - b.propose_qualifier (x1)
  - b.propose_alias (x1)
  - acc_semi_public (x1)
  - acc_private (x1)
  - has_qualifiers (x1)
  - datalist_qualifiers (x1)
  - has_aliases (x1)
  - datalist_aliases (x1)
  - has_first_names_aliases (x1)
  - has_surnames_aliases (x1)
  - occupation (x3)
  - sources (x3)
  - birth_place (x1)
  - has_pevent_birth (x1)
  - next_pevent (x6)
  - incr_next_pevent (x6)
  - bapt_place (x1)
  - has_pevent_baptism (x1)
  - death_place (x1)
  - has_pevent_death (x1)
  - bt_unknown_burial (x1)
  - bt_buried (x1)
  - bt_cremated (x1)
  - burial_place (x1)
  - has_pevent_burial (x3)
  - has_pevent_cremation (x2)
  - has_secondary_pevents (x1)
  - relation.rt_empty (x1)
  - relation.rt_adoption (x1)
  - relation.rt_recognition (x1)
  - relation.rt_candidate_parent (x1)
  - relation.rt_godparent (x1)
  - relation.rt_foster_parent (x1)
  - relation.xrel.first_name (x3)
  - relation.xrel.occ (x3)
  - relation.xrel.link (x1)
  - relation.xrel.create (x1)
  - relation.xrel.surname (x3)
  - relation.xrel.index (x2)
  - relation.xrel.sex (x2)
  - relation.xrel.create.occupation (x1)
  - has_relations (x1)
  - title.t_ident (x1)
  - title.t_estate (x1)
  - title.t_name (x1)
  - title.t_nth (x1)
  - title.t_main (x1)
  - datalist_titles (x1)
  - datalist_estates (x1)
  - has_titles (x1)
  - notes (x1)
  - query_time (x1)
#}
<!DOCTYPE html>
<html lang="{{ lang }}" id="updform">
    <head>
        <!-- $Id: updind.txt v7.1 31/08/2023 15:28:42 $ -->
        <!-- Copyright (c) 1998-2007 INRIA -->
        {% with %}
            {% set mrg = ("1") if (( ( e.m == "MRG_IND_OK" ) or ( e.m == "MRG_MOD_IND_OK" ) )) %}
            {% with %}
                {% set mod = ("1") if (( ( e.m == "MOD_IND" ) or ( e.m == "MOD_IND_OK" ) )) %}<title>
                {% if ( mrg == 1 ) %}
                    {{ _("merge::person/persons", variant='1') |capitalize }}
                {% else %}
                    {% if ( mod == 1 ) %}
                        {{ _("modify::person/persons", variant='0') |capitalize }}
                    {% else %}
                        {{ _("add::person/persons", variant='0') |capitalize }}
                    {% endif %}
                {% endif %}
            # {{ index }}</title>
            <meta name="robots" content="none">
            <meta charset="UTF-8">
            <meta name="viewport"
                  content="width=device-width, initial-scale=1, shrink-to-fit=no">
            <link rel="shortcut icon"
                  href="{{ url_for('static', path='images/favicon_gwd.png') }}">
            {% include 'css.html.j2' %}
        </head>
        <body {{ body_prop }} id="person">
            {% include 'hed.html.j2' %}
            <div class="container pl-lg-0 pr-lg-3 px-xl-3">
                {{ message_to_wizard }}{{ include_menubar }}
                {% with %}
                    {% set datalist_aliases = "list="datalist_aliases" data-book="alias"" %}
                    {% with %}
                        {% set datalist_estates = "list="datalist_estates" data-book="domain"" %}
                        {% with %}
                            {% set datalist_fnames = "list="datalist_fnames" data-book="fn"" %}
                            {% with %}
                                {% set datalist_occupations = "list="datalist_occupations" data-book="occu"" %}
                                {% with %}
                                    {% set datalist_places = "list="datalist_places" data-book="place"" %}
                                    {% with %}
                                        {% set datalist_pub_names = "list="datalist_pub_names" data-book="pubn"" %}
                                        {% with %}
                                            {% set datalist_qualifiers = "list="datalist_qualifiers" data-book="qual"" %}
                                            {% with %}
                                                {% set datalist_snames = "list="datalist_snames" data-book="sn"" %}
                                                {% with %}
                                                    {% set datalist_titles = "list="datalist_titles" data-book="title"" %}
                                                    {% with %}
                                                        {% set datalist_sources = "list="datalist_sources" data-book="src"" %}
                                                        {% macro nav() %}
                                                            <div class="container fixed-top" role="navigation">
                                                                <nav class="navbar navbar-light justify-content-center mx-1" id="banner">
                                                                    <nav class="nav nav-pills nav-fill">
                                                                        <a class="nav-item nav-link px-1 py-1"
                                                                           href="#person"
                                                                           title="{{ _("person/persons", variant='0') |capitalize }}"><i class="fa fa-user fa-fw" aria-hidden="true"></i><span class="d-none d-lg-inline-flex ml-1">{{ _("person/persons", variant='0') |capitalize }}</span></a>
                                                                        <a class="nav-item nav-link px-1 py-1"
                                                                           href="#birth"
                                                                           title="{{ _("birth") |capitalize }}"><i class="fa fa-cake-candles fa-fw" aria-hidden="true"></i><span class="d-none d-md-inline-flex ml-1">{{ _("birth") |capitalize }}</span></a>
                                                                        <a class="nav-item nav-link px-1 py-1"
                                                                           href="#baptism"
                                                                           title="{{ _("baptism") |capitalize }}"><i class="fa fa-dove fa-fw" aria-hidden="true"></i><span class="d-none d-md-inline-flex ml-1">{{ _("baptism") |capitalize }}</span></a>
                                                                        <a class="nav-item nav-link px-1 py-1"
                                                                           href="#death"
                                                                           title="{{ _("death") |capitalize }}"><i class="fa fa-cross fa-fw" aria-hidden="true"></i><span class="d-none d-md-inline-flex ml-1">{{ _("death") |capitalize }}</span></a>
                                                                        <a class="nav-item nav-link px-1 py-1"
                                                                           href="#burial"
                                                                           title="{{ _("burial") |capitalize }}"><i class="fa fa-person-praying fa-fw" aria-hidden="true"></i><span class="d-none d-md-inline-flex ml-1">{{ _("burial") |capitalize }}</span></a>
                                                                        <a class="nav-item nav-link px-1 py-1"
                                                                           href="#events"
                                                                           title="{{ _("event/events", variant='1') |capitalize }}"><i class="fa fa-graduation-cap fa-fw" aria-hidden="true"></i><span class="d-none d-lg-inline-flex ml-1">{{ _("event/events", variant='1') |capitalize }}</span></a>
                                                                        <a class="nav-item nav-link px-1 py-1"
                                                                           href="#relations"
                                                                           title="{{ _("relation/relations", variant='1') |capitalize }}"><i class="fa fa-users fa-fw" aria-hidden="true"></i><span class="d-none d-lg-inline-flex ml-1">{{ _("relation/relations", variant='1') |capitalize }}</span></a>
                                                                        <a class="nav-item nav-link px-1 py-1"
                                                                           href="#titles"
                                                                           title="{{ _("title/titles", variant='1') |capitalize }}"><i class="fa fa-award fa-fw" aria-hidden="true"></i><span class="d-none d-lg-inline-flex ml-1">{{ _("title/titles", variant='1') |capitalize }}</span></a>
                                                                        <a class="nav-item nav-link px-1 py-1"
                                                                           href="#notes"
                                                                           title="{{ _("note/notes", variant='1') |capitalize }}"><i class="fa fa-file-lines fa-fw" aria-hidden="true"></i><span class="d-none d-lg-inline-flex ml-1">{{ _("note/notes", variant='1') |capitalize }}</span></a>
                                                                    </nav>
                                                                </nav>
                                                            </div>
                                                        {% endmacro %}
                                                        {% macro card_header(xx, yy) %}
                                                            <h3 class="card-header pt-2 pb-1 text-center" id="xx">{{ _("yy", variant='1') |capitalize }}</h3>
                                                        {% endmacro %}
                                                        {% macro date(xlab, xvar, xdt, xcond) %}
                                                            {% with %}
                                                                {% set day_input = "pattern="(?:0?"_("1-9")"|1"_("0-9")"|2"_("0-9")"|3"_("0-1")")" size="2" maxlength="2" xcond placeholder=" "" %}
                                                                {% with %}
                                                                    {% set month_input = "pattern="(?:0?"_("1-9")"|1"_("0-2")"|VD|BR|FM|NI|PL|VT|GE|FL|PR|ME|TH|FT|JC|vd|br|fm|ni|pl|vt|ge|fl|pr|me|th|ft|jc)" size="1" maxlength="2" xcond placeholder=" "" %}
                                                                    {% with %}
                                                                        {% set year_input = "pattern=""_("?><~/+\-")"?\d*/?" size="4" maxlength="8" xcond placeholder=" "" %}
                                                                        <div class="row justify-content-sm-between justify-content-md-start mt-2">
                                                                            <div class="col-sm-1 col-md-2 col-form-label">xlab</div>
                                                                            <div class="col col-sm-auto form-inline">
                                                                                {% if ( ( _("!dates order", variant='0') == "ddmmyy" ) or ( ( _("!dates order", variant='0') == "ddmmyyyy" ) or ( _("!dates order", variant='0') == "dmyyyy" ) ) ) %}
                                                                                    <label>
                                                                                        <input type="text" class="form-control" name="xvar_dd" value="{{ xdt.day }}" {{ day_input }}">
                                                                                        <span class="ml-sm-1 ml-md-2">{{ _("year/month/day", variant='2') }}</span>
                                                                                    </label>
                                                                                    <label>
                                                                                        <span id="xvar_mm_sel">
                                                                                            <input type="text"
                                                                                                   class="form-control ml-sm-2 ml-md-3"
                                                                                                   name="xvar_mm"
                                                                                                   value="{{ xdt.month }}"
                                                                                                   {{ month_input }}>
                                                                                        </span>
                                                                                        <span class="ml-sm-1 ml-md-2">{{ _("year/month/day", variant='1') }}</span>
                                                                                    </label>
                                                                                    <label>
                                                                                        <input type="text"
                                                                                               class="form-control ml-sm-2 ml-md-3"
                                                                                               name="xvar_yyyy"
                                                                                               value="{{ xdt.year }}"
                                                                                               {{ year_input }}>
                                                                                        <span class="ml-sm-1 ml-md-2">{{ _("year/month/day", variant='0') }}</span>
                                                                                    </label>
                                                                                {% else %}
                                                                                    {% if ( _("!dates order", variant='0') == "mmddyyyy" ) %}
                                                                                        <label>
                                                                                            <span id="xvar_mm_sel">
                                                                                                <input type="text"
                                                                                                       class="form-control"
                                                                                                       name="xvar_mm"
                                                                                                       value="{{ xdt.month }}"
                                                                                                       {{ month_input }}>
                                                                                            </span>
                                                                                            <span class="ml-sm-1 ml-md-2">{{ _("year/month/day", variant='1') }}</span>
                                                                                        </label>
                                                                                        <label>
                                                                                            <input type="text"
                                                                                                   class="form-control ml-sm-2 ml-md-3"
                                                                                                   name="xvar_dd"
                                                                                                   value="{{ xdt.day }}"
                                                                                                   {{ day_input }}>
                                                                                            <span class="ml-sm-1 ml-md-2">{{ _("year/month/day", variant='2') }}</span>
                                                                                        </label>
                                                                                        <label>
                                                                                            <input type="text"
                                                                                                   class="form-control ml-sm-2 ml-md-3"
                                                                                                   name="xvar_yyyy"
                                                                                                   value="{{ xdt.year }}"
                                                                                                   {{ year_input }}>
                                                                                            <span class="ml-sm-1 ml-md-2">{{ _("year/month/day", variant='0') }}</span>
                                                                                        </label>
                                                                                    {% else %}
                                                                                        <label>
                                                                                            <input type="text"
                                                                                                   class="form-control"
                                                                                                   name="xvar_yyyy"
                                                                                                   value="{{ xdt.year }}"
                                                                                                   {{ year_input }}>
                                                                                            <span class="ml-sm-1 ml-md-2">{{ _("year/month/day", variant='0') }}</span>
                                                                                        </label>
                                                                                        <label>
                                                                                            <span id="xvar_mm_sel">
                                                                                                <input type="text"
                                                                                                       class="form-control ml-sm-2 ml-md-3"
                                                                                                       name="xvar_mm"
                                                                                                       value="{{ xdt.month }}"
                                                                                                       {{ month_input }}>
                                                                                            </span>
                                                                                            <span class="ml-sm-1 ml-md-2">{{ _("year/month/day", variant='1') }}</span>
                                                                                        </label>
                                                                                        <label>
                                                                                            <input type="text"
                                                                                                   class="form-control ml-sm-2 ml-md-3"
                                                                                                   name="xvar_dd"
                                                                                                   value="{{ xdt.day }}"
                                                                                                   {{ day_input }}>
                                                                                            <span class="ml-sm-1 ml-md-2">{{ _("year/month/day", variant='2') }}</span>
                                                                                        </label>
                                                                                    {% endif %}
                                                                                {% endif %}
                                                                            </div>
                                                                            <div class="col-10 col-lg ml-auto form-inline">
                                                                                <label for="xvar_prec" class="sr-only col-form-label">{{ _("precision", variant='0') }}</label>
                                                                                <select class="form-control pl-lg-1 pr-lg-0 px-xl-2"
                                                                                        name="xvar_prec"
                                                                                        id="xvar_prec"
                                                                                        xcond>
                                                                                    <option value="sure"{% if ( xdt.prec == "sure" ) %} selected{% endif %}>{{ _("exact", variant='0') }}</option>
                                                                                    <option value="about"{% if ( xdt.prec == "about" ) %} selected{% endif %}>{{ _("about (date)", variant='0') }}</option>
                                                                                    <option value="maybe"{% if ( xdt.prec == "maybe" ) %} selected{% endif %}>
                                                                                        {{ _("possibly (date)", variant='0') }}
                                                                                    </option>
                                                                                    <option value="before"{% if ( xdt.prec == "before" ) %} selected{% endif %}>
                                                                                        {{ _("before (date)", variant='0') }}
                                                                                    </option>
                                                                                    <option value="after"{% if ( xdt.prec == "after" ) %} selected{% endif %}>{{ _("after (date)", variant='0') }}</option>
                                                                                    <option value="oryear"{% if ( xdt.prec == "oryear" ) %} selected{% endif %}>…{{ _("or") }}…</option>
                                                                                    <option value="yearint"{% if ( xdt.prec == "yearint" ) %} selected{% endif %}>…{{ _("between (date)") }}…</option>
                                                                                </select>
                                                                                <label for="xvar_cal" class="sr-only col-form-label">{{ _("calendar/calendars", variant='0') }}</label>
                                                                                <select class="form-control pl-lg-1 pr-lg-0 px-xl-2 ml-sm-1 ml-md-3"
                                                                                        name="xvar_cal"
                                                                                        id="xvar_cal"
                                                                                        onchange="changeCalendar('xvar_mm_sel','xvar_mm','{{ xdt.month }}',this),changeCalendar('xvar_ormonth_sel','xvar_ormonth','{{ xdt.ormonth }}',this)"
                                                                                        xcond>
                                                                                    <option value=""{% if ( xdt.calendar == "" ) %} selected{% endif %}>-</option>
                                                                                    <option value="G"{% if ( xdt.calendar == "gregorian" ) %} selected{% endif %}>
                                                                                        {{ _("gregorian/julian/french/hebrew", variant='0') |capitalize }}
                                                                                    </option>
                                                                                    <option value="J"{% if ( xdt.calendar == "julian" ) %} selected{% endif %}>
                                                                                        {{ _("gregorian/julian/french/hebrew", variant='1') |capitalize }}
                                                                                    </option>
                                                                                    <option value="F"{% if ( xdt.calendar == "french" ) %} selected{% endif %}>
                                                                                        {{ _("gregorian/julian/french/hebrew", variant='2') |capitalize }}
                                                                                    </option>
                                                                                    <option value="H"{% if ( xdt.calendar == "hebrew" ) %} selected{% endif %}>
                                                                                        {{ _("gregorian/julian/french/hebrew", variant='3') |capitalize }}
                                                                                    </option>
                                                                                </select>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row justify-content-sm-end justify-content-md-start">
                                                                            <div class="col-sm-1 col-md-2"></div>
                                                                            <div class="col col-sm-auto form-inline">
                                                                                {% if ( ( _("!dates order", variant='0') == "ddmmyy" ) or ( ( _("!dates order", variant='0') == "ddmmyyyy" ) or ( _("!dates order", variant='0') == "dmyyyy" ) ) ) %}
                                                                                    <label>
                                                                                        <input type="text"
                                                                                               class="form-control"
                                                                                               name="xvar_orday"
                                                                                               value="{{ xdt.orday }}"
                                                                                               {{ day_input }}>
                                                                                        <span class="ml-sm-1 ml-md-2">{{ _("year/month/day", variant='2') }}</span>
                                                                                    </label>
                                                                                    <label>
                                                                                        <span id="xvar_ormonth_sel">
                                                                                            <input type="text"
                                                                                                   class="form-control ml-sm-1 ml-md-3"
                                                                                                   name="xvar_ormonth"
                                                                                                   value="{{ xdt.ormonth }}"
                                                                                                   {{ month_input }}>
                                                                                        </span>
                                                                                        <span class="ml-sm-1 ml-md-2">{{ _("year/month/day", variant='1') }}</span>
                                                                                    </label>
                                                                                    <label>
                                                                                        <input type="text"
                                                                                               class="form-control ml-sm-1 ml-md-3"
                                                                                               name="xvar_oryear"
                                                                                               value="{{ xdt.oryear }}"
                                                                                               {{ year_input }}>
                                                                                        <span class="ml-sm-1 ml-md-2">{{ _("year/month/day", variant='0') }}</span>
                                                                                    </label>
                                                                                {% else %}
                                                                                    {% if ( _("!dates order", variant='0') == "mmddyyyy" ) %}
                                                                                        <label>
                                                                                            <span id="xvar_ormonth_sel">
                                                                                                <input type="text"
                                                                                                       class="form-control"
                                                                                                       name="xvar_ormonth"
                                                                                                       value="{{ xdt.ormonth }}"
                                                                                                       {{ month_input }}>
                                                                                            </span>
                                                                                            <span class="ml-sm-1 ml-md-2">{{ _("year/month/day", variant='1') }}</span>
                                                                                        </label>
                                                                                        <label>
                                                                                            <input type="text"
                                                                                                   class="form-control ml-sm-1 ml-md-3"
                                                                                                   name="xvar_orday"
                                                                                                   value="{{ xdt.orday }}"
                                                                                                   {{ day_input }}>
                                                                                            <span class="ml-sm-1 ml-md-2">{{ _("year/month/day", variant='2') }}</span>
                                                                                        </label>
                                                                                        <label>
                                                                                            <input type="text"
                                                                                                   class="form-control ml-sm-1 ml-md-3"
                                                                                                   name="xvar_oryear"
                                                                                                   value="{{ xdt.oryear }}"
                                                                                                   {{ year_input }}>
                                                                                            <span class="ml-sm-1 ml-md-2">{{ _("year/month/day", variant='0') }}</span>
                                                                                        </label>
                                                                                    {% else %}
                                                                                        <label>
                                                                                            <input type="text"
                                                                                                   class="form-control"
                                                                                                   name="xvar_oryear"
                                                                                                   value="{{ xdt.oryear }}"
                                                                                                   {{ year_input }}>
                                                                                            <span class="ml-sm-1 ml-md-2">{{ _("year/month/day", variant='0') }}</span>
                                                                                        </label>
                                                                                        <label>
                                                                                            <span id="xvar_ormonth_sel">
                                                                                                <input type="text"
                                                                                                       class="form-control ml-sm-1 ml-md-3"
                                                                                                       name="xvar_ormonth"
                                                                                                       value="{{ xdt.ormonth }}"
                                                                                                       {{ month_input }}>
                                                                                            </span>
                                                                                            <span class="ml-sm-1 ml-md-2">{{ _("year/month/day", variant='1') }}</span>
                                                                                        </label>
                                                                                        <label>
                                                                                            <input type="text"
                                                                                                   class="form-control ml-sm-1 ml-md-3"
                                                                                                   name="xvar_orday"
                                                                                                   value="{{ xdt.orday }}"
                                                                                                   {{ day_input }}>
                                                                                            <span class="ml-sm-1 ml-md-2">{{ _("year/month/day", variant='2') }}</span>
                                                                                        </label>
                                                                                    {% endif %}
                                                                                {% endif %}
                                                                            </div>
                                                                            <div class="col-10 col-lg">
                                                                                <label for="xvar_text" class="col-form-label sr-only"></label>
                                                                                <input type="text"
                                                                                       class="form-control"
                                                                                       name="xvar_text"
                                                                                       maxlength="100"
                                                                                       value="{{ xdt.text }}"
                                                                                       id="xvar_text"
                                                                                       placeholder="…{{ _("or") }} {{ _("text", variant='0') }}"
                                                                                       xcond>
                                                                            </div>
                                                                        </div>
                                                                    {% endwith %}
                                                                {% endwith %}
                                                            {% endwith %}
                                                        {% endmacro %}
                                                        {% macro small_date(kind, xvar, xx, verbose) %}
                                                            {% with %}
                                                                {% set day_input = "pattern="(?:0?"_("1-9")"|1"_("0-9")"|2"_("0-9")"|3"_("0-1")")" size="2" maxlength="2"" %}
                                                                {% with %}
                                                                    {% set month_input = "pattern="(?:0?"_("1-9")"|1"_("0-2")"|VD|BR|FM|NI|PL|VT|GE|FL|PR|ME|TH|FT|JC|vd|br|fm|ni|pl|vt|ge|fl|pr|me|th|ft|jc)" size="1" maxlength="2"" %}
                                                                    {% with %}
                                                                        {% set year_input = "pattern=""_("?><~/+\-")"?\d*/?" size="4" maxlength="8"" %}
                                                                        <div class="row">
                                                                            <span class="col-sm-2 col-form-label">{{ _("kind") |capitalize }}</span>
                                                                            <div class="col-sm-auto form-inline">
                                                                                {% if ( ( _("!dates order", variant='0') == "ddmmyy" ) or ( ( _("!dates order", variant='0') == "ddmmyyyy" ) or ( _("!dates order", variant='0') == "dmyyyy" ) ) ) %}
                                                                                    <label for="xvar_dd"
                                                                                           class="col-form-label {% if ( verbose == true ) %}sr-only{% endif %}">
                                                                                        {{ _("year/month/day", variant='2') }}
                                                                                    </label>
                                                                                    <input type="text"
                                                                                           class="form-control mr-auto"
                                                                                           name="xvar_dd"
                                                                                           id="xvar_dd"
                                                                                           value="{{ xx.create.kind_day }}"
                                                                                           placeholder="{{ _("dd/mm/yyyy", variant='0') }}"
                                                                                           {{ day_input }}>
                                                                                    <label for="xvar_mm"
                                                                                           class="col-form-label {% if ( verbose == true ) %}sr-only{% endif %}">
                                                                                        {{ _("year/month/day", variant='1') }}
                                                                                    </label>
                                                                                    <input type="text"
                                                                                           class="form-control mr-auto"
                                                                                           name="xvar_mm"
                                                                                           id="xvar_mm"
                                                                                           value="{{ xx.create.kind_month }}"
                                                                                           placeholder="{{ _("dd/mm/yyyy", variant='1') }}"
                                                                                           {{ month_input }}>
                                                                                    <label for="xvar=yyyy"
                                                                                           class="col-form-label {% if ( verbose == true ) %}sr-only{% endif %}">
                                                                                        {{ _("year/month/day", variant='0') }}
                                                                                    </label>
                                                                                    <input type="text"
                                                                                           class="form-control mr-auto"
                                                                                           name="xvar_yyyy"
                                                                                           id="xvar_yyyy"
                                                                                           value="{{ xx.create.kind_year }}"
                                                                                           placeholder="{{ _("dd/mm/yyyy", variant='2') }}"
                                                                                           {{ year_input }}>
                                                                                {% else %}
                                                                                    {% if ( _("!dates order", variant='0') == "mmddyyyy" ) %}
                                                                                        <label for="xvar_mm"
                                                                                               class="col-form-label {% if ( verbose == true ) %}sr-only{% endif %}">
                                                                                            {{ _("year/month/day", variant='1') }}
                                                                                        </label>
                                                                                        <input type="text"
                                                                                               class="form-control mr-auto"
                                                                                               name="xvar_mm"
                                                                                               id="xvar_mm"
                                                                                               value="{{ xx.create.kind_month }}"
                                                                                               placeholder="{{ _("dd/mm/yyyy", variant='1') }}"
                                                                                               {{ month_input }}>
                                                                                        <label for="xvar_dd"
                                                                                               class="col-form-label {% if ( verbose == true ) %}sr-only{% endif %}">
                                                                                            {{ _("year/month/day", variant='2') }}
                                                                                        </label>
                                                                                        <input type="text"
                                                                                               class="form-control mr-auto"
                                                                                               name="xvar_dd"
                                                                                               id="xvar_dd"
                                                                                               value="{{ xx.create.kind_day }}"
                                                                                               placeholder="{{ _("dd/mm/yyyy", variant='0') }}"
                                                                                               {{ day_input }}>
                                                                                        <label for="xvar=yyyy"
                                                                                               class="col-form-label {% if ( verbose == true ) %}sr-only{% endif %}">
                                                                                            {{ _("year/month/day", variant='0') }}
                                                                                        </label>
                                                                                        <input type="text"
                                                                                               class="form-control mr-auto"
                                                                                               name="xvar_yyyy"
                                                                                               id="xvar_yyyy"
                                                                                               value="{{ xx.create.kind_year }}"
                                                                                               placeholder="{{ _("dd/mm/yyyy", variant='2') }}"
                                                                                               {{ year_input }}>
                                                                                    {% else %}
                                                                                        <label for="xvar=yyyy"
                                                                                               class="col-form-label {% if ( verbose == true ) %}sr-only{% endif %}">
                                                                                            {{ _("year/month/day", variant='0') }}
                                                                                        </label>
                                                                                        <input type="text"
                                                                                               class="form-control mr-auto"
                                                                                               name="xvar_yyyy"
                                                                                               id="xvar_yyyy"
                                                                                               value="{{ xx.create.kind_year }}"
                                                                                               placeholder="{{ _("dd/mm/yyyy", variant='2') }}"
                                                                                               {{ year_input }}>
                                                                                        <label for="xvar_mm"
                                                                                               class="col-form-label {% if ( verbose == true ) %}sr-only{% endif %}">
                                                                                            {{ _("year/month/day", variant='1') }}
                                                                                        </label>
                                                                                        <input type="text"
                                                                                               class="form-control mr-auto"
                                                                                               name="xvar_mm"
                                                                                               id="xvar_mm"
                                                                                               value="{{ xx.create.kind_month }}"
                                                                                               placeholder="{{ _("dd/mm/yyyy", variant='1') }}"
                                                                                               {{ month_input }}>
                                                                                        <label for="xvar_dd"
                                                                                               class="col-form-label {% if ( verbose == true ) %}sr-only{% endif %}">
                                                                                            {{ _("year/month/day", variant='2') }}
                                                                                        </label>
                                                                                        <input type="text"
                                                                                               class="form-control mr-auto"
                                                                                               name="xvar_dd"
                                                                                               id="xvar_dd"
                                                                                               value="{{ xx.create.kind_day }}"
                                                                                               placeholder="{{ _("dd/mm/yyyy", variant='0') }}"
                                                                                               {{ day_input }}>
                                                                                    {% endif %}
                                                                                {% endif %}
                                                                            </div>
                                                                            <label for="xvar_pl"
                                                                                   class="{% if ( verbose == true ) %}sr-only{% endif %} col-sm-1 col-form-label">
                                                                                {{ _("place/places", variant='0') }}
                                                                            </label>
                                                                            <div class="col-sm">
                                                                                <input type="text"
                                                                                       class="form-control"
                                                                                       name="xvar_pl"
                                                                                       value="{{ xx.create.kind_place }}"
                                                                                       id="xvar_pl"
                                                                                       placeholder="{{ _("place/places", variant='0') |capitalize }}"
                                                                                       {{ datalist_places }}>
                                                                            </div>
                                                                        </div>
                                                                    {% endwith %}
                                                                {% endwith %}
                                                            {% endwith %}
                                                        {% endmacro %}
                                                        {% macro birth(xvar, xx, verbose) %}
                                                            {{ small_date('birth', 'xvarb', 'xx', 'verbose') }}
                                                        {% endmacro %}
                                                        {% macro death(xvar, xx, verbose) %}
                                                            {{ small_date('death', 'xvard', 'xx', 'verbose') }}
                                                        {% endmacro %}
                                                        {% macro w_birth(xcnt, wcnt, xx, verbose) %}
                                                            {{ small_date('birth', 'excnt_witnwcnt_b', 'witness', 'verbose') }}
                                                        {% endmacro %}
                                                        {% macro w_death(xcnt, wcnt, xx, verbose) %}
                                                            {{ small_date('death', 'excnt_witnwcnt_d', 'witness', 'verbose') }}
                                                        {% endmacro %}
                                                        {% macro note(xx) %}
                                                            <div class="row">
                                                                <label for="xx_note" class="col-2 col-form-label">{{ _("note/notes", variant='1') |capitalize }}</label>
                                                                <div class="col-10">
                                                                    <textarea class="form-control"
                                                                              name="xx_note"
                                                                              id="xx_note"
                                                                              rows="1"
                                                                              {{ l_on1s }}>{{ xx_note }}</textarea>
                                                                </div>
                                                            </div>
                                                        {% endmacro %}
                                                        {% macro source(xx) %}
                                                            <div class="row">
                                                                <label for="xx_src" class="col-2 col-form-label">{{ _("source/sources", variant='0') |capitalize }}</label>
                                                                <div class="col-10">
                                                                    <textarea class="form-control"
                                                                              name="xx_src"
                                                                              id="xx_src"
                                                                              rows="1"
                                                                              placeholder="{{ _("source/sources", variant='0')|capitalize }}"
                                                                              {{ l_on1s }}>{{ xx_src }}</textarea>
                                                                </div>
                                                            </div>
                                                        {% endmacro %}
                                                        {% macro selector_pevent(xcnt) %}
                                                            <select class="form-control font-weight-bold"
                                                                    id="pevent_selectxcnt"
                                                                    onchange="show_pevent_label($('#e_namexcnt').prop('defaultValue'), 'xcnt')">
                                                                <option value="">{{ _("custom event") |capitalize }}</option>
                                                                <option disabled>──────────</option>
                                                                <option value="">-</option>
                                                                <option value="#acco"{% if ( event.e_name == "#acco" ) %} selected{% endif %}>
                                                                    {{ _("accomplishment") |capitalize }}
                                                                </option>
                                                                <option value="#acqu"{% if ( event.e_name == "#acqu" ) %} selected{% endif %}>
                                                                    {{ _("acquisition") |capitalize }}
                                                                </option>
                                                                <option value="#adhe"{% if ( event.e_name == "#adhe" ) %} selected{% endif %}>{{ _("adhesion") |capitalize }}</option>
                                                                <option value="#barm"{% if ( event.e_name == "#barm" ) %} selected{% endif %}>
                                                                    {{ _("bar mitzvah") |capitalize }}
                                                                </option>
                                                                <option value="#basm"{% if ( event.e_name == "#basm" ) %} selected{% endif %}>
                                                                    {{ _("bat mitzvah") |capitalize }}
                                                                </option>
                                                                <option value="#bles"{% if ( event.e_name == "#bles" ) %} selected{% endif %}>
                                                                    {{ _("benediction") |capitalize }}
                                                                </option>
                                                                <option value="#chgn"{% if ( event.e_name == "#chgn" ) %} selected{% endif %}>
                                                                    {{ _("change name") |capitalize }}
                                                                </option>
                                                                <option value="#circ"{% if ( event.e_name == "#circ" ) %} selected{% endif %}>
                                                                    {{ _("circumcision") |capitalize }}
                                                                </option>
                                                                <option value="#conf"{% if ( event.e_name == "#conf" ) %} selected{% endif %}>
                                                                    {{ _("confirmation") |capitalize }}
                                                                </option>
                                                                <option value="#awar"{% if ( event.e_name == "#awar" ) %} selected{% endif %}>
                                                                    {{ _("decoration") |capitalize }}
                                                                </option>
                                                                <option value="#demm"{% if ( event.e_name == "#demm" ) %} selected{% endif %}>
                                                                    {{ _("demobilisationMilitaire") |capitalize }}
                                                                </option>
                                                                <option value="#degr"{% if ( event.e_name == "#degr" ) %} selected{% endif %}>{{ _("diploma") |capitalize }}</option>
                                                                <option value="#dist"{% if ( event.e_name == "#dist" ) %} selected{% endif %}>
                                                                    {{ _("distinction") |capitalize }}
                                                                </option>
                                                                <option value="#endl"{% if ( event.e_name == "#endl" ) %} selected{% endif %}>{{ _("dotation") |capitalize }}</option>
                                                                <option value="#educ"{% if ( event.e_name == "#educ" ) %} selected{% endif %}>{{ _("education") |capitalize }}</option>
                                                                <option value="#elec"{% if ( event.e_name == "#elec" ) %} selected{% endif %}>{{ _("election") |capitalize }}</option>
                                                                <option value="#emig"{% if ( event.e_name == "#emig" ) %} selected{% endif %}>
                                                                    {{ _("emigration") |capitalize }}
                                                                </option>
                                                                <option value="#exco"{% if ( event.e_name == "#exco" ) %} selected{% endif %}>
                                                                    {{ _("excommunication") |capitalize }}
                                                                </option>
                                                                <option value="#fcom"{% if ( event.e_name == "#fcom" ) %} selected{% endif %}>
                                                                    {{ _("firstCommunion") |capitalize }}
                                                                </option>
                                                                <option value="#fune"{% if ( event.e_name == "#fune" ) %} selected{% endif %}>{{ _("funeral") |capitalize }}</option>
                                                                <option value="#grad"{% if ( event.e_name == "#grad" ) %} selected{% endif %}>{{ _("graduate") |capitalize }}</option>
                                                                <option value="#hosp"{% if ( event.e_name == "#hosp" ) %} selected{% endif %}>
                                                                    {{ _("hospitalisation") |capitalize }}
                                                                </option>
                                                                <option value="#illn"{% if ( event.e_name == "#illn" ) %} selected{% endif %}>{{ _("illness") |capitalize }}</option>
                                                                <option value="#immi"{% if ( event.e_name == "#immi" ) %} selected{% endif %}>
                                                                    {{ _("immigration") |capitalize }}
                                                                </option>
                                                                <option value="#lpas"{% if ( event.e_name == "#lpas" ) %} selected{% endif %}>
                                                                    {{ _("listePassenger") |capitalize }}
                                                                </option>
                                                                <option value="#mdis"{% if ( event.e_name == "#mdis" ) %} selected{% endif %}>
                                                                    {{ _("militaryDistinction") |capitalize }}
                                                                </option>
                                                                <option value="#mpro"{% if ( event.e_name == "#mpro" ) %} selected{% endif %}>
                                                                    {{ _("militaryPromotion") |capitalize }}
                                                                </option>
                                                                <option value="#mser"{% if ( event.e_name == "#mser" ) %} selected{% endif %}>
                                                                    {{ _("militaryService") |capitalize }}
                                                                </option>
                                                                <option value="#mobm"{% if ( event.e_name == "#mobm" ) %} selected{% endif %}>
                                                                    {{ _("mobilisationMilitaire") |capitalize }}
                                                                </option>
                                                                <option value="#natu"{% if ( event.e_name == "#natu" ) %} selected{% endif %}>
                                                                    {{ _("naturalisation") |capitalize }}
                                                                </option>
                                                                <option value="#occu"{% if ( event.e_name == "#occu" ) %} selected{% endif %}>
                                                                    {{ _("occupation/occupations", variant='0') |capitalize }}
                                                                </option>
                                                                <option value="#ordn"{% if ( event.e_name == "#ordn" ) %} selected{% endif %}>
                                                                    {{ _("ordination") |capitalize }}
                                                                </option>
                                                                <option value="#prop"{% if ( event.e_name == "#prop" ) %} selected{% endif %}>{{ _("property") |capitalize }}</option>
                                                                <option value="#cens"{% if ( event.e_name == "#cens" ) %} selected{% endif %}>
                                                                    {{ _("recensement") |capitalize }}
                                                                </option>
                                                                <option value="#resi"{% if ( event.e_name == "#resi" ) %} selected{% endif %}>{{ _("residence") |capitalize }}</option>
                                                                <option value="#reti"{% if ( event.e_name == "#reti" ) %} selected{% endif %}>{{ _("retired") |capitalize }}</option>
                                                                <option value="#vteb"{% if ( event.e_name == "#vteb" ) %} selected{% endif %}>{{ _("venteBien") |capitalize }}</option>
                                                                <option value="#will"{% if ( event.e_name == "#will" ) %} selected{% endif %}>{{ _("will") |capitalize }}</option>
                                                                <option disabled>──────────</option>
                                                                <option value="#bapl"{% if ( event.e_name == "#bapl" ) %} selected{% endif %}>
                                                                    {{ _("baptismLDS") |capitalize }}
                                                                </option>
                                                                <option value="#conl"{% if ( event.e_name == "#conl" ) %} selected{% endif %}>
                                                                    {{ _("confirmation LDS") |capitalize }}
                                                                </option>
                                                                <option value="#dotl"{% if ( event.e_name == "#dotl" ) %} selected{% endif %}>
                                                                    {{ _("dotationLDS") |capitalize }}
                                                                </option>
                                                                <option value="#flkl"{% if ( event.e_name == "#flkl" ) %} selected{% endif %}>
                                                                    {{ _("familyLinkLDS") |capitalize }}
                                                                </option>
                                                                <option value="#slgc"{% if ( event.e_name == "#slgc" ) %} selected{% endif %}>
                                                                    {{ _("scellentChildLDS") |capitalize }}
                                                                </option>
                                                                <option value="#slgp"{% if ( event.e_name == "#slgp" ) %} selected{% endif %}>
                                                                    {{ _("scellentParentLDS") |capitalize }}
                                                                </option>
                                                                <option value="#slgs"{% if ( event.e_name == "#slgs" ) %} selected{% endif %}>
                                                                    {{ _("scellentSpouseLDS") |capitalize }}
                                                                </option>
                                                            </select>
                                                        {% endmacro %}
                                                        {% macro insert_pevent(xcnt) %}
                                                            <div class="row my-1">
                                                                <label for="ins_eventxcnt_n" class="col-2 col-form-label">{{ _("insert") |capitalize }}</label>
                                                                <div class="form-inline col-10 border-primary">
                                                                    <div class="input-group">
                                                                        <select class="form-control bg-light border-primary border-right-0"
                                                                                id="ins_eventxcnt_n"
                                                                                name="ins_eventxcnt_n">
                                                                            {% for i in 1..11 %}
                                                                                <option>{{ i }}</option>
                                                                                {{ nl }}
                                                                            {% endfor %}
                                                                        </select>
                                                                        <div class="input-group-append">
                                                                            <label class="btn btn-outline-primary border-left-0 mb-0">
                                                                                {{ _("event/events", variant='2') }}
                                                                                <input class="ml-1" type="checkbox" name="ins_eventxcnt" value="on">
                                                                            </label>
                                                                            <button type="submit"
                                                                                    class="btn btn-outline-primary"
                                                                                    title="{{ _("insert::event/events", variant='2') |capitalize }}">
                                                                                OK
                                                                            </button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        {% endmacro %}
                                                        {% macro insert_witness(xcnt, wcnt, evt_name) %}
                                                            <div class="row mt-3 mb-1">
                                                                <label for="excnt_ins_witnwcnt_n" class="col-form-label col-2">{{ _("insert") |capitalize }}</label>
                                                                <div class="form-inline col-10">
                                                                    <div class="input-group">
                                                                        <select class="form-control bg-light border-primary border-right-0"
                                                                                id="excnt_ins_witnwcnt_n"
                                                                                name="excnt_ins_witnwcnt_n">
                                                                            {% for i in 1..11 %}
                                                                                <option>{{ i }}</option>
                                                                                {{ nl }}
                                                                            {% endfor %}
                                                                        </select>
                                                                        <div class="input-group-append">
                                                                            <label class="btn btn-outline-primary border-left-0">
                                                                                {{ _("witness/witness/witnesses", variant='3') }}
                                                                                <input class="ml-1" type="checkbox" name="excnt_ins_witnwcnt" value="on">
                                                                            </label>
                                                                            <button type="submit"
                                                                                    class="btn btn-outline-primary"
                                                                                    title="{{ _("insert::witness/witness/witnesses", variant='0') |capitalize }}(s)">
                                                                                OK
                                                                            </button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        {% endmacro %}
                                                        {% macro one_witness(xcnt, wcnt, evt_name) %}
                                                            <hr>
                                                            <div class="form-group mt-1">
                                                                <div class="row">
                                                                    <h5 class="col-form-label col-2">{{ _("witness/witness/witnesses", variant='0') |capitalize }} wcnt</h5>
                                                                    <div class="col-2">
                                                                        <select class="form-control"
                                                                                name="excnt_witnwcnt_p"
                                                                                id="excnt_witnwcnt_p_selct">
                                                                            <option value="create"
                                                                                    {% if ( ( ( witness.surname == "" ) and ( witness.first_name == "" ) ) or witness.create ) %}selected{% endif %}>
                                                                                {{ _("create", variant='0') |capitalize }}
                                                                            </option>
                                                                            <option value="link"{% if witness.link %} selected{% endif %}>{{ _("link", variant='0') |capitalize }}</option>
                                                                        </select>
                                                                    </div>
                                                                    <div class="col-4">
                                                                        <select class="form-control" name="excnt_witnwcnt_kind">
                                                                            <option value=""{% if ( witness_kind == "" ) %} selected{% endif %}>
                                                                                {{ _("witness/witnesses", variant='0') |capitalize }}
                                                                            </option>
                                                                            <option value="godp"
                                                                                    {% if ( ( witness_kind == "godp" ) or ( ( "evt_name" == "#bapt" ) and ( witness_kind != "" ) ) ) %}selected{% endif %}
                                                                                    {% if ( "evt_name" != "#bapt" ) %}class="d-none"{% endif %}>
                                                                                {{ _("godfather/godmother/godparents", variant='2') |capitalize }}
                                                                            </option>
                                                                            <option value="info"{% if ( witness_kind == "info" ) %} selected{% endif %}>
                                                                                {{ _("informant/informant/informant", variant='2') |capitalize }}
                                                                            </option>
                                                                            <option value="atte"{% if ( witness_kind == "atte" ) %} selected{% endif %}>
                                                                                {{ _("present/present/present", variant='2') |capitalize }}
                                                                            </option>
                                                                            <option value="ment"{% if ( witness_kind == "ment" ) %} selected{% endif %}>
                                                                                {{ _("mentioned/mentioned/mentioned", variant='2') |capitalize }}
                                                                            </option>
                                                                            <option value="offi"{% if ( witness_kind == "offi" ) %} selected{% endif %}>
                                                                                {{ _("civil registrar/civil registrar/civil registrar", variant='2') |capitalize }}
                                                                            </option>
                                                                            <option value="reli"{% if ( witness_kind == "reli" ) %} selected{% endif %}>
                                                                                {{ _("parrish registrar/parrish registrar/parrish registrar", variant='2') |capitalize }}
                                                                            </option>
                                                                            <option value="othe"{% if ( witness_kind == "othe" ) %} selected{% endif %}>
                                                                                {{ _("other/other/other", variant='2') |capitalize }}
                                                                            </option>
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <label for="excnt_witnwcnt_fn" class="col-2 col-form-label">
                                                                        {{ _("first name/first names", variant='0') |capitalize }}
                                                                    </label>
                                                                    <div class="col-6">
                                                                        <input type="text"
                                                                               class="form-control"
                                                                               name="excnt_witnwcnt_fn"
                                                                               id="excnt_witnwcnt_fn"
                                                                               value="{{ witness.first_name }}"
                                                                               placeholder="{{ _("first name/first names", variant='0') |capitalize }}"
                                                                               {{ datalist_fnames }}>
                                                                    </div>
                                                                    <label for="excnt_witnwcnt_occ" class="col-2 col-form-label">{{ _("number", variant='0') |capitalize }}</label>
                                                                    <div class="col-2">
                                                                        <input type="number"
                                                                               class="form-control"
                                                                               name="excnt_witnwcnt_occ"
                                                                               id="excnt_witnwcnt_occ"
                                                                               min="0"
                                                                               value="{{ witness.occ }}"
                                                                               placeholder="#">
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <label for="excnt_witnwcnt_sn" class="col-2 col-form-label">
                                                                        {{ _("surname/surnames", variant='0') |capitalize }}
                                                                    </label>
                                                                    <div class="col-6">
                                                                        <input type="text"
                                                                               class="form-control"
                                                                               name="excnt_witnwcnt_sn"
                                                                               id="excnt_witnwcnt_sn"
                                                                               value="{{ witness.surname }}"
                                                                               placeholder="{{ _("surname/surnames", variant='0') |capitalize }}"
                                                                               {{ datalist_snames }}>
                                                                    </div>
                                                                    <div id="excnt_witnwcnt_p_selct_mod" class="col-form-label ml-2">
                                                                        {% if ( ( witness.index != "-1" ) and ( ( witness.first_name != "" ) or ( witness.surname != "" ) ) ) %}
                                                                            <a href="{{ prefix_base_password }}m=MOD_IND&i={{ witness.index }}"
                                                                               title="{{ _("modify::person/persons", variant='0') |capitalize }} {{ witness.first_name }}{% if ( witness.occ != "" ) %}.{{ witness.occ }}{% endif %} {{ witness.surname }}">
                                                                                <i class="fa fa-user-pen fa-fw {% if ( witness.sex == 1 ) %}fe{% endif %}male ml-2 mr-1"
                                                                                   aria-hidden="true"
                                                                                   aria-label="{{ nth_c(_("M/F", variant='0') _("M/F", variant='1')"N", witness.sex) }}"></i>
                                                                            {{ _("modify") |capitalize }} {{ nth(_("nth") , wcnt) }} {{ _("witness/witness/witnesses", variant='0') }}</a>
                                                                        {% endif %}
                                                                    </div>
                                                                    <div id="excnt_witnwcnt_p_selct_sex" class="col-form-label">
                                                                        <div class="form-inline">
                                                                            <div class="col-sm-auto">{{ _("sex") |capitalize }}</div>
                                                                            <div class="form-check form-check-inline ml-auto">
                                                                                <label class="form-check-label">
                                                                                    <input class="form-check-input"
                                                                                           type="radio"
                                                                                           name="excnt_witnwcnt_sex"
                                                                                           value="M"
                                                                                           {% if ( witness.create.sex == "male" ) %}checked{% endif %}>
                                                                                    {{ _("M/F", variant='0') }}
                                                                                </label>
                                                                            </div>
                                                                            <div class="form-check form-check-inline">
                                                                                <label class="form-check-label">
                                                                                    <input class="form-check-input"
                                                                                           type="radio"
                                                                                           name="excnt_witnwcnt_sex"
                                                                                           value="N"
                                                                                           {% if ( witness.create.sex == "neuter" ) %}checked{% endif %}>
                                                                                    ?
                                                                                </label>
                                                                            </div>
                                                                            <div class="form-check form-check-inline">
                                                                                <label class="form-check-label">
                                                                                    <input class="form-check-input"
                                                                                           type="radio"
                                                                                           name="excnt_witnwcnt_sex"
                                                                                           value="F"
                                                                                           {% if ( witness.create.sex == "female" ) %}checked{% endif %}>
                                                                                    {{ _("M/F", variant='1') }}
                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="row" id="excnt_witnwcnt_p_selct_data">
                                                                    <label for="excnt_witnwcnt_occu" class="col-sm-2 col-form-label">
                                                                        {{ _("occupation/occupations", variant='0') |capitalize }}
                                                                    </label>
                                                                    <div class="col-6">
                                                                        <input class="form-control"
                                                                               type="text"
                                                                               name="excnt_witnwcnt_occu"
                                                                               id="excnt_witnwcnt_occu"
                                                                               value="{{ witness.create.occupation }}"
                                                                               placeholder="{{ _("occupation/occupations", variant='0') |capitalize }}"
                                                                               {{ datalist_occupations }}>
                                                                    </div>
                                                                    <div class="form-inline col-sm-auto">
                                                                        <div class="custom-control  custom-checkbox mr-3">
                                                                            <input class="custom-control-input"
                                                                                   type="checkbox"
                                                                                   name="excnt_witnwcnt_od"
                                                                                   id="excnt_witnwcnt_od">
                                                                            <label for="excnt_witnwcnt_od" class="custom-control-label">{{ _("of course dead") |capitalize }}</label>
                                                                        </div>
                                                                        <div class="custom-control custom-checkbox">
                                                                            <input class="custom-control-input"
                                                                                   type="checkbox"
                                                                                   name="excnt_witnwcnt_pub"
                                                                                   id="excnt_witnwcnt_pub">
                                                                            <label for="excnt_witnwcnt_pub" class="custom-control-label">{{ _("public") |capitalize }}</label>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        {% endmacro %}
                                                        {% macro one_pevent(xcnt) %}
                                                            {% if ( ( event.e_name != "#birt" ) and ( ( event.e_name != "#bapt" ) and ( ( event.e_name != "#deat" ) and ( ( event.e_name != "#buri" ) and ( event.e_name != "#crem" ) ) ) ) ) %}
                                                                <div class="row">
                                                                    <h5 class="col-2 col-form-label">
                                                                        <label for="pevent_selectxcnt" class="mb-0">{{ _("event/events", variant='0') |capitalize }}</label>
                                                                    </h5>
                                                                    <div class="col-4">{{ selector_pevent(xcnt) }}</div>
                                                                    <div class="col">
                                                                        <label id="pevent_label_selectorxcnt"
                                                                               style="display:none"
                                                                               class="other_evts w-100">
                                                                            <input type="text"
                                                                                   class="form-control font-weight-bold"
                                                                                   name="e_namexcnt"
                                                                                   value="{{ event.e_name }}"
                                                                                   id="e_namexcnt"
                                                                                   placeholder="{{ _("event/events", variant='0') |capitalize }}">
                                                                        </label>
                                                                    </label>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <label for="e_placexcnt" class="col-2 col-form-label">{{ _("place/places", variant='0') |capitalize }}</label>
                                                                <div class="col-10">
                                                                    <input type="text"
                                                                           class="form-control"
                                                                           name="e_placexcnt"
                                                                           maxlength="200"
                                                                           value="{{ event.e_place }}"
                                                                           id="e_placexcnt"
                                                                           {% if ( "evt_name" == "#deat" ) %} onfocus='set_death_focus(xcnt)'{% else %}{% if ( "evt_name" == "buri_or_crem" ) %} onfocus='set_burial_focus(xcnt)'{% endif %}
                                                                           {% endif %}
                                                                           placeholder="{{ _("place/places", variant='0') |capitalize }}"
                                                                           {{ datalist_places }}>
                                                                    <a class="astuce"
                                                                       onmouseover="show_explain('updind','place',event)"
                                                                       onmouseout="hide_explain('updind',event)"></a>
                                                                </div>
                                                            </div>
                                                            {{ date(_("date/dates", variant='0') |capitalize, "e_datexcnt", "event_date", "") }}
                                                            <div class="row mt-2">
                                                                <label for="e_notexcnt" class="col-2 col-form-label">{{ _("note/notes", variant='1') |capitalize }}</label>
                                                                <div class="col-10">
                                                                    <textarea class="form-control"
                                                                              name="e_notexcnt"
                                                                              id="e_notexcnt"
                                                                              rows="1"
                                                                              placeholder="{{ _("note/notes", variant='1')|capitalize }}"
                                                                              {{ l_on1s }}>{{ event.e_note }}</textarea>
                                                                </div>
                                                            </div>
                                                            <div class="row mt-0">
                                                                <label for="e_srcxcnt" class="col-2 col-form-label">{{ _("source/sources", variant='0') |capitalize }}</label>
                                                                <div class="col-10">
                                                                    {% if ( event.e_src != "" ) %}
                                                                        <textarea class="form-control"
                                                                                  name="e_srcxcnt"
                                                                                  id="e_srcxcnt"
                                                                                  rows="1"
                                                                                  placeholder="{{ _("source/sources", variant='0')|capitalize }}"
                                                                                  {{ l_on1s }}>{{ event.e_src }}</textarea>
                                                                    {% else %}
                                                                        <input class="form-control"
                                                                               name="e_srcxcnt"
                                                                               id="e_srcxcnt"
                                                                               placeholder="{{ _("source/sources", variant='0') |capitalize }}"
                                                                               value="{{ event.e_src }}"
                                                                               datalist_sources>
                                                                    {% endif %}
                                                                </div>
                                                            </div>
                                                            {% if has_witness %}
                                                                {# foreach not implemented yet #}
                                                            {% else %}
                                                                {{ insert_witness(xcnt, "0", "") }}
                                                            {% endif %}
                                                            <hr>
                                                        {% endif %}
                                                    {% endmacro %}
                                                    {% macro one_specific_pevent(xcnt, evt_name) %}
                                                        {% if ( event.e_name == "evt_name" ) %}
                                                            {% if ( "evt_name" == "#deat" ) %}
                                                                <div class="row">
                                                                    <label for="death_selectxcnt" class="col-sm-2 col-form-label">Type</label>
                                                                    <div class="ml-3">
                                                                        <select class="form-control"
                                                                                name="death"
                                                                                id="death_selectxcnt"
                                                                                onchange="change_death('xcnt')">
                                                                            {% if ( ( not has_birth_date ) and dont_know_if_dead ) %}<option value="Auto" selected>-</option>{% endif %}
                                                                            <option value="NotDead" {% if not_dead %}selected{% endif %}>{{ _("alive", variant='2') |capitalize }}</option>
                                                                            <option value="DontKnowIfDead"
                                                                                    {% if ( dont_know_if_dead and has_birth_date ) %}{{ sp }}selected{% endif %}>{{ _("don't know", variant='0') |capitalize }}{{ nl }}
                                                                            </option>
                                                                            <option value="Death"
                                                                                    {% if ( ( death.year != "" ) or ( ( death.text != "" ) or dead_dont_know_when ) ) %}selected{% endif %}>
                                                                                {{ _("died", variant='2') |capitalize }}
                                                                            </option>
                                                                            <option value="DeadYoung" {% if died_young %}selected{% endif %}>
                                                                                {{ _("died young", variant='2') |capitalize }}
                                                                            </option>
                                                                            <option value="OfCourseDead" {% if of_course_dead %}selected{% endif %}>{{ _("of course dead") |capitalize }}</option>
                                                                        </select>
                                                                    </div>
                                                                    <div class="ml-4 mt-1">
                                                                        <div class="form-check form-check-inline">
                                                                            <input class="form-check-input"
                                                                                   type="radio"
                                                                                   name="death_reason"
                                                                                   value="Killed"
                                                                                   id="Killed"
                                                                                   {% if dr_killed %}checked{% endif %}
                                                                                   onclick='set_death_focus(xcnt)'>
                                                                            <label class="form-check-label" for="Killed">{{ _("killed (in action)", variant='2') |capitalize }}</label>
                                                                        </div>
                                                                        <div class="form-check form-check-inline">
                                                                            <input class="form-check-input"
                                                                                   type="radio"
                                                                                   name="death_reason"
                                                                                   value="Murdered"
                                                                                   id="Murdered"
                                                                                   {% if dr_murdered %}checked{% endif %}
                                                                                   onclick='set_death_focus(xcnt)'>
                                                                            <label class="form-check-label" for="Murdered">{{ _("murdered", variant='2') |capitalize }}</label>
                                                                        </div>
                                                                        <div class="form-check form-check-inline">
                                                                            <input class="form-check-input"
                                                                                   type="radio"
                                                                                   name="death_reason"
                                                                                   value="Executed"
                                                                                   id="Executed"
                                                                                   {% if dr_executed %}checked{% endif %}
                                                                                   onclick='set_death_focus(xcnt)'>
                                                                            <label class="form-check-label" for="Executed">{{ _("executed (legally killed)", variant='2') |capitalize }}</label>
                                                                        </div>
                                                                        <div class="form-check form-check-inline">
                                                                            <input class="form-check-input"
                                                                                   type="radio"
                                                                                   name="death_reason"
                                                                                   value="Disappeared"
                                                                                   id="Disappeared"
                                                                                   {% if dr_disappeared %}checked{% endif %}
                                                                                   onclick='set_death_focus(xcnt)'>
                                                                            <label class="form-check-label" for="Disappeared">{{ _("disappeared", variant='2') |capitalize }}</label>
                                                                        </div>
                                                                        <div class="form-check form-check-inline">
                                                                            <input class="form-check-input"
                                                                                   type="radio"
                                                                                   name="death_reason"
                                                                                   value="Unspecified"
                                                                                   id="Unspecified"
                                                                                   {% if dr_unspecified %}checked{% endif %}
                                                                                   onclick='set_death_focus(xcnt)'>
                                                                            <label class="form-check-label" for="Unspecified">{{ _("unspecified", variant='2') |capitalize }}</label>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            {% endif %}
                                                            {% if ( ( "evt_name" == "#buri" ) or ( "evt_name" == "#crem" ) ) %}
                                                                <div class="row">
                                                                    <label for="buri_selectxcnt" class="col-sm-2 col-form-label">Type</label>
                                                                    <div class="col-sm-10">
                                                                        <select class="form-control"
                                                                                id="buri_selectxcnt"
                                                                                onchange="change_buri('xcnt')">
                                                                            <option value="" {% if ( "evt_name" == "" ) %}selected{% endif %}>-</option>
                                                                            <option value="#buri" {% if ( "evt_name" == "#buri" ) %}selected{% endif %}>
                                                                                {{ _("buried", variant='2') |capitalize }}
                                                                            </option>
                                                                            <option value="#crem" {% if ( "evt_name" == "#crem" ) %}selected{% endif %}>
                                                                                {{ _("cremated", variant='2') |capitalize }}
                                                                            </option>
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            {% endif %}
                                                            <table style="border-width:1px;display:none;width:700px">
                                                                <tr>
                                                                    <td>
                                                                        <label for="e_namexcnt">{{ _("event/events", variant='0') |capitalize }}</label>
                                                                    </td>
                                                                    <td>
                                                                        <input type="text"
                                                                               name="e_namexcnt"
                                                                               size="30"
                                                                               value="{{ event.e_name }}"
                                                                               id="e_namexcnt">
                                                                    </td>
                                                                </tr>
                                                            </table>
                                                            <div class="row">
                                                                <label for="e_placexcnt" class="col-sm-2 col-form-label">{{ _("place/places", variant='0') |capitalize }}</label>
                                                                <div class="col-sm-10">
                                                                    <input type="text"
                                                                           class="form-control"
                                                                           name="e_placexcnt"
                                                                           maxlength="200"
                                                                           value="{{ event.e_place }}"
                                                                           {{ sp }}
                                                                           id="e_placexcnt"
                                                                           {% if ( "evt_name" == "#deat" ) %}onfocus='set_death_focus(xcnt)'{% endif %}
                                                                           placeholder="{{ _("place/places", variant='0') |capitalize }}"
                                                                           {{ datalist_places }}>
                                                                </div>
                                                            </div>
                                                            {{ date(_("date/dates", variant='0') |capitalize, "e_datexcnt", "event_date", ("onfocus='set_death_focus(xcnt)'") if (( "evt_name" == "#deat" ))) }}
                                                            <div class="row mt-2">
                                                                <label for="e_notexcnt" class="col-sm-2 col-form-label">{{ _("note/notes", variant='1') |capitalize }}</label>
                                                                <div class="col-sm-10">
                                                                    <textarea class="form-control"
                                                                              name="e_notexcnt"
                                                                              id="e_notexcnt"
                                                                              rows="1"
                                                                              placeholder="{{ _("note/notes", variant='1')|capitalize }}"
                                                                              {{ l_on1s }}>{{ event.e_note }}</textarea>
                                                                </div>
                                                            </div>
                                                            <div class="row mt-0">
                                                                <label for="e_srcxcnt" class="col-sm-2 col-form-label">{{ _("source/sources", variant='0') |capitalize }}</label>
                                                                <div class="col-sm-10">
                                                                    {% if ( event.e_src != "" ) %}
                                                                        <textarea class="form-control"
                                                                                  name="e_srcxcnt"
                                                                                  id="e_srcxcnt"
                                                                                  rows="1"
                                                                                  placeholder="{{ _("source/sources", variant='0')|capitalize }}"
                                                                                  {{ l_on1s }}>{{ event.e_src }}</textarea>
                                                                    {% else %}
                                                                        <input class="form-control"
                                                                               name="e_srcxcnt"
                                                                               id="e_srcxcnt"
                                                                               placeholder="{{ _("source/sources", variant='0') |capitalize }}"
                                                                               value="{{ event.e_src }}"
                                                                               {{ datalist_sources }}>
                                                                    {% endif %}
                                                                </div>
                                                            </div>
                                                            {% if has_witness %}
                                                                {# foreach not implemented yet #}
                                                            {% else %}
                                                                {{ insert_witness(xcnt, "0", "evt_name") }}
                                                            {% endif %}
                                                        {% endif %}
                                                    {% endmacro %}
                                                    {% macro one_empty_specific_pevent(xcnt, evt_name) %}
                                                        {% if ( "evt_name" == "#deat" ) %}
                                                            <div class="row">
                                                                <label for="death_selectxcnt" class="col-sm-2 col-form-label"></label>
                                                                <div class="col col-sm-auto">
                                                                    <select class="form-control pr-0"
                                                                            name="death"
                                                                            id="death_selectxcnt"
                                                                            onchange="change_death('xcnt')">
                                                                        {% if ( ( not has_birth_date ) and dont_know_if_dead ) %}<option value="Auto" selected>-</option>{% endif %}
                                                                        <option value="NotDead"{% if not_dead %} selected{% endif %}>{{ _("alive", variant='2') |capitalize }}</option>
                                                                        <option value="DontKnowIfDead"
                                                                                {% if ( dont_know_if_dead and has_birth_date ) %}selected{% endif %}>
                                                                            {{ _("don't know", variant='0') |capitalize }}{{ nl }}
                                                                        </option>
                                                                        <option value="Death"
                                                                                {% if ( ( death.year != "" ) or ( ( death.text != "" ) or dead_dont_know_when ) ) %}selected{% endif %}>
                                                                            {{ _("died", variant='2') |capitalize }}
                                                                        </option>
                                                                        <option value="DeadYoung"{% if died_young %} selected{% endif %}>
                                                                            {{ _("died young", variant='2') |capitalize }}
                                                                        </option>
                                                                        <option value="OfCourseDead"{% if of_course_dead %} selected{% endif %}>{{ _("of course dead") |capitalize }}</option>
                                                                    </select>
                                                                </div>
                                                                <div class="col mt-1">
                                                                    <div class="form-check form-check-inline">
                                                                        <input class="form-check-input"
                                                                               type="radio"
                                                                               name="death_reason"
                                                                               value="Killed"
                                                                               id="Killed"
                                                                               {% if dr_killed %}checked{% endif %}
                                                                               onclick='set_death_focus(xcnt)'>
                                                                        <label class="form-check-label" for="Killed">{{ _("killed (in action)", variant='2') |capitalize }}</label>
                                                                    </div>
                                                                    <div class="form-check form-check-inline">
                                                                        <input class="form-check-input"
                                                                               type="radio"
                                                                               name="death_reason"
                                                                               value="Murdered"
                                                                               id="Murdered"
                                                                               {% if dr_murdered %}checked{% endif %}
                                                                               onclick='set_death_focus(xcnt)'>
                                                                        <label class="form-check-label" for="Murdered">{{ _("murdered", variant='2') |capitalize }}</label>
                                                                    </div>
                                                                    <div class="form-check form-check-inline">
                                                                        <input class="form-check-input"
                                                                               type="radio"
                                                                               name="death_reason"
                                                                               value="Executed"
                                                                               id="Executed"
                                                                               {% if dr_executed %}checked{% endif %}
                                                                               onclick='set_death_focus(xcnt)'>
                                                                        <label class="form-check-label" for="Executed">{{ _("executed (legally killed)", variant='2') |capitalize }}</label>
                                                                    </div>
                                                                    <div class="form-check form-check-inline">
                                                                        <input class="form-check-input"
                                                                               type="radio"
                                                                               name="death_reason"
                                                                               value="Disappeared"
                                                                               id="Disappeared"
                                                                               {% if dr_disappeared %} checked{% endif %}
                                                                               onclick='set_death_focus(xcnt)'>
                                                                        <label class="form-check-label" for="Disappeared">{{ _("disappeared", variant='2') |capitalize }}</label>
                                                                    </div>
                                                                    <div class="form-check form-check-inline">
                                                                        <input class="form-check-input"
                                                                               type="radio"
                                                                               name="death_reason"
                                                                               value="Unspecified"
                                                                               id="Unspecified"
                                                                               {% if dr_unspecified %}checked{% endif %}
                                                                               onclick='set_death_focus(xcnt)'>
                                                                        <label class="form-check-label" for="Unspecified">{{ _("unspecified", variant='2') |capitalize }}</label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        {% endif %}
                                                        {% if ( ( "evt_name" == "#buri" ) or ( ( "evt_name" == "#crem" ) or ( "evt_name" == "buri_or_crem" ) ) ) %}
                                                            <div class="row">
                                                                <label for="buri_selectxcnt" class="col-sm-2 col-form-label"></label>
                                                                <div class="ml-3">
                                                                    <select class="form-control"
                                                                            id="buri_selectxcnt"
                                                                            onchange="change_buri('xcnt')">
                                                                        <option value=""{% if ( "evt_name" == "" ) %} selected {% endif %}>-</option>
                                                                        <option value="#buri"{% if ( "evt_name" == "#buri" ) %} selected {% endif %}>
                                                                            {{ _("buried", variant='2') |capitalize }}
                                                                        </option>
                                                                        <option value="#crem"{% if ( "evt_name" == "#crem" ) %} selected {% endif %}>
                                                                            {{ _("cremated", variant='2') |capitalize }}
                                                                        </option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                        {% endif %}
                                                        <table style="border-width:1px;display:none;width:700px">
                                                            <tr>
                                                                <td>
                                                                    <label for="e_namexcnt">{{ _("event/events", variant='0') |capitalize }}</label>
                                                                </td>
                                                                <td>
                                                                    <input type="text"
                                                                           name="e_namexcnt"
                                                                           size="30"
                                                                           id="e_namexcnt"
                                                                           value="{% if ( "evt_name" != "buri_or_crem" ) %}{% if ( ( "evt_name" != "#deat" ) or ( ( not not_dead ) and ( not dont_know_if_dead ) ) ) %}evt_name{% endif %}{% endif %}">
                                                                </td>
                                                            </tr>
                                                        </table>
                                                        <div class="row">
                                                            <label for="e_placexcnt" class="col-sm-2 col-form-label">{{ _("place/places", variant='0') |capitalize }}</label>
                                                            <div class="col-sm-10">
                                                                <input type="text"
                                                                       class="form-control"
                                                                       name="e_placexcnt"
                                                                       id="e_placexcnt"
                                                                       value=""
                                                                       placeholder="{{ _("place/places", variant='0') |capitalize }}"
                                                                       {{ datalist_places }}
                                                                       maxlength="200"
                                                                       {% if ( "evt_name" == "#deat" ) %} onfocus='set_death_focus(xcnt)'{% else %}{% if ( "evt_name" == "buri_or_crem" ) %} onfocus='set_buri(xcnt)'{% endif %}
                                                                       {% endif %}>
                                                            </div>
                                                        </div>
                                                        {% if ( "evt_name" == "#deat" ) %}
                                                            {{ date(_("date/dates", variant='0') |capitalize, "e_datexcnt", "event_date", "onfocus='set_death_focus(xcnt)'") }}
                                                        {% else %}
                                                            {% if ( "evt_name" == "buri_or_crem" ) %}
                                                                {{ date(_("date/dates", variant='0') |capitalize, "e_datexcnt", "event_date", "onfocus='set_buri(xcnt)'") }}
                                                            {% else %}
                                                                {{ date(_("date/dates", variant='0') |capitalize, "e_datexcnt", "event_date", "") }}
                                                            {% endif %}
                                                        {% endif %}
                                                        <div class="row mt-2">
                                                            <label for="e_notexcnt" class="col-sm-2 col-form-label">{{ _("note/notes", variant='1') |capitalize }}</label>
                                                            <div class="col-sm-10">
                                                                <textarea class="form-control"
                                                                          name="e_notexcnt"
                                                                          id="e_notexcnt"
                                                                          rows="1"
                                                                          placeholder="{{ _("note/notes", variant='1')|capitalize }}"
                                                                          {{ l_on1s }}
                                                                          {% if ( "evt_name" == "buri_or_crem" ) %}onfocus='set_buri(xcnt)'{% endif %}></textarea>
                                                            </div>
                                                        </div>
                                                        <div class="row mt-0">
                                                            <label for="e_srcxcnt" class="col-sm-2 col-form-label">{{ _("source/sources", variant='0') |capitalize }}</label>
                                                            <div class="col-sm-10">
                                                                <input type="text"
                                                                       class="form-control"
                                                                       name="e_srcxcnt"
                                                                       value=""
                                                                       id="e_srcxcnt"
                                                                       placeholder="{{ _("source/sources", variant='0') |capitalize }}"
                                                                       {% if ( "evt_name" == "buri_or_crem" ) %}onfocus='set_buri(xcnt)'{% endif %}>
                                                            </div>
                                                        </div>
                                                        {{ insert_witness(xcnt, "0", "evt_name") }}
                                                    {% endmacro %}
                                                    {% with %}
                                                        {% set l_on1s = "onkeydown="if (event.keyCode == 13) if (!event.shiftKey) javascript:document.upd.submit()"" %}
                                                        <form name="upd" method="post" action="{{ action }}">
                                                            <div class="row">{{ nav() }}</div>
                                                            <div class="row">
                                                                {{ hidden }}
                                                                <input type="hidden" name="digest" value="{{ digest }}">
                                                                <input type="hidden" name="i" value="{{ index }}">
                                                                {% if ( mrg == 1 ) %}
                                                                    {% if ( evar_i2 != "" ) %}<input type="hidden" name="i2" value="{{ evar_i2 }}">{% endif %}
                                                                    {% if ( ( evar_ini1 != "" ) and ( evar_ini2 != "" ) ) %}
                                                                        <input type="hidden" name="ini1" value="{{ evar_ini1 }}">
                                                                        <input type="hidden" name="ini2" value="{{ evar_ini2 }}">
                                                                    {% endif %}
                                                                    {% if ( ( evar.iexcl != "" ) or ( evar.fexcl != "" ) ) %}
                                                                        <input type="hidden" name="ip" value="{{ evar.ip }}">
                                                                        {% if ( evar.iexcl != "" ) %}<input type="hidden" name="iexcl" value="{{ evar.iexcl }}">{% endif %}
                                                                        {% if ( evar.fexcl != "" ) %}<input type="hidden" name="fexcl" value="{{ evar.fexcl }}">{% endif %}
                                                                    {% endif %}
                                                                    <input type="hidden" name="m" value="MRG_MOD_IND_OK">
                                                                {% else %}
                                                                    {% if ( mod == 1 ) %}
                                                                        <input type="hidden" name="m" value="MOD_IND_OK">
                                                                    {% else %}
                                                                        <input type="hidden" name="m" value="ADD_IND_OK">
                                                                    {% endif %}
                                                                {% endif %}
                                                            </div>
                                                            <div class="card">
                                                                <h2 class="card-header{% if ( mrg == 1 ) %} mt-5{% endif %}">
                                                                    {% if ( mrg == 1 ) %}
                                                                        {{ _("merge::person/persons", variant='1') |capitalize }}
                                                                    {% else %}
                                                                        {% if ( mod == 1 ) %}
                                                                            {{ _("modify::person/persons", variant='0') |capitalize }}
                                                                        {% else %}
                                                                            {{ _("add:person/persons", variant='0') |capitalize }}
                                                                        {% endif %}
                                                                    {% endif %}
                                                                    {{ _(":") }} {{ first_name }} {{ surname }}
                                                                    {% if ( occ != "0" ) %}({{ occ }}){% endif %}
                                                                </h2>
                                                                <div class="card-body">
                                                                    <h5 class="card-title">
                                                                        <b>{{ _("other action") |capitalize }}{{ _(":") }} </b>
                                                                        <a href="/m=CHG_EVT_IND_ORD&i={{ index }}"
                                                                           title="{{ _("changed order of person's events") |capitalize }}">{{ _("invert::event/events", variant='1') |capitalize }}</a>
                                                                        {% if ( ( first_name != "?" ) and ( surname != "?" ) ) %}
                                                                             |
                                                                            <a href="/m=SND_IMAGE&i={{ index }}">{{ _("modify::") |capitalize }}/{{ _("delete::") }}/{{ _("add picture") }}</a>
                                                                        {% endif %}
                                                                     | <a href="/m=MRG&i={{ index }}">{{ _("merge::") |capitalize }}</a> | <a href="/m=DEL_IND&i={{ index }}">{{ _("delete::") |capitalize }}</a>
                                                                </h5>
                                                                <div class="form-group mt-4">
                                                                    <div class="row">
                                                                        <label for="first_name" class="col-sm-2 col-form-label">
                                                                            {{ _("first name/first names", variant='0') |capitalize }}
                                                                        </label>
                                                                        <div class="col-sm-6">
                                                                            <input type="text"
                                                                                   class="form-control"
                                                                                   name="first_name"
                                                                                   maxlength="200"
                                                                                   value="{{ first_name }}"
                                                                                   id="first_name"
                                                                                   placeholder="{{ _("first name/first names", variant='0') |capitalize }}"
                                                                                   {{ datalist_fnames }}>
                                                                        </div>
                                                                        <label for="occ" class="col col-form-label">{{ _("number", variant='0') |capitalize }}</label>
                                                                        <div class="col-2">
                                                                            <input type="number"
                                                                                   class="form-control"
                                                                                   name="occ"
                                                                                   min="0"
                                                                                   value="{{ occ }}"
                                                                                   id="occ"
                                                                                   placeholder="{{ _("number") |capitalize }}">
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <label for="surname" class="col-sm-2 col-form-label">{{ _("surname/surnames", variant='0') |capitalize }}</label>
                                                                        <div class="col-sm-6">
                                                                            <input type="text"
                                                                                   class="form-control"
                                                                                   name="surname"
                                                                                   maxlength="200"
                                                                                   value="{{ surname }}"
                                                                                   id="surname"
                                                                                   placeholder="{{ _("surname/surnames", variant='0') |capitalize }}"
                                                                                   {{ datalist_snames }}>
                                                                        </div>
                                                                        <span class="col col-form-label">{{ _("sex") |capitalize }}</span>
                                                                        <div class="col mt-2">
                                                                            <div class="form-check form-check-inline">
                                                                                <input class="form-check-input"
                                                                                       type="radio"
                                                                                       name="sex"
                                                                                       value="M"
                                                                                       id="sexM"
                                                                                       {% if is_male %}checked{% endif %}
                                                                                       title="{{ _("male/female/neuter", variant='0') |capitalize }}">
                                                                                <label class="form-check-label" for="sexM">{{ _("M/F", variant='0') }}</label>
                                                                            </div>
                                                                            <div class="form-check form-check-inline">
                                                                                <input class="form-check-input"
                                                                                       type="radio"
                                                                                       name="sex"
                                                                                       value="N"
                                                                                       id="sexU"
                                                                                       {% if ( not ( is_male or is_female ) ) %}checked{% endif %}
                                                                                       title="{{ _("male/female/neuter", variant='2') |capitalize }}">
                                                                                <label class="form-check-label" for="sexU">?</label>
                                                                            </div>
                                                                            <div class="form-check form-check-inline">
                                                                                <input class="form-check-input"
                                                                                       type="radio"
                                                                                       name="sex"
                                                                                       value="F"
                                                                                       id="sexF"
                                                                                       {% if is_female %}checked{% endif %}
                                                                                       title="{{ _("male/female/neuter", variant='1') |capitalize }}">
                                                                                <label class="form-check-label" for="sexF">{{ _("M/F", variant='1') }}</label>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-8">
                                                                            <div class="row">
                                                                                <label for="public_name" class="col-sm-3 col-form-label">{{ _("public name") |capitalize }}</label>
                                                                                <div class="col-sm-9">
                                                                                    <input type="text"
                                                                                           class="form-control"
                                                                                           name="public_name"
                                                                                           value="{{ public_name }}"
                                                                                           id="public_name"
                                                                                           placeholder="{{ _("public name") |capitalize }}"
                                                                                           {{ datalist_pub_names }}>
                                                                                </div>
                                                                                <label for="image" class="col-sm-3 col-form-label mt-3">{{ _("image/images", variant='0') |capitalize }}</label>
                                                                                <div class="col-sm-9 mt-3">
                                                                                    <input type="text"
                                                                                           class="form-control"
                                                                                           name="image"
                                                                                           value="{{ image }}"
                                                                                           id="image"
                                                                                           placeholder="{{ _("image/images", variant='0') |capitalize }}">
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-4 d-flex px-0">
                                                                            <span class="col col-form-label">{{ _("access", variant='0') |capitalize }} (<a href="/m=H&v=visibility" title="{{ _("visibility-hlp") |capitalize }}">?</a>)</span>
                                                                            <div class="col mt-2">
                                                                                <div class="form-check">
                                                                                    <input class="form-check-input"
                                                                                           type="radio"
                                                                                           name="access"
                                                                                           value="IfTitles"
                                                                                           id="IfTitles"
                                                                                           {% if acc_if_titles %}checked{% endif %}>
                                                                                    <label class="form-check-label" for="IfTitles">
                                                                                        <span class="bg-secondary"></span> {{ _("iftitles/public/semipublic/private", variant='0') |capitalize }}
                                                                                    </label>
                                                                                </div>
                                                                                <div class="form-check">
                                                                                    <input class="form-check-input"
                                                                                           type="radio"
                                                                                           name="access"
                                                                                           value="Public"
                                                                                           id="Public"
                                                                                           {% if acc_public %}checked{% endif %}>
                                                                                    <label class="form-check-label" for="Public">
                                                                                        <span class="bg-success"></span> {{ _("iftitles/public/semipublic/private", variant='1') |capitalize }}
                                                                                    </label>
                                                                                </div>
                                                                                {% if ( b.semi_public == "yes" ) %}
                                                                                    <div class="form-check">
                                                                                        <input class="form-check-input"
                                                                                               type="radio"
                                                                                               name="access"
                                                                                               value="SemiPublic"
                                                                                               id="SemiPublic"
                                                                                               {% if acc_semi_public %}checked{% endif %}>
                                                                                        <label class="form-check-label" for="SemiPublic">
                                                                                            <span class="bg-warning"></span> {{ _("iftitles/public/semipublic/private", variant='2') |capitalize }}
                                                                                        </label>
                                                                                    </div>
                                                                                {% endif %}
                                                                                <div class="form-check">
                                                                                    <input class="form-check-input"
                                                                                           type="radio"
                                                                                           name="access"
                                                                                           value="Private"
                                                                                           id="Private"
                                                                                           {% if acc_private %}checked{% endif %}>
                                                                                    <label class="form-check-label" for="Private">
                                                                                        <span class="bg-danger"></span> {{ _("iftitles/public/semipublic/private", variant='3') |capitalize }}
                                                                                    </label>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    {% if has_qualifiers %}
                                                                        {# foreach not implemented yet #}
                                                                    {% else %}
                                                                        {% if ( b.propose_qualifier != "no" ) %}
                                                                            <div class="row">
                                                                                <label for="qualifier0" class="col-sm-2 col-form-label">{{ _("qualifier", variant='0') |capitalize }}</label>
                                                                                <div class="col-sm-6">
                                                                                    <input type="text"
                                                                                           class="form-control"
                                                                                           name="qualifier0"
                                                                                           value=""
                                                                                           id="qualifier0"
                                                                                           placeholder="{{ _("qualifier", variant='0') |capitalize }}"
                                                                                           {{ datalist_qualifiers }}>
                                                                                </div>
                                                                                <div class="custom-control custom-checkbox col-sm-auto mt-2 ml-3">
                                                                                    <input class="custom-control-input"
                                                                                           type="checkbox"
                                                                                           name="add_qualifier0"
                                                                                           value="on"
                                                                                           id="add_qualifier0">
                                                                                    <label for="add_qualifier0" class="custom-control-label">{{ _("insert::qualifier") |capitalize }}</label>
                                                                                </div>
                                                                            </div>
                                                                        {% endif %}
                                                                    {% endif %}
                                                                    {% if has_aliases %}
                                                                        {# foreach not implemented yet #}
                                                                    {% else %}
                                                                        {% if ( b.propose_alias != "no" ) %}
                                                                            <div class="row">
                                                                                <label for="alias0" class="col-sm-2 col-form-label">{{ _("alias", variant='0') |capitalize }}</label>
                                                                                <div class="col-sm-6">
                                                                                    <input type="text"
                                                                                           class="form-control"
                                                                                           name="alias0"
                                                                                           value=""
                                                                                           id="alias0"
                                                                                           placeholder="{{ _("alias", variant='0') |capitalize }}"
                                                                                           {{ datalist_aliases }}>
                                                                                </div>
                                                                                <div class="custom-control custom-checkbox col-sm-auto mt-2 ml-3">
                                                                                    <input class="custom-control-input"
                                                                                           type="checkbox"
                                                                                           name="add_alias0"
                                                                                           value="on"
                                                                                           id="add_alias0">
                                                                                    <label for="add_alias0" class="custom-control-label">{{ _("insert::alias") |capitalize }}</label>
                                                                                </div>
                                                                            </div>
                                                                        {% endif %}
                                                                    {% endif %}
                                                                    {% if has_first_names_aliases %}
                                                                        {# foreach not implemented yet #}
                                                                    {% else %}
                                                                        <div class="row">
                                                                            <label for="first_name_alias0" class="col-sm-2 col-form-label">
                                                                                {{ _("first name alias", variant='0') |capitalize }}
                                                                            </label>
                                                                            <div class="col-sm-6">
                                                                                <input type="text"
                                                                                       class="form-control"
                                                                                       name="first_name_alias0"
                                                                                       value=""
                                                                                       id="first_name_alias0"
                                                                                       placeholder="{{ _("first name alias", variant='0') |capitalize }}"
                                                                                       {{ datalist_fnames }}>
                                                                            </div>
                                                                            <div class="custom-control custom-checkbox col-sm-auto mt-2 ml-3">
                                                                                <input class="custom-control-input"
                                                                                       type="checkbox"
                                                                                       name="add_first_name_alias0"
                                                                                       value="on"
                                                                                       id="add_first_name_alias0">
                                                                                <label for="add_first_name_alias0" class="custom-control-label">{{ _("insert::first name alias") |capitalize }}</label>
                                                                            </div>
                                                                        </div>
                                                                    {% endif %}
                                                                    {% if has_surnames_aliases %}
                                                                        {# foreach not implemented yet #}
                                                                    {% else %}
                                                                        <div class="row">
                                                                            <label for="surname_alias0" class="col-sm-2 col-form-label">{{ _("surname alias", variant='0') |capitalize }}</label>
                                                                            <div class="col-sm-6">
                                                                                <input type="text"
                                                                                       class="form-control"
                                                                                       name="surname_alias0"
                                                                                       value=""
                                                                                       id="surname_alias0"
                                                                                       placeholder="{{ _("surname alias", variant='0') |capitalize }}"
                                                                                       {{ datalist_snames }}>
                                                                            </div>
                                                                            <div class="custom-control custom-checkbox col-sm-auto mt-2 ml-3">
                                                                                <input class="custom-control-input"
                                                                                       type="checkbox"
                                                                                       name="add_surname_alias0"
                                                                                       value="on"
                                                                                       id="add_surname_alias0">
                                                                                <label for="add_surname_alias0" class="custom-control-label">{{ _("insert::surname alias") |capitalize }}</label>
                                                                            </div>
                                                                        </div>
                                                                    {% endif %}
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label for="occu" class="col-sm-2 col-form-label">{{ _("occupation/occupations", variant='1') |capitalize }}</label>
                                                                    <div class="col-sm-8">
                                                                        {% if ( occupation != "" ) %}
                                                                            <textarea class="form-control"
                                                                                      name="occu"
                                                                                      rows="1"
                                                                                      id="occu"
                                                                                      placeholder="{{ _("occupation/occupations", variant='1')|capitalize }}"
                                                                                      {{ l_on1s }}>{{ occupation }}</textarea>
                                                                        {% else %}
                                                                            <input type="text"
                                                                                   class="form-control"
                                                                                   name="occu"
                                                                                   id="occu"
                                                                                   placeholder="{{ _("occupation/occupations", variant='1') |capitalize }}"
                                                                                   value="{{ occupation }}"
                                                                                   {{ datalist_occupations }}>
                                                                        {% endif %}
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <label for="src" class="col-sm-2 col-form-label">{{ _("source/sources", variant='0') |capitalize }}</label>
                                                                    <div class="col-sm-8">
                                                                        {% if ( sources != "" ) %}
                                                                            <textarea class="form-control"
                                                                                      name="src"
                                                                                      rows="1"
                                                                                      id="src"
                                                                                      placeholder="{{ _("source/sources", variant='0')|capitalize }}"
                                                                                      {{ l_on1s }}>{{ sources }}</textarea>
                                                                        {% else %}
                                                                            <input type="text"
                                                                                   class="form-control"
                                                                                   name="src"
                                                                                   id="src"
                                                                                   placeholder="{{ _("source/sources", variant='0') |capitalize }}"
                                                                                   value="{{ sources }}"
                                                                                   {{ datalist_sources }}>
                                                                        {% endif %}
                                                                    </div>
                                                                    <button type="submit" class="btn btn-primary btn-sm col-1 mx-auto">
                                                                        {{ _("validate/delete", variant='0') |capitalize }}<i class="fa fa-share fa-rotate-180 ml-2" aria-hidden="true"></i>
                                                                        <span class="sr-only font-weight-bold">{{ _("validate/delete", variant='0') |capitalize }}</span>
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="card">
                                                            {{ card_header('birth', 'birth') }}
                                                            <div class="card-body">
                                                                <div class="d-none">
                                                                    {{ _("born", variant='2') |capitalize }}…
                                                                    <label for="birth_place">{{ _("place/places", variant='0') |capitalize }}</label>
                                                                    <input type="text"
                                                                           name="birth_place"
                                                                           size="90"
                                                                           maxlength="200"
                                                                           value="{{ birth_place }}"
                                                                           id="birth_place">
                                                                    {{ date(_("date/dates", variant='0') |capitalize, "birth", "birth", "") }}{{ note("birth") }}{{ source("birth") }}
                                                                </div>
                                                                {% if has_pevent_birth %}
                                                                    {# foreach not implemented yet #}
                                                                {% else %}
                                                                    {{ one_empty_specific_pevent(next_pevent, "#birt") }}{{ incr_next_pevent }}
                                                                {% endif %}
                                                            </div>
                                                        </div>
                                                        <div class="card">
                                                            {{ card_header('baptism', 'baptism') }}
                                                            <div class="card-body">
                                                                <div class="d-none">
                                                                    {{ _("baptized", variant='2') |capitalize }}…
                                                                    <label for="bapt_place">{{ _("place/places", variant='0') |capitalize }}</label>
                                                                    <input class="form-control"
                                                                           type="text"
                                                                           name="bapt_place"
                                                                           size="90"
                                                                           maxlength="200"
                                                                           value="{{ bapt_place }}"
                                                                           id="bapt_place">
                                                                    {{ date(_("date/dates", variant='0') |capitalize, "bapt", "bapt", "") }}{{ note("bapt") }}{{ source("bapt") }}
                                                                </div>
                                                                {% if has_pevent_baptism %}
                                                                    {# foreach not implemented yet #}
                                                                {% else %}
                                                                    {{ one_empty_specific_pevent(next_pevent, "#bapt") }}{{ incr_next_pevent }}
                                                                {% endif %}
                                                            </div>
                                                        </div>
                                                        <div class="card">
                                                            {{ card_header('death', 'death') }}
                                                            <div class="card-body">
                                                                <div class="d-none">
                                                                    <table style="border-width:1px;width:700px">
                                                                        <tr>
                                                                            <td>
                                                                                <select name="old_death"
                                                                                        id="death_selectxcnt"
                                                                                        onchange="change_death('xcnt')">
                                                                                    {% if ( ( not has_birth_date ) and dont_know_if_dead ) %}<option value="Auto" selected>-</option>{% endif %}
                                                                                    <option value="NotDead"{% if not_dead %} selected{% endif %}>{{ _("alive", variant='2') |capitalize }}</option>
                                                                                    <option value="DontKnowIfDead"
                                                                                            {% if ( dont_know_if_dead and has_birth_date ) %}selected{% endif %}>
                                                                                        {{ _("don't know", variant='0') |capitalize }}{{ nl }}
                                                                                    </option>
                                                                                    <option value="Death"
                                                                                            {% if ( ( death.year != "" ) or ( ( death.text != "" ) or dead_dont_know_when ) ) %}selected{% endif %}>
                                                                                        {{ _("died", variant='2') |capitalize }}
                                                                                    </option>
                                                                                    <option value="DeadYoung"{% if died_young %} selected{% endif %}>
                                                                                        {{ _("died young", variant='2') |capitalize }}
                                                                                    </option>
                                                                                    <option value="OfCourseDead"{% if of_course_dead %} selected{% endif %}>{{ _("of course dead") |capitalize }}</option>
                                                                                </select>
                                                                            </td>
                                                                            <td>
                                                                                <label>
                                                                                    {{ _("place/places", variant='0') |capitalize }}
                                                                                    <input type="text"
                                                                                           name="death_place"
                                                                                           size="90"
                                                                                           maxlength="200"
                                                                                           value="{{ death_place }}"
                                                                                           onfocus='setDead()'>
                                                                                </label>
                                                                            </td>
                                                                        </tr>
                                                                    </table>
                                                                    {{ date(_("date/dates", variant='0') |capitalize, "death", "death", "onfocus='setDead()'") }}
                                                                    <table style="border-width:1px;width:700px">
                                                                        <tr>
                                                                            <td>
                                                                                <label>
                                                                                    <input type="radio"
                                                                                           name="death_reason"
                                                                                           value="Killed"
                                                                                           {% if dr_killed %}checked{% endif %}
                                                                                           onclick='set_death_focus(xcnt)'>
                                                                                    {{ _("killed (in action)", variant='2') |capitalize }}
                                                                                </label>
                                                                                <label>
                                                                                    <input type="radio"
                                                                                           name="death_reason"
                                                                                           value="Murdered"
                                                                                           {% if dr_murdered %}checked{% endif %}
                                                                                           onclick='set_death_focus(xcnt)'>
                                                                                    {{ _("murdered", variant='2') |capitalize }}
                                                                                </label>
                                                                                <label>
                                                                                    <input type="radio"
                                                                                           name="death_reason"
                                                                                           value="Executed"
                                                                                           {% if dr_executed %} checked{% endif %}
                                                                                           onclick='set_death_focus(xcnt)'>
                                                                                    {{ _("executed (legally killed)", variant='2') |capitalize }}
                                                                                </label>
                                                                                <label>
                                                                                    <input type="radio"
                                                                                           name="death_reason"
                                                                                           value="Disappeared"
                                                                                           {% if dr_disappeared %}checked{% endif %}
                                                                                           onclick='set_death_focus(xcnt)'>
                                                                                    {{ _("disappeared", variant='2') |capitalize }}
                                                                                </label>
                                                                                <label>
                                                                                    <input type="radio"
                                                                                           name="death_reason"
                                                                                           value="Unspecified"
                                                                                           {% if dr_unspecified %}checked{% endif %}
                                                                                           onclick='set_death_focus(xcnt)'>
                                                                                    {{ _("unspecified", variant='2') |capitalize }}
                                                                                </label>
                                                                            </td>
                                                                        </tr>
                                                                    </table>
                                                                    {{ note("death") }}{{ source("death") }}
                                                                </div>
                                                                {% if has_pevent_death %}
                                                                    {# foreach not implemented yet #}
                                                                {% else %}
                                                                    {{ one_empty_specific_pevent(next_pevent, "#deat") }}{{ incr_next_pevent }}
                                                                {% endif %}
                                                            </div>
                                                        </div>
                                                        <div class="card">
                                                            {{ card_header('burial', 'burial') }}
                                                            <div class="card-body">
                                                                <div class="d-none">
                                                                    <table style="border-width:1px;width:700px">
                                                                        <tr>
                                                                            <td>
                                                                                <select name="burial">
                                                                                    <option value="UnknownBurial"{% if bt_unknown_burial %} selected{% endif %}>-</option>
                                                                                    <option value="Buried"{% if bt_buried %} selected{% endif %}>{{ _("buried", variant='2') |capitalize }}</option>
                                                                                    <option value="Cremated"{% if bt_cremated %} selected{% endif %}>{{ _("cremated", variant='2') |capitalize }}</option>
                                                                                </select>
                                                                            </td>
                                                                            <td>
                                                                                <label>
                                                                                    {{ _("place/places", variant='0') |capitalize }}
                                                                                    <input type="text"
                                                                                           name="burial_place"
                                                                                           size="90"
                                                                                           maxlength="200"
                                                                                           value="{{ burial_place }}">
                                                                                </label>
                                                                            </td>
                                                                        </tr>
                                                                    </table>
                                                                    {{ date(_("date/dates", variant='0') |capitalize, "burial", "burial", "") }}{{ note("burial") }}{{ source("burial") }}
                                                                </div>
                                                                {% if has_pevent_burial %}{# foreach not implemented yet #}{% endif %}{% if has_pevent_cremation %}{% if has_pevent_burial %}<p></p>{% endif %}{# foreach not implemented yet #}
                                                                {% endif %}
                                                                {% if ( ( not has_pevent_burial ) and ( not has_pevent_cremation ) ) %}
                                                                    {{ one_empty_specific_pevent(next_pevent, "buri_or_crem") }}{{ incr_next_pevent }}
                                                                {% endif %}
                                                            </div>
                                                        </div>
                                                        <div class="card">
                                                            {{ card_header('events', 'event/events') }}
                                                            <div class="card-body">
                                                                {% if has_secondary_pevents %}
                                                                    {# foreach not implemented yet #}{{ insert_pevent(next_pevent) }}{{ incr_next_pevent }}
                                                                {% else %}
                                                                    {{ insert_pevent(next_pevent) }}{{ incr_next_pevent }}
                                                                {% endif %}
                                                            </div>
                                                        </div>
                                                        {% macro insert_relation(xx) %}
                                                            <div class="row">
                                                                <span class="col-form-label col-2">{{ _("insert") |capitalize }}</span>
                                                                <div class="btn-group col-auto border-primary">
                                                                    <label class="btn btn-outline-primary  mb-0">
                                                                        1 {{ _("relation/relations", variant='0') }}
                                                                        <input class="ml-1" type="checkbox" name="add_relationxx" value="on">
                                                                    </label>
                                                                    <button type="submit"
                                                                            class="btn btn-outline-primary"
                                                                            title="{{ _("insert::relation/relations", variant='0') |capitalize }}">
                                                                        OK
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        {% endmacro %}
                                                        {% macro relation_type(xx) %}
                                                            <div class="row">
                                                                <h5 class="col-sm-2 col-form-label">
                                                                    <label for="rxx_type" class="mb-0 ">{{ _("relation/relations", variant='0') |capitalize }} xx</label>
                                                                </h5>
                                                                <div class="ml-3">
                                                                    <select class="form-control" name="rxx_type" id="rxx_type">
                                                                        <option value="Undef"{% if relation.rt_empty %} selected{% endif %}>-</option>
                                                                        <option value="Adoption"{% if relation.rt_adoption %} selected{% endif %}>
                                                                            {{ _("adoptive father/adoptive mother/adoptive parents", variant='2') |capitalize }}
                                                                        </option>
                                                                        <option value="Recognition"
                                                                                {% if relation.rt_recognition %}{{ sp }}selected{% endif %}>{{ _("recognizing father/recognizing mother/recognizing parents", variant='2') |capitalize }}
                                                                        </option>
                                                                        <option value="CandidateParent"
                                                                                {% if relation.rt_candidate_parent %}{{ sp }}selected{% endif %}>{{ _("candidate father/candidate mother/candidate parents", variant='2') |capitalize }}
                                                                        </option>
                                                                        <option value="GodParent"
                                                                                {% if relation.rt_godparent %}{{ sp }}selected{% endif %}>{{ _("godfather/godmother/godparents", variant='2') |capitalize }}
                                                                        </option>
                                                                        <option value="FosterParent"
                                                                                {% if relation.rt_foster_parent %}{{ sp }}selected{% endif %}>{{ _("foster father/foster mother/foster parents", variant='2') |capitalize }}
                                                                        </option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                        {% endmacro %}
                                                        {% macro one_relation(xcnt, xvar, xrel, xsex) %}
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <label for="rxcnt_xvar_fn" class="col-sm-2 col-form-label">
                                                                        {{ _("first name/first names", variant='0') |capitalize }}
                                                                    </label>
                                                                    <div class="col-sm-5">
                                                                        <input type="text"
                                                                               class="form-control"
                                                                               name="rxcnt_xvar_fn"
                                                                               maxlength="200"
                                                                               value="{{ relation.xrel.first_name }}"
                                                                               id="rxcnt_xvar_fn"
                                                                               placeholder="{{ _("first name/first names", variant='0') |capitalize }}"
                                                                               {{ datalist_fnames }}>
                                                                    </div>
                                                                    <label for="rxcnt_xvar_occ" class="col-sm col-form-label">{{ _("number", variant='0') |capitalize }}</label>
                                                                    <div class="col-sm">
                                                                        <input type="number"
                                                                               class="form-control"
                                                                               name="rxcnt_xvar_occ"
                                                                               min="0"
                                                                               value="{{ relation.xrel.occ }}"
                                                                               id="rxcnt_xvar_occ"
                                                                               placeholder="">
                                                                    </div>
                                                                    <div class="col-sm-2">
                                                                        <select class="form-control" name="rxcnt_xvar_p" id="rxcnt_xvar_p_selct">
                                                                            <option value="link"{% if relation.xrel.link %} selected{% endif %}>{{ _("link", variant='0') |capitalize }}</option>
                                                                            <option value="create"{% if relation.xrel.create %} selected{% endif %}>
                                                                                {{ _("create", variant='0') |capitalize }}
                                                                            </option>
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <label for="rxcnt_xvar_sn" class="col-sm-2 col-form-label">{{ _("surname/surnames", variant='0') |capitalize }}</label>
                                                                    <div class="col-sm-5">
                                                                        <input type="text"
                                                                               class="form-control"
                                                                               name="rxcnt_xvar_sn"
                                                                               value="{{ relation.xrel.surname }}"
                                                                               id="rxcnt_xvar_sn"
                                                                               placeholder="{{ _("surname/surnames", variant='0') |capitalize }}"
                                                                               {{ datalist_snames }}>
                                                                    </div>
                                                                    <div class="col-1 col-form-label">
                                                                        (
                                                                        {% if ( "xvar" == "fath" ) %}
                                                                            {{ _("him/her", variant='0') |capitalize }}
                                                                        {% else %}
                                                                            {{ _("him/her", variant='1') |capitalize }}
                                                                        {% endif %}
                                                                        )
                                                                    </div>
                                                                    <div id="rxcnt_xvar_p_selct_mod" class="col-form-label ml-2">
                                                                        {% if ( ( relation.xrel.index != "-1" ) and ( ( relation.xrel.first_name != "" ) or ( relation.xrel.surname != "" ) ) ) %}
                                                                            <a href="{{ prefix_base_password }}m=MOD_IND&i={{ relation.xrel.index }}"
                                                                               title="{{ _("modify::person/persons", variant='0') |capitalize }} {{ relation.xrel.first_name }}{% if ( relation.xrel.occ != "" ) %}.{{ relation.xrel.occ }}{% endif %} {{ relation.xrel.surname }}">
                                                                                <i class="fa fa-user-pen fa-fw {% if ( relation.xrel.sex == 1 ) %}fe{% endif %}male ml-2 mr-1"
                                                                                   aria-hidden="true"
                                                                                   aria-label="{{ nth_c(_("M/F", variant='0') _("M/F", variant='1')"N", relation.xrel.sex) }}"></i>{{ _("modify") |capitalize }}</a>
                                                                        {% endif %}
                                                                    </div>
                                                                </div>
                                                                <div class="row" id="rxcnt_xvar_p_selct_data">
                                                                    <label for="rxcnt_xvar_occu" class="col-sm-2 col-form-label">
                                                                        {{ _("occupation/occupations", variant='0') |capitalize }}
                                                                    </label>
                                                                    <div class="col-5">
                                                                        <input class="form-control"
                                                                               type="text"
                                                                               name="rxcnt_xvar_occu"
                                                                               id="rxcnt_xvar_occu"
                                                                               value="{{ relation.xrel.create.occupation }}"
                                                                               placeholder="{{ _("occupation/occupations", variant='0') |capitalize }}">
                                                                    </div>
                                                                    <div class="form-inline ml-3">
                                                                        <div class="custom-control custom-checkbox">
                                                                            <input class="custom-control-input"
                                                                                   type="checkbox"
                                                                                   name="rxcnt_xvar_od"
                                                                                   id="rxcnt_xvar_od">
                                                                            <label for="rxcnt_xvar_od" class="custom-control-label">{{ _("of course dead") |capitalize }}</label>
                                                                        </div>
                                                                        <div class="custom-control custom-checkbox ml-3">
                                                                            <input class="custom-control-input"
                                                                                   type="checkbox"
                                                                                   name="rxcnt_xvar_pub"
                                                                                   id="rxcnt_xvar_pub">
                                                                            <label for="rxcnt_xvar_pub" class="custom-control-label">{{ _("public") |capitalize }}</label>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        {% endmacro %}
                                                        <div class="card">
                                                            {{ card_header('relations', 'relation/relations') }}
                                                            <div class="card-body">
                                                                {{ insert_relation("0") }}
                                                                {% if has_relations %}
                                                                    {# foreach not implemented yet #}
                                                                {% else %}
                                                                    <hr>
                                                                    {{ relation_type("1") }}{{ one_relation("1", "fath", "r_father", _("M/F", variant='0') ) }}{{ one_relation("1", "moth", "r_mother", _("M/F", variant='1') ) }}
                                                                    <hr>
                                                                    {{ insert_relation("1") }}
                                                                {% endif %}
                                                            </div>
                                                        </div>
                                                        {% macro insert_title(xcnt) %}
                                                            <div class="row">
                                                                <label for="ins_titlexcnt_n" class="col-form-label col-2">{{ _("insert") |capitalize }}</label>
                                                                <div class="form-inline col-10">
                                                                    <div class="input-group">
                                                                        <select class="form-control bg-light border-primary border-right-0"
                                                                                id="ins_titlexcnt_n"
                                                                                name="ins_titlexcnt_n">
                                                                            {% for i in 1..11 %}<option>{{ i }}</option>{% endfor %}
                                                                        </select>
                                                                        <div class="input-group-append">
                                                                            <label class="btn btn-outline-primary border-left-0 mb-0">
                                                                                {{ _("title/titles", variant='2') }}
                                                                                <input class="ml-1" type="checkbox" name="ins_titlexcnt" value="on">
                                                                            </label>
                                                                            <button type="submit"
                                                                                    class="btn btn-outline-primary"
                                                                                    title="{{ _("insert::title/titles", variant='2') |capitalize }}">
                                                                                OK
                                                                            </button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        {% endmacro %}
                                                        {% macro one_title(xcnt) %}
                                                            <hr>
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <label for="t_identxcnt" class="col-form-label col-sm-2">{{ _("title/titles", variant='0') |capitalize }}</label>
                                                                    <div class="col-sm-4">
                                                                        <input type="text"
                                                                               class="form-control"
                                                                               name="t_identxcnt"
                                                                               value="{{ title.t_ident }}"
                                                                               id="t_identxcnt"
                                                                               placeholder="{{ _("title/titles", variant='0') |capitalize }}"
                                                                               {{ datalist_titles }}>
                                                                    </div>
                                                                    <label for="t_placexcnt" class="col-form-label col-sm-2">{{ _("estate", variant='0') |capitalize }}</label>
                                                                    <div class="col-sm-4">
                                                                        <input type="text"
                                                                               class="form-control"
                                                                               name="t_placexcnt"
                                                                               value="{{ title.t_estate }}"
                                                                               id="t_placexcnt"
                                                                               placeholder="{{ _("estate", variant='0') |capitalize }}"
                                                                               {{ datalist_estates }}>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <label for="t_namexcnt" class="col-form-label col-sm-2">{{ _("name", variant='0') |capitalize }}</label>
                                                                    <div class="col-sm-4">
                                                                        <input type="text"
                                                                               class="form-control"
                                                                               name="t_namexcnt"
                                                                               value="{{ title.t_name }}"
                                                                               id="t_namexcnt"
                                                                               placeholder="{{ _("name", variant='0') |capitalize }}">
                                                                    </div>
                                                                    <label for="t_nthxcnt" class="col-form-label col-sm-2">{{ _("nth", variant='0') |capitalize }}</label>
                                                                    <div class="col-sm-1">
                                                                        <input type="text"
                                                                               class="form-control"
                                                                               name="t_nthxcnt"
                                                                               size="3"
                                                                               value="{{ title.t_nth }}"
                                                                               id="t_nthxcnt"
                                                                               placeholder="#">
                                                                    </div>
                                                                    <div class="form-inline form-check">
                                                                        <input class="form-check-input"
                                                                               id="maintitle"
                                                                               type="checkbox"
                                                                               name="t_main_titlexcnt"
                                                                               value="on"
                                                                               {% if title.t_main %}checked{% endif %}>
                                                                        <label class="form-check-label" for="maintitle">{{ _("main title", variant='0') |capitalize }}</label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            {{ date(_("begin", variant='0') |capitalize, "t_date_startxcnt", "title_date_start", "") }}{{ date(_("end", variant='0') |capitalize, "t_date_endxcnt", "title_date_end", "") }}
                                                        {% endmacro %}
                                                        <div class="card">
                                                            {{ card_header('titles', 'title/titles') }}
                                                            <div class="card-body">
                                                                {{ insert_title("0") }}
                                                                {% if has_titles %}
                                                                    {# foreach not implemented yet #}
                                                                {% else %}
                                                                    {{ one_title("1") }}
                                                                    <hr>
                                                                    {{ insert_title("1") }}
                                                                {% endif %}
                                                            </div>
                                                        </div>
                                                        <div class="card">
                                                            {{ card_header('notes', 'note/notes') }}
                                                            <div class="d-inline-flex flex-column">
                                                                <div class="col py-1">{% include 'toolbar.html.j2' %}</div>
                                                                <div class="row">
                                                                    <div class="d-flex flex-column col-9">
                                                                        <textarea class="form-control insert-character-target no-clear-button ml-2"
                                                                                  id="notes_comments"
                                                                                  name="notes"
                                                                                  rows="16">{{ notes }}</textarea>
                                                                        <button type="submit"
                                                                                class="btn btn-outline-primary btn-lg mx-auto py-3 px-5 my-3"
                                                                                title="{{ _("validate/delete", variant='0') |capitalize }}"
                                                                                aria-label="{{ _("validate/delete", variant='0') |capitalize }}">
                                                                            <span class="font-weight-bold text-uppercase">{{ _("validate/delete", variant='0') |capitalize }}</span><i class="fa fa-share fa-rotate-180 fa-fw ml-2" aria-hidden="true"></i>
                                                                        </button>
                                                                    </div>
                                                                    <div class="col mx-2 pl-0 pr-3 py-0">{% include 'characters.html.j2' %}</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </form>
                                                    {% include 'trl.html.j2' %}
                                                    {% include 'copyr.html.j2' %}
                                                </div>
                                                {% include 'js.html.j2' %}
                                                {{ query_time }}
                                                {% include 'upd_js.html.j2' %}
                                                <script>
                                                    function change_buri(xcnt) {
                                                        var selector = document.getElementById('buri_select' + xcnt);
                                                        var input = document.getElementById('e_name' + xcnt);
                                                        input.value = selector.value;
                                                    }

                                                    function set_buri(xcnt) {
                                                        var selector = document.getElementById('buri_select' + xcnt);
                                                        if (selector.value == "") {
                                                            selector.value = "#buri";
                                                            change_buri(xcnt);
                                                        }
                                                    }

                                                    function change_death(xcnt) {
                                                        var selector = document.getElementById('death_select' + xcnt);
                                                        var input = document.getElementById('e_name' + xcnt);
                                                        if (selector.value != "NotDead" && selector.value != "DontKnowIfDead") {
                                                            input.value = "#deat";
                                                        } else {
                                                            input.value = "";
                                                        }
                                                    }

                                                    function set_burial_focus(xcnt) {
                                                        var selector = document.getElementById('buri_select' + xcnt);
                                                        selector.value = "#buri";
                                                        change_buri(xcnt);
                                                    }

                                                    function set_death_focus(xcnt) {
                                                        var selector = document.getElementById('death_select' + xcnt);
                                                        selector.value = "Death";
                                                        change_death(xcnt);
                                                    }

                                                    function show_pevent_label(xxname, xcnt) {
                                                        var selector = document.getElementById('pevent_select' + xcnt);
                                                        var label = document.getElementById('pevent_label_selector' + xcnt);
                                                        var input = document.getElementById('e_name' + xcnt);
                                                        if (selector.value == "") {
                                                            if (xxname.charAt(0) == "#") {
                                                                input.value = "";
                                                            } else {
                                                                input.value = xxname;
                                                            }
                                                        } else {
                                                            input.value = selector.value;
                                                        }
                                                        if (selector.value == "" || selector.value.charAt(0) != "#") {
                                                            label.style.display = 'inline';
                                                        } else {
                                                            label.style.display = 'none';
                                                        }
                                                    }
                                                    $(document).ready(function() {
                                                        //show event perso
                                                        $(".other_evts").each(function() {
                                                            var inp = $(this).find("input").first();
                                                            if (inp.val().charAt(0) != "#" && inp.val() != "") {
                                                                $(this).show();
                                                            }
                                                        });
                                                    });
                                                </script>
                                            </body>
                                        </html>
                                    {% endwith %}
                                {% endwith %}
                            {% endwith %}
                        {% endwith %}
                    {% endwith %}
                {% endwith %}
            {% endwith %}
        {% endwith %}
    {% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}

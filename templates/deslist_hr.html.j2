{# 
  Generated by JinjaGenerator for template 'deslist_hr'
    at 2025-10-29T22:35:00.303859

  Used macros:
  - input(xx)
  - desc1(z1, z2, z3, z4, curlev, maxlev, sp_index)
  - desc2(z1, z2, z3, z4, curlev, maxlev, sp_index)
  - ancestors_grid(level)
  - navwith(xx)

  Used includes:
  - css
  - hed
  - perso_utils
  - menubar
  - buttons
  - trl
  - copyr
  - js

  Used variables:
  - lang (x1)
  - public_name (x4)
  - first_name (x2)
  - qualifier (x2)
  - sp (x1)
  - surname (x4)
  - body_prop (x1)
  - message_to_wizard (x1)
  - e.v (x4)
  - cancel_links (x5)
  - xx (x2)
  - bvar.birth_symbol (x2)
  - bvar.death_symbol (x2)
  - static_max_desc_level (x2)
  - b.max_desc_level (x3)
  - l_v0 (x4)
  - curlev (x8)
  - z3z4 (x4)
  - z2 (x4)
  - z4 (x12)
  - l1 (x16)
  - child_cnt (x8)
  - sex (x3)
  - has_families (x1)
  - access (x3)
  - l_v1 (x2)
  - child (x2)
  - browsing_with_sosa_ref (x2)
  - has_sosa (x2)
  - has_siblings (x2)
  - is_male (x2)
  - is_female (x2)
  - l2 (x2)
  - l23 (x1)
  - l231 (x2)
  - l24 (x1)
  - reset_count (x3)
  - count (x2)
  - index (x4)
  - self (x2)
  - self.title (x2)
  - dates (x2)
  - level (x5)
  - mark_descendants (x1)
  - empty_sorted_list (x1)
  - empty_sorted_listb (x1)
  - empty_sorted_listc (x1)
  - static_max_anc_level (x2)
  - has_parents (x1)
  - evar.templ (x1)
  - l_v (x4)
  - slf (x2)
  - max_desc_level (x1)
  - query_time (x1)
#}

<!DOCTYPE html>
<html lang="{{ lang }}">
    <head>
        <!-- $Id: deslist_hr.txt v7.1 19/05/2024 23:50:44 $ -->
        <!-- Copyright (c) 1998-2007 INRIA -->
        <title>{{ a_of_b_gr_eq_lev(_('descendants') |capitalize, (public_name) if (public_name != "") else (first_name)+(" "+qualifier) if (qualifier != "")+sp+surname) }}</title>
        <meta name="robots" content="none">
        <meta charset="UTF-8">
        <meta name="viewport"
              content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="shortcut icon"
              href="{{ url_for("static", path="images/favicon_gwd.png") }}">
        {% include 'css.html.j2' %}
    </head>
    <body {{ body_prop }}>
        {% include 'hed.html.j2' %}
        {{ message_to_wizard }}
        <div class="container{% if e.v > 15 %}-fluid{% endif %}">
            {% include 'perso_utils.html.j2' %}
            {% if not cancel_links %}
                {% include 'menubar.html.j2' %}
                {% include 'buttons.html.j2' %}
            {% endif %}
            {% macro input(xx) %}
                <label class="sr-only mt-2" for="inputxx">Filtre xx</label>
                <input type="text"
                       id="inputxx"
                       placeholder="{{ _('surname/surnames', variant='0') }}xx"
                       title="{{ _('filter by::surname/surnames', variant='0') }}xx"
                       class="filter{% if xx > 1 %} extrafilter{% endif %} form-control ml-1{% if xx != 1 %} d-none{% endif %}"
                       disabled>
            {% endmacro %}
            {% with %}
                {% set birth_symbol = (bvar.birth_symbol) if (bvar.birth_symbol != "") else ("&deg;") %}
                {% with %}
                    {% set death_symbol = (bvar.death_symbol) if (bvar.death_symbol != "") else ("&dagger;") %}
                    {% with %}
                        {% set l_v0 = (static_max_desc_level) if (e.v > static_max_desc_level) else (e.v) %}
                        {% with %}
                            {% set l_v = (l_v0) if (b.max_desc_level == "" or b.max_desc_level > l_v0) else (b.max_desc_level) %}
                            {% macro desc1(z1, z2, z3, z4, curlev, maxlev, sp_index) %}
                                {% with %}
                                    {% set l_v1 = (l_v0 - curlev) if (l_v0 >= curlev) else (e.v) %}
                                    {% with %}
                                        {% set l1 = ("  ┊") if (z3z4 == "00" or z3z4 == "01") else ("   ") %}
                                        {% with %}
                                            {% set l2 = (((l1+"┗") if (z4 == 1) else ((l1+"┣") if (z4 == 0))+("━") if (child_cnt < 10)) if (z2 == 0) else ((l1+"└") if (z4 == 1) else ((l1+"├") if (z4 == 0))+("─") if (child_cnt < 10))) if (curlev != 0) %}
                                            {% with %}
                                                {% set zl1 = ((("z1"+l1+" ") if (z4 == 1) else ("z1"+l1+"┃")) if (z2 == 0) else (("z1"+l1+" ") if (z4 == 1) else ("z1"+l1+"│"))) if (curlev != 0) %}
                                                {% with %}
                                                    {% set zl2 = sex %}
                                                    {% if has_families %}
                                                        {% with %}
                                                            {% set l21 = (("<a href=\""+"/"+access+"&m=D&t=D&v="+l_v1+"\"  title=\""+_('navigate on tree')+" "+_('with')+" "+child+"\">"+child_cnt+"</a>") if (not cancel_links) else (child_cnt)) if (curlev != 0) %}
                                                            {% with %}
                                                                {% set l22 = (("▶") if (has_siblings) else ("▷")) if (browsing_with_sosa_ref and has_sosa) %}{# foreach not implemented yet #}
                                                            {% endwith %}
                                                        {% endwith %}
                                                    {% else %}
                                                        {% with %}
                                                            {% set l23 = (("<a href=\""+"/"+access+"&m=D&t=D&v="+l_v1+"\" title=\""+_('navigate on tree')+" "+_('with')+" "+child+"\">"+child_cnt+"</a>") if (not cancel_links) else (child_cnt)) if (curlev != 0) %}
                                                            {% with %}
                                                                {% set l231 = ("━━") if (is_male) else (("──") if (is_female) else ("╍")) %}
                                                                {% with %}
                                                                    {% set l24 = (("◀") if (has_siblings) else ("◁")) if (browsing_with_sosa_ref and has_sosa) %}<span data-surname="_{{ surname }}" class="text-nowrap">
                                                                    <span class="tt">z1{{ l2 }}{{ l23 }}{{ l231 }}{{ l24 }}{{ reset_count }}{# foreach not implemented yet #}
                                                                        {% if count > 0 %}{{ l231 }}{% endif %}
                                                                    </span>
                                                                    {{ add_in_sorted_list(index) }}{{ add_in_sorted_listc(index) }}
                                                                    {% if not cancel_links %}
                                                                        <a href="/{{ access }}" data-index="{{ index }}">{{ self }}</a>
                                                                        {% if self.title != "" %}, {{ self.title }}{% endif %}
                                                                    {% else %}
                                                                        {{ self }}
                                                                    {% endif %}
                                                                {{ dates }}</span>
                                                                <br data-surname="_{{ surname }}">
                                                            {% endwith %}
                                                        {% endwith %}
                                                    {% endwith %}
                                                {% endif %}
                                            {% endwith %}
                                        {% endwith %}
                                    {% endwith %}
                                {% endwith %}
                            {% endwith %}
                        {% endmacro %}
                        {% macro desc2(z1, z2, z3, z4, curlev, maxlev, sp_index) %}
                            {% with %}
                                {% set l1 = ("  ┊") if (z3z4 == "00" or z3z4 == "01") else ("   ") %}
                                {% with %}
                                    {% set l2 = (((l1+"┗") if (z4 == 1) else ((l1+"┣") if (z4 == 0))+("━") if (child_cnt < 10)) if (z2 == 0) else ((l1+"└") if (z4 == 1) else ((l1+"├") if (z4 == 0))+("─") if (child_cnt < 10))) if (curlev != 0) %}
                                    {% with %}
                                        {% set zl1 = ((("z1"+l1+" ") if (z4 == 1) else ("z1"+l1+"┃")) if (z2 == 0) else (("z1"+l1+" ") if (z4 == 1) else ("z1"+l1+"│"))) if (curlev != 0) %}
                                        {% with %}
                                            {% set zl2 = sex %}
                                            {% with %}
                                                {% set l231 = ("━") if (is_male) else (("─") if (is_female) else ("━")) %}<span>
                                                <span class="tt">z1{{ l2 }}</span>
                                                {% if not cancel_links %}
                                                    <a role="button"
                                                       onclick="implexdesc('{{ index }}')"
                                                       title="{{ _('implex/implexes', variant='0') |capitalize }}"><i class="fa fa-shuffle fa-fw ml-1" aria-hidden="true"></i><span class="sr-only">(==)</span></a>
                                                {% else %}
                                                    <i class="fa fa-shuffle fa-fw ml-1" aria-hidden="true"></i><span class="sr-only">(==)</span></a>
                                            {% endif %}
                                        </span>
                                    {% endwith %}
                                {% endwith %}
                            {% endwith %}
                        {% endwith %}
                    {% endwith %}
                {% endmacro %}
                {% macro ancestors_grid(level) %}
                    {% if level != 0 %}
                        <div class="text-center mt-2 mb-1">
                            <h5 class="mb-1">
                                {% if level == 1 %}
                                    {{ _("parents") |capitalize }}
                                {% else %}
                                    {% if level == 2 %}
                                        {{ _("grand-parents") |capitalize }}
                                    {% else %}
                                        {% if level == 3 %}
                                            {{ _("great-grand-parents") |capitalize }}
                                        {% else %}
                                            {% if level == 4 %}{{ _("great-great-grandparents") |capitalize }}{% endif %}
                                        {% endif %}
                                    {% endif %}
                                {% endif %}
                            </h5>
                            {{ reset_count }}{# foreach not implemented yet #}
                        </div>
                    {% endif %}
                {% endmacro %}
                {{ mark_descendants }}{{ empty_sorted_list }}{{ empty_sorted_listb }}{{ empty_sorted_listc }}
                {% with %}
                    {% set maxlvl = ("4") if (static_max_anc_level > 4) else (static_max_anc_level) %}
                    {% if has_parents and evar.templ == "" %}
                        <div class="modal fade"
                             id="switch_modal"
                             tabindex="-1"
                             aria-labelledby="switch-ancestor-modal"
                             aria-hidden="true">
                            <div class="modal-dialog modal-xl">
                                <div class="modal-content">
                                    <div class="modal-header py-2">
                                        <h4 class="modal-title text-primary" id="switch-ancestor-modal">
                                            <i class="fa fa-sitemap fa-fw mr-2"></i>{{ _("choose an ancestor") |capitalize }}
                                        </h4>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body pt-1 pb-2">{# foreach not implemented yet #}</div>
                                    <div class="modal-footer py-1 bg-light">
                                        <small class="text-muted w-100 text-center">
                                            <i class="fa fa-hand-pointer fa-fw"></i>
                                            {% macro navwith(xx) %}
                                                {{ _("navigate with someone:::xx") |capitalize }}
                                            {% endmacro %}
                                        {{ navwith(_('an ancestor', variant='0') ) }}</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                    <h3 class="mt-2 ml-2">
                        {% with %}
                            {% set slf = (public_name) if (public_name != "") else (first_name)+" "+surname+" "+dates %}
                            {% if l_v == 0 %}
                                {{ slf }}
                            {% else %}
                                {{ a_of_b_gr_eq_lev(_('descendants') |capitalize, slf+"<small class=\"font-weight-lighter text-muted\">"+togend(l_v)+"</small>") }}
                            {% endif %}
                        </h3>
                        <form id="filterbysurname" class="form-inline mt-2 d-none">
                            <div class="form-control ml-3 px-0 border-0">{{ _("filter by") |capitalize }}</div>
                            <div class="ml-2">{{ input(1) }}{{ input(2) }}{{ input(3) }}{{ input(4) }}</div>
                            <button id="btnplus"
                                    type="button"
                                    class="btn btn-primary ml-2"
                                    title="{{ _("add filter") |capitalize }} (max 4)">
                                <i class="fa fa-plus fa-fw"></i>
                            </button>
                            <button id="btnclear"
                                    type="button"
                                    class="btn btn-danger ml-1"
                                    title="{{ _("clear filters") |capitalize }}">
                                <i class="fa fa-xmark fa-fw"></i>
                            </button>
                        </form>
                        <div class="deslist mt-2">{{ desc1(" 0", sex, "0", "0", "0", l_v + 1, 0) }}</div>
                        {{ reset_count }}{# foreach not implemented yet #}
                        {% if l_v > 0 %}
                            <div id="total" class="mt-2 ml-2" title="{{ _("unfiltered total") }}">
                                {{ _("total") |capitalize }}{{ _(":") }}
                                {{ desc_count(max_desc_level) }} {{ _("descendants") }} ({{ count }} {{ _('person/persons', variant='1') }} {{ _("with") }} {{ _('spouse/spouses', variant='1') }})
                            </div>
                        {% endif %}
                        {% include 'trl.html.j2' %}
                        {% include 'copyr.html.j2' %}
                    </div>
                    {% include 'js.html.j2' %}
                    {{ query_time }}
                </body>
            </html>
        {% endwith %}
    {% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}

{# 
  Generated by JinjaGenerator for template 'modules/arbre_hi'
    at 2025-10-29T22:35:35.694068

  Used macros:
  - implexc(x0, y0, x1, y1)
  - implexs(x0, y0, x1, y1)
  - line(x0, y0, x1, y1)
  - implex1(xx)
  - bg(xx)
  - size(xx)
  - wid(xx)
  - hig(xx)
  - divsr(xx)
  - boxsosa(aaa, sss, ppp, bgg, lll, ttt)
  - linesosa(ss0, ll, yy, x0, y0)
  - boxchar(aaa, yyy, lll, ttt)
  - linechar(nn, yy, oo)
  - graph(xx, yy, zz)
  - graphlinks(xx, yy)
  - my_title(aa, bb, tt)

  Used includes:
  None

  Used variables:
  - e.v (x2)
  - e.t (x2)
  - e.t1 (x2)
  - e.hi (x2)
  - e.image (x2)
  - e.implx (x2)
  - e.sosa (x2)
  - e.cpl (x2)
  - e.sms (x2)
  - e.scale (x2)
  - e.fs (x2)
  - e.cgl (x2)
  - evarfs (x1)
  - cgi (x4)
  - evarscl (x4)
  - evarv (x42)
  - evarcpl (x52)
  - evarso (x21)
  - top (x2)
  - wbc (x5)
  - left (x2)
  - hbc (x4)
  - ttt (x1)
  - lll (x1)
  - aaaanc_sosa.v (x6)
  - aaaanc_sosa (x10)
  - aaasame (x11)
  - aaasame.v (x2)
  - aaahas_parents (x4)
  - aaaspouse.has_parents (x3)
  - aaaspouse.access (x1)
  - aaaspouse (x4)
  - aaaspouse.has_image (x2)
  - aaaspouse.image_url (x2)
  - aaaspouse.index (x1)
  - aaaspouse.is_male (x2)
  - aaaspouse.occ (x2)
  - aaaspouse.birth_date.year (x8)
  - aaaspouse.is_dead (x2)
  - aaaspouse.death_date.year (x4)
  - boxsize (x18)
  - wb1 (x8)
  - hb1 (x4)
  - bg_col (x1)
  - aaaaccess (x4)
  - aaafirst_name (x6)
  - aaasurname (x6)
  - aaaocc (x10)
  - aaahas_image (x5)
  - imsz (x10)
  - aaaimage_url (x4)
  - aaaindex (x2)
  - sss (x2)
  - fs (x6)
  - width (x2)
  - dw1 (x1)
  - fs1 (x3)
  - dw2 (x1)
  - prefix_base_password (x1)
  - level (x2)
  - aaais_male (x2)
  - aaabirth_date.year (x8)
  - aaais_dead (x2)
  - aaadeath_date.year (x4)
  - aaahas_families (x2)
  - tm (x1)
  - ss0 (x1)
  - ss (x29)
  - lev (x4)
  - www (x1)
  - wbs (x6)
  - twid0 (x2)
  - hhh (x1)
  - hbs (x6)
  - or (x3)
  - twid (x1)
  - ddd (x2)
  - thig (x1)
  - len (x2)
  - x0 (x1)
  - wb2 (x1)
  - y0 (x1)
  - hb2 (x1)
  - x1 (x4)
  - len2 (x4)
  - y1 (x4)
  - x2 (x1)
  - y2 (x1)
  - url_set.i_p_n_oc (x1)
  - xxx (x29)
  - ancestor.spouse.has_parents (x16)
  - ancestor.has_parents (x24)
  - top_ (x1)
  - left_ (x1)
  - nn (x5)
  - oo (x2)
  - xx (x1)
  - zz (x1)
  - evarhi (x5)
  - first_name (x1)
  - surname (x1)
  - dates (x1)
  - vvv (x4)
  - mmm (x4)
  - nbc (x2)
  - nbl (x2)
  - wids (x4)
  - higs (x4)
#}

<!-- $Id: modules/arbre_hi.txt v7.1 04/03/2023 09:51:04 $-->
{% with %}
    {% set evarv = (e.v) if (e.v != "") else ("7") %}
    {% with %}
        {% set evart = (e.t) if (e.t != "") else ("T") %}
        {% with %}
            {% set evart1 = (e.t1) if (e.t1 != "") else ("CT") %}
            {% with %}
                {% set evarhi = ("H") if (e.hi == "" or e.hi != "I") else ("I") %}
                {% with %}
                    {% set evarim = ("on") if (e.image != "" and e.image != "off") %}
                    {% with %}
                        {% set evarix = ("on") if (e.implx != "" and e.implx == "on") %}
                        {% with %}
                            {% set evarso = ("on") if (e.sosa != "" and e.sosa == "on") %}
                            {% with %}
                                {% set evarcpl = ("on") if (e.cpl != "" and e.cpl == "on") %}
                                {% with %}
                                    {% set evarsms = ("on") if (e.sms != "" and e.sms == "on") %}
                                    {% with %}
                                        {% set evarscl = (e.scale) if (e.scale != "") else ("100") %}
                                        {% with %}
                                            {% set evarfs = (e.fs) if (e.fs != "") else ("17") %}
                                            {% with %}
                                                {% set fs = evarfs %}
                                                {% with %}
                                                    {% set hbc = "13" %}
                                                    {% with %}
                                                        {% set wbc = "9" %}
                                                        {% with %}
                                                            {% set hbs = ("24") if (cgi) else (24 * evarscl // 100) %}
                                                            {% with %}
                                                                {% set wbs = ("40") if (cgi) else (40 * evarscl // 100) %}
                                                                {% with %}
                                                                    {% set hb1 = ("22") if (cgi) else (22 * evarscl // 100) %}
                                                                    {% with %}
                                                                        {% set wb1 = ("38") if (cgi) else (38 * evarscl // 100) %}<style type="text/css">
    #hi-tree1 {
        position: relative;
        left: 10px;
    }

    #hi-tree1 tt {
        position: absolute;
        line-height: 10pt;
        font-family: monospace;
    }

    #hi-tree1 span {
        position: absolute;
        line-height: 10pt;

        margin: {
            % if evarv < 9 and evarcpl !="on" or evarv < 10 and evarcpl=="on" %
        }

        8px 12px {
            % else %
        }

        0px 4px {
            % endif %
        }

            {
            % raw %
        }
    }

    #hi-tree1 a {
        position: absolute;
        line-height: 10pt;
    }
</style>
                                                                        <script>
                                                                            <!--
                                                                            function over1(xx) {
                                                                                document.getElementById(xx).style. {
                                                                                    % endraw %
                                                                                } {
                                                                                    %
                                                                                    if evarso == "on" %
                                                                                }
                                                                                outline = "#C0FEFF solid 6px" {
                                                                                    %
                                                                                    else %
                                                                                }
                                                                                backgroundColor = "#CBFECE" {
                                                                                    % endif %
                                                                                };
                                                                                return false;
                                                                            }

                                                                            function out1(xx) {
                                                                                document.getElementById(xx).style. {
                                                                                    %
                                                                                    if evarso == "on" %
                                                                                }
                                                                                outline = "none" {
                                                                                    %
                                                                                    else %
                                                                                }
                                                                                backgroundColor = "" {
                                                                                    % endif %
                                                                                };
                                                                                return false;
                                                                            }
                                                                            -->
                                                                        </script>
{% macro implexc(x0, y0, x1, y1) %}
{% with %}
{% set ttt = (top - wbc) if (evarv < 9 and evarcpl != "on" or evarv < 10 and evarcpl == "on") else (top - 2) %}
{% with %}
{% set lll = (left - hbc) if (evarv < 9 and evarcpl != "on" or evarv < 10 and evarcpl == "on") else (left - 4) %}<span style="top:{{ ttt }}px;left:{{ lll }}px;font-family:monospace;">x</span>
<script>
    $(window).on("load", function() {
        $('#hi-tree1').line(x0, y0, x1, y1, {
            color: "red",
            stroke: 1,
            opacity: 0.5,
            zindex: 1
        });
    });
</script>
{% endwith %}
{% endwith %}
{% endmacro %}
{% macro implexs(x0, y0, x1, y1) %}
<script>
    $(window).on("load", function() {
        $('#hi-tree1').line(x0, y0, x1, y1, {
            color: "red",
            stroke: 1,
            opacity: 0.5,
            zindex: 1
        });
    });
</script>
{% endmacro %}
{% macro line(x0, y0, x1, y1) %}
<script>
    $(window).on("load", function() {
        $('#hi-tree1').line(x0, y0, x1, y1, {
            stroke: 2,
            opacity: 0.3,
            zindex: -1
        });
    });
</script>
{% endmacro %}
{% macro implex1(xx) %}
onmouseover="over1('sxx')" onmouseout="out1('sxx')"
{% endmacro %}
{% macro bg(xx) %}
{{ nth("/FFFFFF/FFC8E3/F0CBFE/DDCEFF/FFA8D3/E7A9FE/FF86C2/DD88FD/FF62B0/C4ABFE/C433FE/FFFFFF/
", "xx") }}
{% endmacro %}
{% macro size(xx) %}
{{ nth(("//70/70/70/190/190/430/430/600/600/950/950/
") if (evarso == "on") else ("//50/50/105/105/215/215/410/410/840/840/1650/1650/
"), "xx") }}
{% endmacro %}
{% macro wid(xx) %}
{{ nth('/////7/7/15/15/31/31/63/63/127', 'xx') }}
{% endmacro %}
{% macro hig(xx) %}
{{ nth('/////3/7/7/15/15/31/31/63/63/127', 'll') }}
{% endmacro %}
{% macro divsr(xx) %}
{{ nth('/1/2/4/8/16/32/64/128/256/512', 'xx') }}
{% endmacro %}
{% macro boxsosa(aaa, sss, ppp, bgg, lll, ttt) %}
{% with %}
{% set bg_col = "bgg" %}
<div id="s{{ aaaanc_sosa.v }}"style="position:absolute;border:solid 1px;top:tttpx;left:lllpx;{% if aaasame == "" %}{% if evarcpl == "on" %}{% if not aaahas_parents %}border-left: 3px solid;{% endif %}{% if not aaaspouse.has_parents %}border-right: 3px solid;{% endif %}{% else %}{% if not aaahas_parents %}border-top:3px solid;{% endif %}{% endif %}{% endif %}width:{% if boxsize == 2 %}{{ wb1 * 2 }}{% else %}{{ wb1 }}{% endif %}px;height:{% if boxsize == 2 %}{{ hb1 * 2 }}{% else %}{{ hb1 }}{% endif %}px;background-color:{% if bg_col == "" %}#FFFFFF{% else %}#bgg;{% endif %};zindex:2">
{% with %}
{% set imsz = ("15") if (boxsize == 2) else ("8") %}
{% if e.cgl != "on" %}
{% if evarcpl != "on" %}
<a class="big_anchor_1 list-group-item-action" href='/{{ aaaaccess }}' title="{{ aaafirst_name }} {{ aaasurname }} ({{ aaaocc }})">
{% if aaahas_image %}
<img style="width:{{ imsz }}px" src="{{ aaaimage_url }}" alt="{{ _('image/images', variant='0') }}">
{% endif %}
</a>
<a class="big_anchor_1m list-group-item-action" href="/m=MOD_IND&i={{ aaaindex }}" title="Modifier {{ aaafirst_name }} {{ aaasurname }} ({{ aaaocc }})">
</a>
{% else %}
<a class="big_anchor_him list-group-item-action" href='/{{ aaaaccess }}' title="{{ aaafirst_name }} {{ aaasurname }} ({{ aaaocc }})">
{% if aaahas_image %}
<img style="width:{{ imsz }}px" src="{{ aaaimage_url }}" alt="{{ _('image/images', variant='0') }}">
{% endif %}
</a>
{% if aaasame == "" %}
<a class="big_anchor_her list-group-item-action" href='/{{ aaaspouse.access }}' title="{{ aaaspouse }}">
{% if aaaspouse.has_image %}
<img style="width:{{ imsz }}px" src="{{ aaaspouse.image_url }}" alt="{{ _('image/images', variant='0') }}">
{% endif %}
</a>
{% endif %}
<a class="big_anchor_him_m list-group-item-action" href="/m=MOD_IND&i={{ aaaindex }}" title="Modifier {{ aaafirst_name }} {{ aaasurname }} ({{ aaaocc }})">
</a>
{% if aaasame == "" %}
<a class="big_anchor_her_m list-group-item-action" href="/m=MOD_IND&i={{ aaaspouse.index }}" title="Modifier {{ aaaspouse }}">
</a>
{% endif %}
{% endif %}
{% else %}
{% with %}
{% set width = (wb1 * 2) if (boxsize == 2) else (wb1) %}
{% with %}
{% set imsz = ("15") if (boxsize == 2) else ("8") %}
{% with %}
{% set fs1 = (fs - 10) if (sss > 999) else ((fs) if (boxsize == 2) else (fs - 5)) %}
{% with %}
{% set tm = ("8") if (boxsize == 2) else ("2") %}
{% with %}
{% set dw1 = width - imsz %}
{% with %}
{% set dw2 = width - 2 * imsz %}
{% with %}
{% set dm = (imsz) if (aaahas_image) %}
{% if evarcpl != "on" %}
<div class="d-flex">
{% if aaahas_image %}
<img style="width:{{ imsz }}px" src="{{ aaaimage_url }}" alt="{{ _('image/images', variant='0') }}">
{% endif %}
<span style="margin:0 0 2px 0;text-align:center;width:{{ dw1 }}px;font-size:{{ fs1 }}px;">
{% if aaaanc_sosa != "" %}
{{ aaaanc_sosa }}
{% else %}
1
{% endif %}
</span>
</div>
{% else %}
<div class="d-flex justify-content-between">
{% if aaahas_image %}
<div style="margin:0 0 2px 0">
<img style="width:{{ imsz }}px" src="{{ aaaimage_url }}" alt="{{ _('image/images', variant='0') }}">
</div>
{% else %}
<div style="margin:0 0 2px 0;width:{{ imsz }}px"></div>
{% endif %}
<div style="margin:0 0 2px 0;text-align:center;width:{{ dw2 }}px;font-size:{{ fs1 }}px;">
{% if aaaanc_sosa != "" %}
{{ aaaanc_sosa }}
{% else %}
1
{% endif %}
</div>
{% if aaaspouse.has_image %}
<div style="margin:0 0 2px 0">
<img style="width:{{ imsz }}px" src="{{ aaaspouse.image_url }}" alt="{{ _('image/images', variant='0') }}">
</div>
{% endif %}
</div>
{% endif %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endif %}
{% if e.cgl != "on" %}
<div>
<a style="width:100%;zindex:2;" href="{{ prefix_base_password }}{{ aaaaccess }}&t=T&t1=CT& {# foreach not implemented yet #}" {% if aaasame != "" %}{{ implex1(aaasame.v) }}{% endif %}title='{{ _('generation/generations', variant='0') |capitalize }} {{ level }} – Sosa {% if evarcpl == "" %}{{ aaaanc_sosa }} {% if aaasame != "" %}=Sosa {{ aaasame }}{% endif %}{% else %}{{ aaaanc_sosa }} & {{ aaaanc_sosa.v + 1 }}{% endif %}&#010;{% if aaais_male %} ♂{% else %} ♀{% endif %} {{ aaafirst_name }} {{ aaasurname }} {% if aaaocc != "" or aaaocc != 0 %}({{ aaaocc }}){% endif %}&#010;{% if aaabirth_date.year != "" %}° {{ aaabirth_date.year }}{% endif %}{% if aaabirth_date.year != "" and aaais_dead %} – {% endif %}{% if aaabirth_date.year == "" and aaadeath_date.year != "" %}†{% else %}{{ aaadeath_date.year }}{% endif %}&#010;{% if not aaahas_parents %} {{ _("missing parents") |capitalize }}.&#010;{% endif %}{% if aaasame == "" and aaahas_families and evarcpl == "on" %}{% if aaaspouse.is_male %} ♂{% else %} ♀{% endif %} {{ aaaspouse }} ({{ aaaspouse.occ }})&#010;{% if aaaspouse.birth_date.year != "" %}° {{ aaaspouse.birth_date.year }}{% endif %}{% if aaaspouse.birth_date.year != "" and aaaspouse.is_dead %} – {% endif %}{% if aaaspouse.birth_date.year == "" and aaaspouse.death_date.year != "" %}†{% else %}{{ aaaspouse.death_date.year }}{% endif %}&#010;{% if not aaaspouse.has_parents %} {{ _("missing parents") |capitalize }}.{% endif %}{% endif %}'>
{% with %}
{% set fs1 = (fs - 10) if (sss > 999) else ((fs) if (boxsize == 2) else (fs - 5)) %}
{% with %}
{% set tm = ("8") if (boxsize == 2) else ("2") %}<span style="margin:{{ tm }}px 0 2px 0;text-align:center;width:100%;font-size:{{ fs1 }}px;">
{% if aaaanc_sosa != "" %}
{{ aaaanc_sosa }}
{% else %}
1
{% endif %}
</span>
</a>
</div>
{% endwith %}
{% endwith %}
{% endif %}
</div>
{% endwith %}
{% endwith %}
{% endmacro %}
{% macro linesosa(ss0, ll, yy, x0, y0) %}
{% with %}
{% set ss = (ss0 // 2) if (evarcpl == "on") else ("ss0") %}
{% if ss != 1 %}
{% with %}
{% set lev = ("1") if (ss >= 1 and ss < 2) else (("2") if (ss >= 2 and ss < 4) else (("3") if (ss >= 4 and ss < 8) else (("4") if (ss >= 8 and ss < 16) else (("5") if (ss >= 16 and ss < 32) else (("6") if (ss >= 32 and ss < 64) else (("7") if (ss >= 64 and ss < 128) else (("8") if (ss >= 128 and ss < 256) else (("9") if (ss >= 256 and ss < 512) else (("10") if (ss >= 512 and ss < 1024) else (("11") if (ss >= 1024 and ss < 2048) else (("12") if (ss >= 2048 and ss < 4096) else (("13") if (ss >= 4096 and ss < 8192) else ("14"))))))))))))) %}
{% with %}
{% set www = nth("///4/4/8/8/16/16/32/32/64/64/128/128/", "ll") %}
{% with %}
{% set hhh = nth("///4/8/8/16/16/32/32/64/64/128/128/", "ll") %}
{% with %}
{% set ddd = nth("/1/2/4/4/8/8/16/16/32/32/64/64/128/128/256/256/512/512/", (lev) if ("yy" == "H") else (lev - 1)) %}
{% with %}
{% set or = (nth("/h/v/h/v/h/v/h/v/h/v/h/v/h/v/h/v/h/v/h/v/h/v/", lev)) if ("yy" == "H") else (nth("/v/h/v/h/v/h/v/h/v/h/v/h/v/h/v/h/v/h/v/h/v/h/", lev)) %}
{% with %}
{% set twid0 = www * wbs %}
{% with %}
{% set twid = (twid0 * 2) if ("yy" == "H") else (twid0) %}
{% with %}
{% set thig = hhh * hbs %}
{% with %}
{% set len = (twid // ddd) if (or == "h") else (thig // ddd) %}
{% with %}
{% set len2 = (len) if (boxsize == 2) else (len // 2) %}
{% with %}
{% set wb2 = (wb1) if (boxsize == 2) else (wb1 // 2) %}
{% with %}
{% set hb2 = (hb1) if (boxsize == 2) else (hb1 // 2) %}
{% with %}
{% set x1 = x0 + wb2 %}
{% with %}
{% set y1 = y0 + hb2 %}
{% with %}
{% set x2 = ((x1 + len2) if (ss % 2 == 0) else (x1 - len2)) if (or == "h") else (x1) %}
{% with %}
{% set y2 = ((y1 + len2) if (ss % 2 == 0) else (y1 - len2)) if (or == "v") else (y1) %}{{ line(x1, y1, x2, y2) }}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endif %}
{% endwith %}
{% endmacro %}
{% macro boxchar(aaa, yyy, lll, ttt) %}
{% with %}
{% set xxx = (aaaanc_sosa.v // 2) if (evarcpl == "on") else (aaaanc_sosa.v) %}
<div id="s{{ aaaanc_sosa.v }}" style="font-family:monospace;margin:0">
<a style="top:tttpx;left:lllpx;" href="{{ url_set.i_p_n_oc }}&{{ aaaaccess }}" {% if aaasame != "" %}{{ implex1(aaasame.v) }}{% endif %}title='{{ _('generation/generations', variant='0') |capitalize }} {{ level }} – Sosa {% if evarcpl == "" %}{{ aaaanc_sosa }} {% if aaasame != "" %}=Sosa {{ aaasame }}{% endif %}{% else %}{{ aaaanc_sosa }} & {{ aaaanc_sosa.v + 1 }}{% endif %}&#010;{% if aaais_male %} ♂{% else %} ♀{% endif %} {{ aaafirst_name }} {{ aaasurname }} {% if aaaocc != "" or aaaocc != 0 %}({{ aaaocc }}){% endif %}&#010;{% if aaabirth_date.year != "" %}° {{ aaabirth_date.year }}{% endif %}{% if aaabirth_date.year != "" and aaais_dead %} – {% endif %}{% if aaabirth_date.year == "" and aaadeath_date.year != "" %}†{% else %}{{ aaadeath_date.year }}{% endif %}&#010;{% if not aaahas_parents %} {{ _("missing parents") |capitalize }}.&#010;{% endif %}{% if aaasame == "" and aaahas_families and evarcpl == "on" %}{% if aaaspouse.is_male %} ♂{% else %} ♀{% endif %} {{ aaaspouse }} ({{ aaaspouse.occ }})&#010;{% if aaaspouse.birth_date.year != "" %}° {{ aaaspouse.birth_date.year }}{% endif %}{% if aaaspouse.birth_date.year != "" and aaaspouse.is_dead %} – {% endif %}{% if aaaspouse.birth_date.year == "" and aaaspouse.death_date.year != "" %}†{% else %}{{ aaaspouse.death_date.year }}{% endif %}&#010;{% if not aaaspouse.has_parents %} {{ _("missing parents") |capitalize }}.{% endif %}{% endif %}'>
{% if xxx == 1 %}
┼
{% else %}
{% if xxx > 1 and xxx < 4 or xxx > 7 and xxx < 16 or xxx > 31 and xxx < 64 or xxx > 127 and xxx < 256 or xxx > 511 and xxx < 1024 or xxx > 2047 and xxx < 4096 %}
{% if "yyy" == "H" %}
{% if xxx % 2 == 0 %}
{% if evarcpl == "on" and not ancestor.spouse.has_parents and ancestor.has_parents %}
┐
{% else %}
{% if evarcpl == "on" and not ancestor.has_parents and ancestor.spouse.has_parents %}
┌
{% else %}
{% if not ancestor.has_parents %}
╷
{% else %}
┬
{% endif %}
{% endif %}
{% endif %}
{% else %}
{% if evarcpl == "on" and not ancestor.spouse.has_parents and ancestor.has_parents %}
┘
{% else %}
{% if evarcpl == "on" and not ancestor.has_parents and ancestor.spouse.has_parents %}
└
{% else %}
{% if not ancestor.has_parents %}
╵
{% else %}
┴
{% endif %}
{% endif %}
{% endif %}
{% endif %}
{% else %}
{% if xxx % 2 == 0 %}
{% if evarcpl == "on" and not ancestor.spouse.has_parents and ancestor.has_parents %}
└
{% else %}
{% if evarcpl == "on" and not ancestor.has_parents and ancestor.spouse.has_parents %}
┌
{% else %}
{% if not ancestor.has_parents %}
╶
{% else %}
├
{% endif %}
{% endif %}
{% endif %}
{% else %}
{% if evarcpl == "on" and not ancestor.spouse.has_parents and ancestor.has_parents %}
┘
{% else %}
{% if evarcpl == "on" and not ancestor.has_parents and ancestor.spouse.has_parents %}
┐
{% else %}
{% if not ancestor.has_parents %}
╴
{% else %}
┤
{% endif %}
{% endif %}
{% endif %}
{% endif %}
{% endif %}
{% else %}
{% if xxx > 3 and xxx < 8 or xxx > 15 and xxx < 32 or xxx > 63 and xxx < 128 or xxx > 255 and xxx < 512 or xxx > 1023 and xxx < 2048 or xxx > 4095 and xxx < 8192 %}
{% if "yyy" == "H" %}
{% if xxx % 2 == 0 %}
{% if evarcpl == "on" and not ancestor.spouse.has_parents and ancestor.has_parents %}
└
{% else %}
{% if evarcpl == "on" and not ancestor.has_parents and ancestor.spouse.has_parents %}
┌
{% else %}
{% if not ancestor.has_parents %}
╶
{% else %}
├
{% endif %}
{% endif %}
{% endif %}
{% else %}
{% if evarcpl == "on" and not ancestor.spouse.has_parents and ancestor.has_parents %}
┘
{% else %}
{% if evarcpl == "on" and not ancestor.has_parents and ancestor.spouse.has_parents %}
┐
{% else %}
{% if not ancestor.has_parents %}
╴
{% else %}
┤
{% endif %}
{% endif %}
{% endif %}
{% endif %}
{% else %}
{% if xxx % 2 == 0 %}
{% if evarcpl == "on" and not ancestor.spouse.has_parents and ancestor.has_parents %}
┐
{% else %}
{% if evarcpl == "on" and not ancestor.has_parents and ancestor.spouse.has_parents %}
┌
{% else %}
{% if not ancestor.has_parents %}
╷
{% else %}
┬
{% endif %}
{% endif %}
{% endif %}
{% else %}
{% if evarcpl == "on" and not ancestor.spouse.has_parents and ancestor.has_parents %}
┘
{% else %}
{% if evarcpl == "on" and not ancestor.has_parents and ancestor.spouse.has_parents %}
└
{% else %}
{% if not ancestor.has_parents %}
╵
{% else %}
┴
{% endif %}
{% endif %}
{% endif %}
{% endif %}
{% endif %}
{% endif %}
{% endif %}
{% endif %}
</a>
</div>
{% endwith %}
{% endmacro %}
{% macro linechar(nn, yy, oo) %}
<span style="top:{{ top_ }}px;left:{{ left_ }}px;font-family:monospace;margin:0">
{% for i in range(0, nn) %}
{% if oo == 0 %}
{% if "yy" == "evarhi" %}
│
<br>
{% else %}
─
{% if evarso == "on" and evarv < 9 and evarcpl != "on" or evarv < 8 and evarcpl == "on" and nn != 1 %}
───
{% else %}
{% if evarso == "on" and nn != 1 %}─{% endif %}
{% endif %}
{% endif %}
{% else %}
{% if oo == 1 %}
{% if "yy" == "evarhi" %}
─
{% if evarso == "on" and evarv < 9 and evarcpl != "on" or evarv < 8 and evarcpl == "on" and nn != 1 %}
───
{% else %}
{% if evarso == "on" and nn != 1 %}─{% endif %}
{% endif %}
{% else %}
│
<br>
{% endif %}
{% endif %}
{% endif %}
{% endfor %}
</span>
{% endmacro %}
{% macro graph(xx, yy, zz) %}
{% with %}
{% set x_1 = xx - 1 %}
{% with %}
{% set hb = (hbs * 2) if (evarso == "on" and boxsize == 2) else ((hbs) if (evarso == "on") else (hbc)) %}
{% with %}
{% set wb = (wbs * 2) if (evarso == "on" and boxsize == 2) else ((wbs) if (evarso == "on") else (wbc)) %}
{% with %}
{% set wb2 = (wb1 * 2) if (evarso == "on" and boxsize == 2) else ((wb1) if (evarso == "on") else (wbc)) %}
{% if zz == 2 %}
{# foreach not implemented yet #}{# foreach not implemented yet #}{% else %} {# foreach not implemented yet #}{# foreach not implemented yet #}{% endif %}{% endwith %}{% endwith %}{% endwith %}{% endwith %}{% endmacro %}{% macro graphlinks(xx, yy) %}{% with %}{% set hb = (hbs * 2) if (evarso == "on" and boxsize == 2) else ((hbs) if (evarso == "on") else (hbc)) %}{% with %}{% set wb = (wbs * 2) if (evarso == "on" and boxsize == 2) else ((wbs) if (evarso == "on") else (wbc)) %}{% if evarso != "on" %}{# foreach not implemented yet #}
{% endif %}
{% endwith %}
{% endwith %}
{% endmacro %}
{% macro my_title(aa, bb, tt) %}
{{ _("aa:::bb:tt") |capitalize }}
{% endmacro %}
<h2 class="display-5 ml-3">
{{ my_title("ancestors tree of", evarhi, first_name) }} {{ surname }} {{ dates }} ({{ evarv }} {{ _('generation/generations', variant='1') }})
</h2>
{% with %}
{% set boxsize = ("2") if (evarv < 9 and evarcpl != "on" or evarv < 10 and evarcpl == "on") else ("1") %}
{% if evarcpl == "on" and evarv < 4 or evarcpl != "on" and evarv < 3 %}
{{ _("compact tree") |capitalize }}{{ _(":") }} {{ _('specify::generation/generations', variant='0') }} > 3.
{% else %}
{% with %}
{% set vvv = (evarv) if (evarcpl == "on") else (evarv + 1) %}
{% with %}
{% set mmm = ("2") if (evarso == "on" and boxsize == 2) else ("1") %}
{% with %}
{% set nbc = nth("/0/1/1/3/3/7/7/15/15/31/31/63/63/127/127/255/255/", (vvv + 1) if (evarhi == "H") else (vvv)) %}
{% with %}
{% set nbl = nth("/0/1/1/3/3/7/7/15/15/31/31/63/63/127/127/255/255/", (vvv) if (evarhi == "H") else (vvv + 1)) %}
{% with %}
{% set widc = mmm * nbc * wbc %}
{% with %}
{% set wids = mmm * nbc * wbs %}
{% with %}
{% set higc = mmm * nbl * hbc %}
{% with %}
{% set higs = mmm * nbl * hbs %}
{% if evarv >= 3 %}
{% if evarhi == "I" %}
{% if evarso == "on" %}
{% if evarv < 13 and evarcpl == "on" %}
<div id="hi-tree1" style="width:{{ wids }}px;height:{{ higs }}px">
{{ graphlinks(evarv, "I") }}{{ graph(evarv, "I", 2) }}
</div>
{% else %}
{% if evarv < 12 and evarcpl != "on" %}
<div id="hi-tree1" style="width:{{ wids }}px;height:{{ higs }}px">
{{ graphlinks(evarv + 1, "I") }}{{ graph(evarv + 1, "I", 1) }}
</div>
{% else %}
{{ _("compact tree") |capitalize }}{{ _(":") }} {{ _('specify::generation/generations', variant='0') }}
{% if evarcpl == "on" %}
< 13.
{% else %}
< 12.
{% endif %}
{% endif %}
{% endif %}
{% else %}
{% if evarv < 14 and evarcpl == "on" %}
<div id="hi-tree1">{{ graphlinks(evarv, "I") }}{{ graph(evarv, "I", 2) }}</div>
{% else %}
{% if evarv < 13 and evarcpl != "on" %}
<div id="hi-tree1">{{ graphlinks(evarv + 1, "I") }}{{ graph(evarv + 1, "I", 1) }}</div>
{% else %}
{{ _("compact tree") |capitalize }}{{ _("couples") }}{{ _(":") }} {{ _('specify::generation/generations', variant='0') }}
{% if evarcpl == "on" %}
< 14.
{% else %}
< 13.
{% endif %}
{% endif %}
{% endif %}
{% endif %}
{% else %}
{% if evarhi == "H" %}
{% if evarso == "on" %}
{% if evarv < 13 and evarcpl == "on" %}
<div id="hi-tree1" style="width:{{ wids }}px;height:{{ higs }}px">
{{ graphlinks(evarv, "H") }}{{ graph(evarv, "H", 2) }}
</div>
{% else %}
{% if evarv < 12 and evarcpl != "on" %}
<div id="hi-tree1" style="width:{{ wids }}px;height:{{ higs }}px">
{{ graphlinks(evarv + 1, "H") }}{{ graph(evarv + 1, "H", 1) }}
</div>
{% else %}
{{ _("compact tree") |capitalize }}{{ _(":") }} {{ _('specify::generation/generations', variant='0') }}
{% if evarcpl == "on" %}
< 13.
{% else %}
< 12.
{% endif %}
{% endif %}
{% endif %}
{% else %}
{% if evarv < 14 and evarcpl == "on" %}
<div id="hi-tree1">{{ graphlinks(evarv, "H") }}{{ graph(evarv, "H", 2) }}</div>
{% else %}
{% if evarv < 13 and evarcpl != "on" %}
<div id="hi-tree1">{{ graphlinks(evarv + 1, "H") }}{{ graph(evarv + 1, "H", 1) }}</div>
{% else %}
{{ _("compact tree") |capitalize }}{{ _(":") }} {{ _('specify::generation/generations', variant='0') }}
{% if evarcpl == "on" %}
< 14.
{% else %}
< 13.
{% endif %}
{% endif %}
{% endif %}
{% endif %}
{% else %}
no hi
{% endif %}
{% endif %}
{% endif %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endif %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}

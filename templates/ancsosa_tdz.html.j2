{# 
  Generated by JinjaGenerator for template 'templm/ancsosa_tdz'
    at 2025-10-26T20:25:21.523344

  Used macros:
  - link(aa, xx)
  - link_dates1(xx)
  - link_marriage1(xx)
  - link_parents()
  - imgtdz(xx)
  - info3(xx)
  - nb_fam(xx)
  - link_rel(xx)
  - symbol2(xx)
  - symbol1(xx)
  - male_line(xx, z1)
  - female_line(xx, z1)
  - one_line(z1)
  - tX()
  - tY()

  Used includes:
  - raw include

  Used variables:
  - wizard (x7)
  - cancel_links (x11)
  - sp (x3)
  - xx.index (x3)
  - xx.has_birth_date (x1)
  - xx.has_baptism_date (x1)
  - xx.birth_date.year (x1)
  - xx.slash_birth_date (x1)
  - xx.baptism_date.year (x1)
  - xx.slash_baptism_date (x1)
  - xx.has_birth_place (x2)
  - xx.has_baptism_place (x2)
  - xx.birth_place (x1)
  - xx.baptism_place (x1)
  - xx.is_dead (x1)
  - xx.has_death_date (x1)
  - xx.has_burial_date (x1)
  - xx.death_date.year (x1)
  - xx.slash_death_date (x1)
  - xx.burial_date.year (x1)
  - xx.slash_burial_date (x1)
  - xx.has_death_place (x2)
  - xx.has_burial_place (x2)
  - xx.death_place (x1)
  - xx.burial_place (x1)
  - xx.has_image (x1)
  - xx.image_url (x1)
  - xx (x3)
  - xx.has_nobility_titles (x1)
  - xx.nobility_title (x1)
  - xx.has_occupation (x1)
  - xx.occupation (x1)
  - xx.computable_age (x1)
  - xx.age (x1)
  - xx.computable_death_age (x1)
  - xx.death_age (x1)
  - xx.has_consanguinity (x1)
  - xx.consanguinity (x1)
  - xx.same (x2)
  - xx.nb_families (x2)
  - xx.nb_children (x1)
  - xx.has_siblings (x1)
  - xx.has_parents (x1)
  - xx.has_sosa (x1)
  - xx.access (x2)
  - ltmp (x1)
  - birth_symbol (x1)
  - lazy_force (x7)
  - lazy_printed (x2)
  - l1 (x2)
  - death_symbol (x1)
  - l2 (x1)
  - family.index (x3)
  - left (x7)
  - ltmf (x1)
  - index (x5)
  - nb_children (x3)
  - slash_marriage_date (x2)
  - marriage_place (x2)
  - evar.only (x2)
  - evar.cgl (x1)
  - evar.image (x2)
  - evar.t (x3)
  - evar.i1 (x2)
  - evar.l (x4)
  - ancestor.father_sosa (x3)
  - ancestor.anc_sosa (x3)
  - ancestor.has_parents (x1)
  - ancestor.first_name (x1)
  - ancestor.surname (x1)
  - ancestor.index (x4)
  - ancestor (x1)
  - ancestor.anc_sosa.v (x3)
  - ancestor.same (x1)
  - ltap (x1)
  - lai (x1)
  - bvar.show_consang (x1)
  - manitou (x1)
  - level (x1)
  - self (x1)
  - pvar[1].mark_descendants (x1)
  - pvar[1] (x1)
  - pvar[1].dates (x1)
  - count (x1)
  - has_sosa (x1)
  - reset_count (x1)
#}
<!-- $Id: ancsosa_tdz.txt,v 7.00 2015/04/15 23:36:21 mr Exp $ -->
{% with %}
    {% set lai = "alt=""_("image/images", variant='0')""" %}
    {% with %}
        {% set ltap = (" title=""_("add::parents")"" ") if (( wizard and ( not cancel_links ) )) %}
        {% with %}
            {% set ltmf = (" title=""_("modify::family/families", variant='0')"" ") if (( wizard and ( not cancel_links ) )) %}
            {% with %}
                {% set ltmp = (" title=""_("modify::person/persons", variant='0')"" ") if (( wizard and ( not cancel_links ) )) %}
                {% macro link(aa, xx) %}
                    {% if cancel_links %}
                        xx
                    {% else %}
                        <a href="/aa">xx</a>
                    {% endif %}
                {% endmacro %}
                {% macro link_dates1(xx) %}
                    {{ sp }}
                    {% if ( wizard and ( not cancel_links ) ) %}
                        <a id="mi{{ xx.index }}"
                           class="date"
                           href="#mi{{ xx.index }}"
                           {{ ltmp }}
                           onclick="window.open('/m=MOD_IND;i={{ xx.index }}');">
                        {% endif %}
                        {{ lazy_print(birth_symbol) }}
                        {% if ( xx.has_birth_date or xx.has_baptism_date ) %}
                            {% if ( xx.birth_date.year != "" ) %}
                                <tt>{{ lazy_force }}</tt>{{ xx.slash_birth_date }}
                            {% else %}
                                {% if ( xx.baptism_date.year != "" ) %}<tt>{{ lazy_force }}</tt>{{ xx.slash_baptism_date }}{% endif %}
                            {% endif %}
                        {% endif %}
                        {% if ( xx.has_birth_place or xx.has_baptism_place ) %}
                            {{ sp }}{{ lazy_force }}
                            {% if xx.has_birth_place %}
                                {{ xx.birth_place }}
                            {% else %}
                                {% if xx.has_baptism_place %}{{ xx.baptism_place }}{% endif %}
                            {% endif %}
                        {% endif %}
                        {% with %}
                            {% set l1 = (" <br>") if (lazy_printed) %}
                            {% if xx.is_dead %}
                                {{ l1 }}{{ lazy_print(death_symbol) }}
                                {% if ( xx.has_death_date or xx.has_burial_date ) %}
                                    {% if ( xx.death_date.year != "" ) %}
                                        <tt>{{ lazy_force }}</tt>{{ xx.slash_death_date }}
                                    {% else %}
                                        {% if ( xx.burial_date.year != "" ) %}<tt>{{ lazy_force }}</tt>{{ xx.slash_burial_date }}{% endif %}
                                    {% endif %}
                                {% endif %}
                                {% if ( xx.has_death_place or xx.has_burial_place ) %}
                                    {{ sp }}{{ lazy_force }}
                                    {% if xx.has_death_place %}
                                        {{ xx.death_place }}
                                    {% else %}
                                        {% if xx.has_burial_place %}{{ xx.burial_place }}{% endif %}
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                            {% with %}
                                {% set l2 = (" ") if (lazy_printed) else (lazy_force) %}
                                {% if ( wizard and ( not cancel_links ) ) %}
                                    {% if ( ( l1 == "" ) and ( l2 == "" ) ) %}-{% endif %}
                                </a>
                            {% endif %}
                        {% endwith %}
                    {% endwith %}
                {% endmacro %}
                {% macro link_marriage1(xx) %}
                    {% if ( wizard and ( not cancel_links ) ) %}
                        <a id="mf{{ family.index }}"
                           class="date p_{{ left }}"
                           href="#mf{{ family.index }}"
                           {{ ltmf }}
                           onclick="window.open('/m=MOD_FAM&i={{ family.index }}&ip={{ index }}');"><span>&amp;</span>
                            {% if ( nb_children > 1 ) %}
                                {{ nb_children }}
                                <br>
                            {% endif %}
                        {{ slash_marriage_date }} {{ marriage_place }}</a>
                    {% else %}
                        <span>&amp;</span>{{ slash_marriage_date }} {{ marriage_place }}
                        <br>
                        &amp;{{ nb_children }}
                    {% endif %}
                {% endmacro %}
                {% macro link_parents() %}
                    {% if ( ( evar.only != "on" ) and ( ancestor.father_sosa != "" ) ) %}
                        <a href="#i{{ ancestor.father_sosa }}"
                           title="{{ _("father/mother", variant='0') }} : {{ ancestor.father_sosa }}"><strong>{{ ancestor.anc_sosa }}</strong></a>
                    {% else %}
                        {% if ( ( evar.cgl != "on" ) and ( wizard and ( ( not ancestor.has_parents ) and ( ( ancestor.first_name != "?" ) and ( ancestor.surname != "?" ) ) ) ) ) %}
                            <a style="color: rgb(255,0,0)"
                               href="#mi{{ ancestor.index }}"
                               onclick="window.open('/m=ADD_PAR;ip={{ ancestor.index }}');"
                               {{ ltap }}><strong>{{ ancestor.anc_sosa }}</strong></a>
                        {% else %}
                            <strong>{{ ancestor.anc_sosa }}</strong>
                        {% endif %}
                    {% endif %}
                {% endmacro %}
                {% macro imgtdz(xx) %}
                    {% if ( ( evar.image != "off" ) and xx.has_image ) %}
                        <img class="imgtdz" src="{{ xx.image_url }}" {{ lai }} title="{{ xx }}" />
                    {% endif %}
                {% endmacro %}
                {% macro info3(xx) %}
                    {% if xx.has_nobility_titles %}
                        <em>{{ xx.nobility_title }}</em>
                        <br>
                    {% endif %}
                    {% if xx.has_occupation %}
                        <span class="highlight1">{{ xx.occupation }}</span>
                        <br>
                    {% endif %}
                    {% if xx.computable_age %}
                        {{ _("age") }} : {{ xx.age }}
                        <br>
                    {% endif %}
                    {% if xx.computable_death_age %}
                        {{ xx.death_age }}
                        <br>
                    {% endif %}
                    {% if ( xx.has_consanguinity and ( ( bvar.show_consang != "no" ) or manitou ) ) %}{{ xx.consanguinity }}{% endif %}
                {% endmacro %}
                {% macro nb_fam(xx) %}
                    {% if ( xx.same == "" ) %}
                        {% if ( not cancel_links ) %}
                            <a href="/m=A&t=X&i={{ index }}&i1={{ ancestor.index }}&l={{ level }}&image={{ evar.image }}"
                               title="^^">
                            {% endif %}
                            {{ symbol1("xx") }}
                            {% if ( xx.nb_families > 1 ) %}
                                <br>
                                {{ xx.nb_families }}&amp;{{ xx.nb_children }}
                            {% endif %}
                            {% if ( not cancel_links ) %}</a>{% endif %}
                    {% else %}
                        {{ link_rel(xx.same) }}
                    {% endif %}
                {% endmacro %}
                {% macro link_rel(xx) %}
                    {% if cancel_links %}
                        ==
                        <br>
                        xx
                    {% else %}
                        <a href="/em=R&ei={{ ancestor.index }}&m=NG;select={{ index }}&n=1&t=PN&et=A&spouse=on&image=on"
                           title="{{ ancestor }} …{{ _("relationship") }}… {{ self }}">==
                            <br>
                        xx</a>
                    {% endif %}
                {% endmacro %}
                {% macro symbol2(xx) %}
                    {% if xx.has_siblings %}
                        &diams;
                    {% else %}
                        {% if xx.has_parents %}
                            &loz;
                        {% else %}
                            -
                        {% endif %}
                    {% endif %}
                {% endmacro %}
                {% macro symbol1(xx) %}
                    {% if xx.has_sosa %}
                        <span class="color_sosa">{{ symbol2("xx") }}</span>
                    {% else %}
                        {{ symbol2("xx") }}
                    {% endif %}
                {% endmacro %}
                {% macro male_line(xx, z1) %}
                    <td>{{ link_parents() }}{{ nb_fam("xx") }}</td>
                    <td z1>
                        {{ imgtdz("xx") }}
                        <div>{{ link(xx.access, xx) }}</div>
                        {{ info3("xx") }}
                    </td>
                    <td style="text-align:{{ left }}">{{ link_dates1("xx") }}</td>
                {% endmacro %}
                {% macro female_line(xx, z1) %}
                    <td style="text-align:{{ left }}">{{ link_dates1("xx") }}</td>
                    <td z1>
                        {{ imgtdz("xx") }}
                        <div>{{ link(xx.access, xx) }}</div>
                        {{ info3("xx") }}
                    </td>
                    <td>{{ link_parents() }}{{ nb_fam("xx") }}</td>
                {% endmacro %}
                {% macro one_line(z1) %}
                    {% if ( ( ancestor.anc_sosa.v % 2 ) == 0 ) %}
                        <tr id="i{{ ancestor.anc_sosa.v }}">
                            {{ male_line('ancestor', 'z1') }}
                            <td style="text-align:{{ left }}">
                                {% if ( ancestor.same == "" ) %}{# foreach not implemented yet #}{% endif %}
                            </td>
                        {% endif %}
                        {% if ( ( ancestor.anc_sosa.v % 2 ) == 1 ) %}
                            {{ female_line('ancestor', 'z1') }}
                        </tr>
                    {% endif %}
                {% endmacro %}
                {% macro tX() %}
                    {{ pvar[1].mark_descendants }}{# foreach not implemented yet #}{% endmacro %}{% macro tY() %}{# foreach not implemented yet #}
                    <tr>
                        <td colspan="9">{{ _("total") |capitalize }} : {{ count }} [person/persons]1@(c)</td>
                    </tr>
                {% endmacro %}
                {% if ( ( evar.only != "on" ) and ( evar.t != "X" ) ) %}{{ togen() }}{% endif %}
                {% if ( evar.t == "X" ) %}
                    <p>{{ _("up to") |capitalize }} {{ pvar[1] }} {{ pvar[1].dates }}</p>
                    {% if ( not cancel_links ) %}
                        <div class="menu">
                            {% if has_sosa %}
                                <span><a href="/m=X&t=X&t1=1&i={{ evar.i1 }}&i1={{ index }}&siblings=on&alias=on&spouse=on&parents=on&rel=on&notes=on&src=on&hide=on&witn=on&v={{ evar.l }}&maxv={{ evar.l }}&l={{ evar.l }}">{{ _("descendants", variant='0') |capitalize }}</a></span>
                            {% endif %}
                            <span><a href="/m=A&t=G&i={{ index }}&i1={{ evar.i1 }}&siblings=on&alias=on&spouse=on&parents=on&rel=on&witn=on&notes=on&src=on&hide=on&l={{ evar.l }}">{{ _("ancestors", variant='0') |capitalize }}</a></span>
                        </div>
                    {% endif %}
                {% endif %}
                {{ reset_count }}
                <table summary="ancestors" class="short_display_table">
                    <colgroup>
                        <col width="10" />
                        <col width="400" />
                        <col width="400" align="{{ left }}" />
                        <col width="400" align="{{ left }}" />
                        <col width="400" align="{{ left }}" />
                        <col width="400" />
                        <col width="10" />
                    </colgroup>
                    {% if ( evar.t == "X" ) %}
                        {{ tX() }}
                    {% else %}
                        {{ tY() }}
                    {% endif %}
                </table>
            {% endwith %}
        {% endwith %}
    {% endwith %}
{% endwith %}

{# 
  Generated by JinjaGenerator for template 'list'
    at 2025-10-29T22:35:02.432956

  Used macros:
  - get_ip(n)
  - get_var(vv, i)
  - get_pl(i)
  - get_sub(nn, ss)
  - get_marriage(myindex)
  - get_value(myindex, param)
  - book_of(xx)
  - evt(vv, tt, ii)
  - nbmds(xx, yy, tt, kk)
  - nbmds_m(xx, yy, tt, kk)
  - tags(xx, tt, ss)

  Used includes:
  - css
  - hed
  - home
  - perso_utils
  - trl
  - copyr
  - js

  Used variables:
  - lang (x1)
  - e.surn (x5)
  - e.wide (x1)
  - e.in (x1)
  - e.pi (x1)
  - e.data (x3)
  - e.dates (x3)
  - e.parents (x3)
  - e.nb (x10)
  - e.datesort (x4)
  - e.bi (x1)
  - e.ba (x1)
  - e.ma (x1)
  - e.de (x1)
  - e.bu (x1)
  - e.long (x1)
  - e.f_sort (x1)
  - e.k (x2)
  - e.vv (x2)
  - e.max_rlm_nbr (x2)
  - body_prop (x1)
  - message_to_wizard (x1)
  - evar_cur.vv.i (x1)
  - substr_start.nn.ss (x1)
  - qvar.myindex.marriage_places (x1)
  - qvar.myindex.has_parents (x1)
  - qvar.myindex.param (x2)
  - url_set.dates[0] (x1)
  - url_set.dates (x1)
  - url_set.parents[0] (x1)
  - url_set.parents (x1)
  - url_set.datesort[1] (x1)
  - url_set.datesort (x1)
  - xx (x5)
  - myindex (x10)
  - empty_sorted_list (x1)
  - i (x8)
  - s (x2)
  - k (x1)
  - so (x1)
  - dates (x1)
  - surname (x1)
  - first_name (x1)
  - occ (x1)
  - b.max_rlm_nbr (x2)
  - max_rlm_nbr (x2)
  - query_time (x1)
#}

<!DOCTYPE html>
<html lang="{{ lang }}">
    <head>
        <!-- $Id: list.txt v7.1 23/07/2024 00:28:00 $ -->
        <title>{{ _("list/list (ancestors)") |capitalize }} {{ _("of") }} {{ _('person/persons', variant='0') }}
            {% if e.surn != "" %}{{ _("by") }} {{ _('surname/surnames', variant='0') }}{% endif %}
        {{ _("by") }} {{ _('place/places', variant='0') }}</title>
        <meta name="robots" content="none">
        <meta charset="UTF-8">
        <meta name="viewport"
              content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="shortcut icon"
              href="{{ url_for("static", path="images/favicon_gwd.png") }}">
        {% include 'css.html.j2' %}
    </head>
    <body {{ body_prop }}>
        {% include 'hed.html.j2' %}
        {% include 'home.html.j2' %}
        {{ message_to_wizard }}
        <div class="container{% if e.wide == "on" %}-fluid{% endif %}">
            {% include 'perso_utils.html.j2' %}
            {% macro get_ip(n) %}
                {{ e.in }}
            {% endmacro %}
            {% macro get_var(vv, i) %}
                {{ evar_cur.vv.i }}
            {% endmacro %}
            {% macro get_pl(i) %}
                {{ e.pi }}
            {% endmacro %}
            {% macro get_sub(nn, ss) %}
                {{ substr_start.nn.ss }}
            {% endmacro %}
            {% macro get_marriage(myindex) %}
                {{ qvar.myindex.marriage_places }}
            {% endmacro %}
            {% macro get_value(myindex, param) %}
                {% if "param" == "father" or "param" == "mother" %}
                    {% if qvar.myindex.has_parents %}{{ qvar.myindex.param }}{% endif %}
                {% else %}
                    {{ qvar.myindex.param }}
                {% endif %}
            {% endmacro %}
            {% if e.data == "place" %}
                <h1>
                    {{ _("list/list (ancestors)") |capitalize }} {{ _("of") }} {{ _('person/persons', variant='1') }}
                    {% if e.surn != "" %}{{ _("by") }} {{ _('surname/surnames', variant='0') }}{% endif %}
                    {{ _("by") }} {{ _('place/places', variant='0') }}
                </h1>
            {% else %}
                <h1>{{ _("list/list (ancestors)") |capitalize }} {{ _("of") }} {{ _('person/persons', variant='1') }}</h1>
            {% endif %}
            <div class="btn-toolbar mt-3 ml-3"
                 role="toolbar"
                 aria-label="Toolbar for list of individuals">
                <a role="button"
                   href="{% if e.dates != 0 %}{{ url_set.dates[0] }}{% else %}{{ url_set.dates }}{% endif %}"
                   class="btn-link{% if e.dates != 0 %} text-muted{% endif %}"
                   title="{% if e.dates != 0 %}{{ _('visualize/show/hide/summary', variant='2') |capitalize }}{% else %}{{ _('visualize/show/hide/summary', variant='1') |capitalize }}{% endif %} {{ _('date/dates', variant='1') }}">
                    <i class="fa fa-calendar-days fa-fw fa-lg mr-1"></i>{{ _('date/dates', variant='1') |capitalize }}
                </a>
                <a role="button"
                   href="{% if e.parents != 0 %}{{ url_set.parents[0] }}{% else %}{{ url_set.parents }}{% endif %}"
                   title="{% if e.parents != 0 %}{{ _('visualize/show/hide/summary', variant='2') |capitalize }}{% else %}{{ _('visualize/show/hide/summary', variant='1') |capitalize }}{% endif %} {{ _("parents") }}"
                   class="btn-link ml-3{% if e.parents != 0 %} text-muted{% endif %}">
                    <i class="fa-solid fa-user-group fa-fa fa-lg mr-1"></i>{{ _("parents") |capitalize }}
                </a>
                {% if e.nb != 1 %}
                    <a role="button"
                       href="{% if e.datesort != 1 %}{{ url_set.datesort[1] }}{% else %}{{ url_set.datesort }}{% endif %}"
                       class="btn-link ml-3">
                        <i class="fa fa-arrow-down-{% if e.datesort == 1 %}a-z{% else %}1-9{% endif %} fa-fw fa-lg mr-1"></i>{{ _('sort by/branch/alphabetic order', variant='0') |capitalize }}
                        {% if e.datesort == 1 %}
                            {{ _('sort by/date begin/alphabetic order/nb individuals/nb events', variant='2') }}
                        {% else %}
                            {{ _('date/dates', variant='1') }}
                        {% endif %}
                    </a>
                {% endif %}
            </div>
            {% with %}
                {% set opt = (("&bi=on") if (e.bi == "on")+("&bp=on") if (e.ba == "on")+("&ma=on") if (e.ma == "on")+("&de=on") if (e.de == "on")+("&bu=on") if (e.bu == "on")+("&long=on") if (e.long == "on")+("&f_sort=on") if (e.f_sort == "on")) if (e.data == "place") %}
                {% with %}
                    {% set k = (e.k) if (e.k != "") %}
                    {% macro book_of(xx) %}
                        {{ _("book of %s:::xx") |capitalize }}
                    {% endmacro %}
                    {% macro evt(vv, tt, ii) %}
                        {% if "vv" != "bi" %},{% endif %}
                        {% if e.vv != "on" %}
                            <s>
                            {% else %}
                                <span>
                                {% endif %}
                                tt ii
                                {% if e.vv != "on" %}
                                </s>
                            {% else %}
                            </span>
                        {% endif %}
                    {% endmacro %}
                    <div class="mt-3">
                        {% if e.surn != "" %}
                            {{ _('surname/surnames', variant='0') |capitalize }}{{ _(":") }} <span class="text-primary">{{ e.surn }}</span>.
                        {% endif %}
                        {% if e.data == "place" %}
                            {{ _('event/events', variant='1') |capitalize }}{{ _(":") }}
                            {{ evt("bi", _('birth') , "N") }}{{ evt("ba", _('baptism') , "B") }}{{ evt("ma", _('marriage event') , "M") }}{{ evt("de", _('death') , "D") }}{{ evt("bu", _('burial') , "S") }}.
                        {% endif %}
                    </div>
                    {% macro nbmds(xx, yy, tt, kk) %}
                        {% if xx != "" and xx == "kk" %}
                            yy
                        {% else %}
                            {% if "tt" == 1 %}&nbsp;{% endif %}
                        {% endif %}
                    {% endmacro %}
                    {% macro nbmds_m(xx, yy, tt, kk) %}
                        {% if xx != "" and "kk" in xx or xx == "kk" %}
                            yy
                        {% else %}
                            {% if "tt" == 1 %}&nbsp;{% endif %}
                        {% endif %}
                    {% endmacro %}
                    {% macro tags(xx, tt, ss) %}
                        {% with %}
                            {% set myindex = "xx" %}
                            {% with %}
                                {% set birthplace = get_value(myindex, "birth_place_raw") %}
                                {% with %}
                                    {% set baptismplace = get_value(myindex, "baptism_place_raw") %}
                                    {% with %}
                                        {% set marriageplace = get_marriage(myindex) %}
                                        {% with %}
                                            {% set deathplace = get_value(myindex, "death_place_raw") %}
                                            {% with %}
                                                {% set burialplace = get_value(myindex, "burial_place_raw") %}{{ nbmds('birthplace', 'N', 'tt', 'ss') }}{{ nbmds('baptismplace', 'B', 'tt', 'ss') }}{{ nbmds_m('marriageplace', 'M', 'tt', 'ss') }}{{ nbmds('deathplace', 'D', 'tt', 'ss') }}{{ nbmds('burialplace', 'S', 'tt', 'ss') }}
                                            {% endwith %}
                                        {% endwith %}
                                    {% endwith %}
                                {% endwith %}
                            {% endwith %}
                        {% endwith %}
                    {% endmacro %}
                    {{ empty_sorted_list }}
                    {% if e.nb != "" %}
                        {% for i in range(0, e.nb) %}
                            {% with %}
                                {% set myindex = get_ip(i) %}
                                {% with %}
                                    {% set first_name = get_value(myindex, "first_name") %}
                                    {% with %}
                                        {% set surname = get_value(myindex, "surname") %}
                                        {% with %}
                                            {% set occ = get_value(myindex, "occ") %}
                                            {% with %}
                                                {% set dates = get_value(myindex, "dates") %}
                                                {% with %}
                                                    {% set s = get_var("p", i) %}
                                                    {% with %}
                                                        {% set so = (k) if (s == "") else (s) %}{{ add_in_sorted_list(so, (dates) if (e.datesort == 1) else ((surname) if (e.surn == "")+first_name+occ), myindex, i) }}
                                                    {% endwith %}
                                                {% endwith %}
                                            {% endwith %}
                                        {% endwith %}
                                    {% endwith %}
                                {% endwith %}
                            {% endwith %}
                        {% endfor %}
                    {% endif %}
                    <div class="mt-2">{# foreach not implemented yet #}</div>
                    {% with %}
                        {% set max_rlm_nbr = (e.max_rlm_nbr) if (e.max_rlm_nbr != "") else ((b.max_rlm_nbr) if (b.max_rlm_nbr != "") else ("80")) %}
                        <div class="ml-2 mt-2">
                            {% if e.nb != "" %}
                                {% if e.nb == 1 %}
                                {% else %}
                                    {% if e.nb > 1 and e.nb < max_rlm_nbr %}
                                        <a role="button"
                                           title="Try RLM graph to link all individuals (probably fails if not same list by surname by place)"
                                           href="/&m=RLM{# foreach not implemented yet #}{% for i in range(0, e.nb) %}{% if i != 0 %}&t{{ i }}={{ tags(get_ip(i) , get_var("p", i)) }}{% else %}&t{{ e.nb }}={{ tags(get_ip(0) , get_var("p", i)) }}{% endif %}{% endfor %}">
                                            <i class="fa fa-bezier-curve mr-2"></i>{{ _("multi relations graph") |capitalize }}
                                        </a>
                                    {% else %}
                                        {{ e.nb }} {{ _('person/persons', variant='1') }}{{ _(":") }} {{ _("RLM graph impracticable") }} (max {{ max_rlm_nbr }})
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                        </div>
                        {% include 'trl.html.j2' %}
                        {% include 'copyr.html.j2' %}
                    </div>
                    {% include 'js.html.j2' %}
                    {{ query_time }}
                </body>
            </html>
        {% endwith %}
    {% endwith %}
{% endwith %}

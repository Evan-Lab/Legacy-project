{# 
  Generated by JinjaGenerator for template 'templm/perso'
    at 2025-10-26T15:16:29.318215

  Used macros:
  - chg_evt_fam_ord(xx)
  - menu()
  - buttons()
  - init_count(prev_count)
  - a_title1(z1, z2)
  - a_title2(z1, z2)
  - a_title(xx)
  - link_dates(xx)
  - link_marriage(xx)
  - link_name(xx)
  - link_name1(xx, yy, zz)
  - link_image(xx)
  - somebody(xx)
  - somebody1(xx, yy, zz)
  - child_long_info(curlev, maxlev)
  - children_list()
  - advanced(z1, z2)
  - content_family(xx, yy)
  - parents(z1, z2, z3)
  - consang()
  - implex()
  - anc_families()
  - lex(xx, yy)
  - relations_tree(z1)
  - relation_computing(himxx, herxx, typexx)
  - age_at(xx)
  - link_s(z1, z2)
  - nb_days(xx)
  - compute_age1(z1, z2, z3)
  - compute_age(z1, z2)
  - on_edate(z1)
  - curr_age()
  - timeline_tree(z1)
  - event_tree(z1)
  - birth_event()
  - baptism_event()
  - death_event()
  - burial_event()
  - marriage_event()
  - other_event()
  - one_event(z1)
  - witness_at_event(xx)
  - timeline()
  - descmax()
  - desc(xx)
  - ascmax()
  - asc(xx)
  - nav_with_sosa_ref(xx)
  - sosainfo()

  Used includes:
  - css
  - js_perso_accesskey
  - tools
  - hed
  - timeline
  - trl
  - copyr
  - js

  Used variables:
  - lang (x1)
  - self.first_name (x1)
  - self.surname (x1)
  - self (x8)
  - self.access (x3)
  - self.index (x1)
  - occ (x10)
  - index (x33)
  - bvar.wide (x4)
  - bvar.birth_symbol (x2)
  - bvar.death_symbol (x2)
  - bvar.always_surname (x1)
  - bvar.maxlev (x4)
  - bvar.menu (x1)
  - bvar.history_diff (x1)
  - bvar.can_send_image (x1)
  - bvar.setup_link (x1)
  - bvar.setup_http (x2)
  - bvar.access_by_key (x3)
  - bvar.default_sosa_ref (x2)
  - bvar.event_age (x10)
  - bvar.no_image_for_visitor (x1)
  - bvar.misc (x2)
  - bvar.hide_advanced_request (x1)
  - bvar.css (x2)
  - bvar.can_kill_ancestors (x1)
  - bvar.timeline (x1)
  - evar.wide (x21)
  - evar.always_surname (x1)
  - evar.maxlev (x18)
  - evar.asclev (x17)
  - evar.image (x22)
  - evar.spouse (x19)
  - evar.age (x24)
  - evar.del (x13)
  - evar.iz (x1)
  - evar.nz (x1)
  - evar.pz (x1)
  - evar.misc (x14)
  - evar.ocz (x1)
  - lwide1 (x3)
  - lwide (x2)
  - is_dead (x3)
  - computable_death_age (x2)
  - birth_date.day (x2)
  - birth_date.prec (x2)
  - birth_date.julian_day (x4)
  - birth_date.year (x3)
  - birth_date.date (x1)
  - death_date.day (x1)
  - death_date.prec (x1)
  - death_date.julian_day (x2)
  - death_date.year (x1)
  - computable_age (x4)
  - has_birth_date (x1)
  - today.julian_day (x2)
  - today.year (x3)
  - today (x1)
  - sex (x3)
  - has_children (x9)
  - max_desc_level (x10)
  - l_maxlev0 (x2)
  - browsing_with_sosa_ref (x7)
  - sosa_ref.index (x11)
  - sosa_ref.first_name_key (x2)
  - sosa_ref.surname_key (x2)
  - sosa_ref.occ (x1)
  - sosa_ref (x3)
  - sosa_ref.first_name_key_strip (x1)
  - sosa_ref.surname_key_strip (x1)
  - l_maxlev (x1)
  - wizard (x13)
  - l_on1 (x11)
  - sp (x15)
  - cancel_links (x26)
  - laP (x1)
  - is_male (x3)
  - is_female (x3)
  - laA (x1)
  - has_history (x1)
  - history_file (x2)
  - laD (x1)
  - has_portrait_url (x1)
  - first_name (x7)
  - surname (x8)
  - laI (x1)
  - auto_image_file_name (x1)
  - has_possible_duplications (x1)
  - access (x20)
  - l_url (x6)
  - nl (x19)
  - has_sosa (x4)
  - sosa.v (x1)
  - sosa (x3)
  - first_name_key (x9)
  - surname_key (x12)
  - base.name (x4)
  - l1 (x22)
  - has_parents (x11)
  - version (x2)
  - l_version (x2)
  - l_gwu (x6)
  - l2 (x11)
  - l3 (x2)
  - prefix_set.iz (x3)
  - friend (x1)
  - prefix_base_password (x1)
  - reset_count (x13)
  - prev_count (x1)
  - incr_count (x11)
  - z1.father.death_date.year (x3)
  - z1.father.death_date.prec (x1)
  - z1.father.birth_date.year (x3)
  - z1.father.birth_date.prec (x1)
  - z1.mother.death_date.year (x3)
  - z1.mother.death_date.prec (x1)
  - z1.mother.birth_date.year (x3)
  - z1.mother.birth_date.prec (x1)
  - z1.has_families (x1)
  - z1 (x2)
  - z1.month (x10)
  - z1.day (x12)
  - z1.year (x8)
  - z1.on_date (x2)
  - z2 (x11)
  - z2.month (x11)
  - z2.day (x12)
  - z2.year (x8)
  - death_symbol (x5)
  - xx.has_parents (x2)
  - xx.birth_date.year (x2)
  - xx.birth_date.prec (x2)
  - xx.death_date.year (x4)
  - xx.death_date.prec (x4)
  - xx.computable_death_age (x3)
  - xx.death_age (x3)
  - xx.computable_age (x3)
  - xx.age (x3)
  - xx.has_families (x1)
  - xx.index (x2)
  - xx.dates (x3)
  - xx.computable_marriage_age (x1)
  - xx.marriage_age (x1)
  - xx.spouse.computable_marriage_age (x1)
  - xx.spouse.marriage_age (x1)
  - xx.spouse.has_parents (x1)
  - xx.is_restricted (x2)
  - xx (x2)
  - xx.access (x2)
  - xx.image_html_url (x1)
  - xx.image_url (x1)
  - xx.title (x2)
  - xx.sex (x1)
  - birth_symbol (x4)
  - l_ldates1 (x1)
  - l_ldates (x1)
  - marriage_date.year (x7)
  - marriage_date.day (x2)
  - marriage_date.month (x2)
  - marriage_date.prec (x6)
  - marriage_place (x2)
  - family.index (x3)
  - l_lmarriage1 (x1)
  - marriage_date_place (x1)
  - him (x1)
  - her (x1)
  - l_lmarriage2 (x1)
  - on_marriage_date (x2)
  - yy (x4)
  - nb_children (x2)
  - child_cnt (x3)
  - family_cnt (x7)
  - l_child (x1)
  - curlev (x1)
  - child.has_sosa (x1)
  - child.index (x1)
  - next_chi (x1)
  - has_families (x4)
  - x1 (x2)
  - nb_families (x3)
  - next_spo (x1)
  - spouse.index (x1)
  - has_consanguinity (x1)
  - count (x32)
  - consanguinity (x2)
  - mother.index (x1)
  - mother.has_parents (x2)
  - mother.father.has_parents (x1)
  - mother.mother.has_parents (x1)
  - mother.nb_children (x2)
  - mother.has_siblings (x1)
  - mother (x1)
  - father.index (x1)
  - father.has_parents (x2)
  - father.father.has_parents (x1)
  - father.mother.has_parents (x1)
  - father.nb_children (x2)
  - father.has_siblings (x1)
  - father (x1)
  - max_anc_level (x11)
  - i (x18)
  - laY (x2)
  - laR (x1)
  - has_nephews_or_nieces (x1)
  - laL (x1)
  - l_hh (x4)
  - relation_type (x15)
  - l_rt (x4)
  - himxx.index (x1)
  - l_rt0 (x1)
  - herxx.index (x1)
  - l_rt1 (x1)
  - is_first (x1)
  - l_nbd (x3)
  - z3 (x4)
  - event.age (x5)
  - event.name (x16)
  - event.has_date (x6)
  - event.has_place (x6)
  - event.place (x6)
  - event.spouse (x4)
  - event.has_spouse (x2)
  - event.has_witnesses (x1)
  - event.has_note (x1)
  - event.note (x1)
  - age (x1)
  - birthday (x1)
  - father_age_at_birth (x3)
  - mother_age_at_birth (x3)
  - parents_age (x2)
  - has_linked_page.DEATH (x1)
  - has_linked_page.OCCU (x1)
  - has_linked_page.HEAD (x1)
  - has_linked_page.BNOTE (x2)
  - has_linked_page.NOTE (x2)
  - has_linked_page.BIBLIO (x2)
  - linked_page.DEATH (x1)
  - linked_page.OCCU (x1)
  - linked_page.HEAD (x1)
  - linked_page.BNOTE (x1)
  - linked_page.NOTE (x1)
  - linked_page.BIBLIO (x1)
  - l_ref (x3)
  - has_occupation (x2)
  - occupation (x1)
  - has_linked_pages (x6)
  - lcS (x1)
  - laS (x1)
  - l_sosa_ref (x1)
  - body_prop (x1)
  - message_to_wizard (x1)
  - has_public_name (x2)
  - public_name (x1)
  - has_qualifiers (x5)
  - qualifier (x1)
  - has_image (x1)
  - image_html_url (x1)
  - image_url (x1)
  - has_nobility_titles (x1)
  - has_aliases (x2)
  - has_first_names_aliases (x1)
  - has_surnames_aliases (x1)
  - has_relations (x1)
  - cnt (x2)
  - has_notes (x1)
  - notes (x1)
  - has_sources (x1)
  - lazy_force (x1)
  - lazy_printed (x1)
  - misc_names (x1)
  - query_time (x1)
#}
<!DOCTYPE html>
<html lang="{{ lang }}">
    <head>
        <!-- $Id: templm/perso.txt v7.0 29/02/2016 11:08:07 $ -->
        <title>{{ capitalize(self.first_name) }} {{ capitalize(self.surname) }}
            {% if ( occ != 0 ) %}({{ occ }}){% endif %}
        - #{{ index }}</title>
        <meta name="robots" content="none" />
        <meta charset="utf-8">
        <link rel="shortcut icon"
              href="{{ url_for('static/images/', path='favicon_gwd.png') }}" />
        <link rel="apple-touch-icon"
              href="{{ url_for('static/images/', path='favicon_gwd.png') }}" />
        {% include 'css' %}
        {% include 'js_perso_accesskey' %}
        <style type="text/css">
            {
                % with %
            }

                {
                % set lwide1=bvar.wide"." evar.wide %
            }

                {
                % with %
            }

                {
                % set lwide=("on") if (((lwide1=="on.") or ((lwide1==".on") or (lwide1=="on.on")))) else ("off") %
            }

                {
                % if (lwide=="on") %
            }

            .col1,
            .col2 {
                width: 99%;
            }

            .image_sheet {
                font-size: 89%;
            }

                {
                % else %
            }

            .col1 {
                width: 50%;
                min-width: 290px;
            }

            .col2 {
                width: 47%;
                min-width: 290px;
            }

            .image_sheet {
                font-size: 71%;
            }

                {
                % endif %
            }
        </style>
    </head>
    {% include 'tools' %}
    {% with %}
        {% set l_version = "7.00 - gwmr" %}
        {% with %}
            {% set l_nbd = ((( death_date.julian_day - birth_date.julian_day )) if (( death_date.julian_day > birth_date.julian_day )) else ("0")) if (( is_dead and ( computable_death_age and ( ( birth_date.day != "" ) and ( ( birth_date.prec == "" ) and ( ( death_date.day != "" ) and ( death_date.prec == "" ) ) ) ) ) )) else (((( today.julian_day - birth_date.julian_day )) if (( today.julian_day > birth_date.julian_day )) else ("0")) if (( computable_age and ( has_birth_date and ( ( birth_date.day != "" ) and ( birth_date.prec == "" ) ) ) ))) %}
            {% with %}
                {% set birth_symbol = (bvar.birth_symbol) if (( bvar.birth_symbol != "" )) else ("°") %}
                {% with %}
                    {% set death_symbol = (bvar.death_symbol) if (( bvar.death_symbol != "" )) else ("†") %}
                    {% with %}
                        {% set l_child = ("child") if (( ( bvar.always_surname == "yes" ) and ( evar.always_surname != "no" ) )) else ("child_name") %}
                        {% with %}
                            {% set l_hh = (_(him/her, variant='0')) if (( sex == 0 )) else ((_(him/her, variant='1')) if (( sex == 1 )) else ("0")) %}
                            {% with %}
                                {% set l_maxlev0 = (evar.maxlev) if (( ( evar.maxlev != "" ) and ( evar.maxlev > 0 ) )) else ((bvar.maxlev) if (( bvar.maxlev != "" )) else ("1")) %}
                                {% with %}
                                    {% set l_maxlev = (max_desc_level) if (( has_children and ( ( max_desc_level > 1 ) and ( l_maxlev0 > max_desc_level ) ) )) else (l_maxlev0) %}
                                    {% with %}
                                        {% set l_ref = (sosa_ref.index) if (browsing_with_sosa_ref) else (index) %}
                                        {% with %}
                                            {% set l_url = ("&wide="evar.wide) if (( evar.wide != "" ))("&maxlev="l_maxlev) if (( evar.maxlev != "" ))("&asclev="evar.asclev) if (( evar.asclev != "" ))("&image="evar.image) if (( evar.image != "" ))("&spouse="evar.spouse) if (( evar.spouse != "" ))("&age="evar.age) if (( evar.age != "" ))"&" %}
                                            {% with %}
                                                {% set l_on1 = "target="_blank"" %}
                                                {% with %}
                                                    {% set l_ldates = (("class="nobr del" target="ifr" onclick="javascript:deleted(this);"
                                                                                                        href="""/""m=DEL_IND_OK;i=") if (( evar.del == "on" )) else ("class="nobr" "l_on1" href="""/""m=MOD_IND;i=")) if (wizard) else ("href="#") %}
                                                    {% with %}
                                                        {% set l_ldates1 = ((_(delete::person/persons, variant='0')) if (( evar.del == "on" )) else (_(modify::person/persons, variant='0'))) if (wizard) %}
                                                        {% with %}
                                                            {% set l_lmarriage1 = ("class="del" target="ifr" onclick="javascript:deleted(this);"
                                                                                                                        href="""/""m=DEL_FAM_OK;") if (( ( evar.del == "on" ) and wizard )) else ((l_on1sp"href="""/""m=MOD_FAM;") if (wizard) else ("href="#")) %}
                                                            {% with %}
                                                                {% set l_lmarriage2 = ((_(delete::family/families, variant='0')) if (( ( evar.del == "on" ) and wizard )) else ((_(modify::family/families, variant='0')) if (wizard))) if (( not cancel_links )) %}
                                                                {% macro chg_evt_fam_ord(xx) %}
                                                                    {{ _(modify family %s event order:::xx, variant='0') |capitalize }}
                                                                {% endmacro %}
                                                                {% macro menu() %}
                                                                    <div class="menu{{ bvar.menu }}" style="left:10px;top:0px;height:17px">
                                                                        {% if wizard %}
                                                                            <span style="width:270px">⟔<span class="s_menu">
                                                                                <a id="mod_ind" href="/m=MOD_IND;i={{ index }}" {{ laP }} {{ l_on1 }}>↺ {{ _(modify::person/persons, variant='0') |capitalize }}</a><a id="chg_evt_ind" href="/m=CHG_EVT_IND_ORD;i={{ index }}" {{ l_on1 }}>⇳ {{ _(invert::event/events, variant='1') |capitalize }}</a>
                                                                                {% if ( is_male or is_female ) %}
                                                                                    <a id="add_fam" href="/m=ADD_FAM;ip={{ index }}" {{ laA }} {{ l_on1 }}>👫 {{ _(add::family/families, variant='0') |capitalize }}</a>
                                                                                {% else %}
                                                                                    <a href="/m=ADD_FAM&ip={{ index }}&sex=M" {{ l_on1 }}>👫 {{ _(add::family/families, variant='0') |capitalize }} ({{ _(male/female/neuter, variant='0') }})</a><a href="/m=ADD_FAM&ip={{ index }}&sex=F" {{ l_on1 }}>👫 {{ _(add::family/families, variant='0') |capitalize }} ({{ _(male/female/neuter, variant='1') }})</a>
                                                                                {% endif %}
                                                                                {# foreach not implemented yet #}
                                                                                {% if has_children %}<a href="/m=CHG_CHN;ip={{ index }}">👦👧 {{ _(change children's names)|capitalize }}</a>{% endif %}
                                                                                 {% if ( ( bvar.history_diff == "yes" ) and has_history ) %}
                                                                                     <a id="hist"
                                                                                        href="/m=HIST_DIFF&t=DIFF&f={{ history_file }}&new=0&old=1"
                                                                                        style="display:inline-block;
                                                                                               width:125px"
                                                                                        {{ laD }}>≏ {{ _(last diff)|capitalize }}</a>
                                                                                     <a href="/m=HIST_DIFF;t=SUM;f={{ history_file }}"
                                                                                        style="display:inline-block;
                                                                                               width:125px"
                                                                                        title="{{ _(revision history)|capitalize }}">∴ {{ _(history)|capitalize }}</a>
                                                                                 {% endif %}
                                                                                 {% if ( ( bvar.can_send_image != "no" ) and ( ( not has_portrait_url ) and ( ( first_name != "?" ) and ( surname != "?" ) ) ) ) %}
                                                                                     <a href="/m=SND_IMAGE;i={{ index }}"
                                                                                        style="display:inline-block;
                                                                                               width:125px"
                                                                                        {{ laI }}>🎴 {{ _(send::image/images, variant='0')|capitalize }}</a>
                                                                                     {% if ( auto_image_file_name != "" ) %}
                                                                                         <a href="/m=DEL_IMAGE;i={{ index }}"
                                                                                            style="color:red;
                                                                                                   display:inline-block;
                                                                                                   width:125px"><small>{{ _(delete::image/images, variant='0')|capitalize }}</small></a>
                                                                                     {% endif %}
                                                                                 {% endif %}
                                                                                 {% if has_possible_duplications %}
                                                                                     <a href="/m=MRG_DUP;ip={{ index }}">{{ _(merge::possible duplications)|capitalize }} (oc={{ occ }})</a>
                                                                                 {% endif %}
                                                                                 <a href="/m=MRG;i={{ index }}" style="display:inline-block;width:125px">⨇ {{ _(merge, variant='0')|capitalize }}</a><a href="/{{ access }}{{ l_url }}i={{ index }}&{% if ( evar.del != "on" ) %}del=on&{% endif %}"
    style="{% if ( evar.del != "on" ) %}color:red;
           {% endif %}display:inline-block;
           float:right;
           width:125px"
    title="{% if ( evar.del == "on" ) %}{{ _(user/password/cancel, variant='2')|capitalize }} {{ _(delete::person/persons, variant='0') }}{% else %}{{ _(delete::person/persons, variant='0')|capitalize }}{% endif %}/{{ _(family/families, variant='0') }}{{ nl }}{{ _(click on dates) }}"><small>
                                                                                     {% if ( evar.del == "on" ) %}
                                                                                         {{ _(user/password/cancel, variant='2')|capitalize }} {{ _(delete::) }}
                                                                                     {% else %}
                                                                                         {{ _(delete::)|capitalize }}
                                                                                     {% endif %}
                                                                                 </small></a></span>
                                                                             </span>
                                                                             {% if ( bvar.setup_link != "no" ) %}
                                                                                 {% with %}
                                                                                     {% set l1 = (bvar.setup_http) if (( bvar.setup_http != "" )) else ("http://localhost:2316/") %}
                                                                                     {% with %}
                                                                                         {% set l2 = ("s"sosa.v) if (has_sosa) else ("i"index)initial(first_name_key)initial(surname_key)"-"base.name %}
                                                                                         {% with %}
                                                                                             {% set l_gwu = l1"gwu?opt=check&anon="base.name"&nn=on&c=" %}
                                                                                             <br>
                                                                                             <br>
                                                                                             <span>|
                                                                                                 {% if ( has_parents or has_children ) %}
                                                                                                     <span class="s_menu">
                                                                                                         {% if ( version == l_version ) %}
                                                                                                             <a href="{{ l1 }}gwstp?v=main.htm;" title="Gwstp">Gwstp</a>
                                                                                                         {% else %}
                                                                                                             <a href="{{ l1 }}gwsetup?v=main.htm;" title="Gwsetup">Gwsetup (need to be running)</a>
                                                                                                         {% endif %}
                                                                                                         {% if has_parents %}
                                                                                                             <a href="{{ l_gwu }}&a1={{ first_name_key }}&a2={{ occ }}&a3={{ surname_key }}&o=A{{ l2 }}.gw"
                                                                                                                title="{{ _(ancestor/ancestors, variant='1') }} {{ self }}">A{{ l2 }}.gw</a><a href="{{ l_gwu }}&aws1={{ first_name_key }}&aws2={{ occ }}&aws3={{ surname_key }}&o=AWS{{ l2 }}.gw"
    title="{{ _(ancestor/ancestors, variant='1') }} + {{ _(full siblings) }} {{ self }}">AWS{{ l2 }}.gw</a>
                                                                                                         {% endif %}
                                                                                                         {% if ( has_parents and has_children ) %}
                                                                                                             <a href="{{ l_gwu }}&ad1={{ first_name_key }}&ad2={{ occ }}&ad3={{ surname_key }}&maxlev=40&o=AD{{ l2 }}.gw"
                                                                                                                title="{{ _(ancestor/ancestors, variant='1') }} + {{ _(descendants) }} {{ self }}">AD{{ l2 }}.gw</a>
                                                                                                             {% if ( has_sosa and ( sosa_ref.index != index ) ) %}
                                                                                                                 {% with %}
                                                                                                                     {% set l3 = "As1"initial(sosa_ref.first_name_key)initial(sosa_ref.surname_key)"D"l2 %}<a href="{{ l_gwu }}&a1={{ sosa_ref.first_name_key }}&a2={{ sosa_ref.occ }}&a3={{ sosa_ref.surname_key }}&d1={{ first_name_key }}&d2={{ occ }}&d3={{ surname_key }}&nsp=on&o={{ l3 }}.gw"
    title="{{ a_of_b(_(ancestor/ancestors, variant='1'), sosa_ref) }} {{ _(up to) }} {{ self }}">{{ l3 }}.gw</a>
                                                                                                                 {% endwith %}
                                                                                                             {% endif %}
                                                                                                         {% endif %}
                                                                                                         {% if has_children %}
                                                                                                             <a href="{{ l_gwu }}&d1={{ first_name_key }}&d2={{ occ }}&d3={{ surname_key }}&o=D{{ l2 }}.gw"
                                                                                                                title="{{ _(descendants) }} {{ self }}">D{{ l2 }}.gw</a>
                                                                                                         {% endif %}
                                                                                                         <a href="{{ l_gwu }}&s={{ surname_key }}&o=S-{{ surname_key }}-{{ base.name }}.gw"
                                                                                                            title="{{ _(surname/surnames, variant='0') }} {{ surname }}">S-{{ surname_key }}-{{ base.name }}.gw</a></span>
                                                                                                 {% endif %}
                                                                                             </span>
                                                                                         {% endwith %}
                                                                                     {% endwith %}
                                                                                 {% endwith %}
                                                                             {% endif %}
                                                                         {% endif %}
                                                                     </div>
                                                                 {% endmacro %}
                                                                 {% macro buttons() %}
                                                                     <div id="button">
                                                                         <span style="position:absolute;
                                                                                      top:{% if ( ( evar.wide == "on" ) or ( bvar.wide == "on" ) ) %}82{% else %}30{% endif %}px;
                                                                                      right:13px">{{ sosainfo() }}</span>
                                                                         <span style="position:absolute;
                                                                                      right:13px;
                                                                                      top:{% if ( ( evar.wide == "on" ) or ( bvar.wide == "on" ) ) %}100{% else %}48{% endif %}px">
                                                                             {% if ( ( ( bvar.access_by_key != "yes" ) and ( evar.iz != "" ) ) or ( ( bvar.access_by_key == "yes" ) and ( ( evar.nz != "" ) and ( evar.pz != "" ) ) ) ) %}
                                                                                 <a href="{{ prefix_set.iz }}{{ self.access }}{{ l_url }}"
                                                                                    title="{% if ( bvar.default_sosa_ref != "" ) %}{{ nl }}{{ _(back to default sosa reference) }} {{ bvar.default_sosa_ref }}{% else %}{{ _(user/password/cancel, variant='2')|capitalize }} {{ _(navigation) }} {{ _(with) }} {{ sosa_ref.first_name_key_strip }} {{ sosa_ref.surname_key_strip }}{% endif %}"> X</a> 
                                                                                 <br>
                                                                             {% endif %}
                                                                             <a href="/{{ access }}{% if ( evar.spouse != "off" ) %};spouse=off{% endif %}{% if ( evar.age != "" ) %};age={{ evar.age }}{% endif %}{% if ( evar.image != "" ) %};image={{ evar.image }}{% endif %}{% if ( evar.wide != "" ) %};wide={{ evar.wide }}{% endif %}{% if ( evar.misc != "" ) %}misc={{ evar.misc }}{% endif %}{% if ( evar.maxlev != "" ) %};maxlev={{ evar.maxlev }}{% endif %}{% if ( evar.asclev != "" ) %};asclev={{ evar.asclev }}{% endif %}"
                                                                                title="{% if ( evar.spouse == "off" ) %}{{ _(visualize/show/hide/summary, variant='1') }}{% else %}{{ _(visualize/show/hide/summary, variant='2') }}{% endif %} {{ _(spouse/spouses, variant='1') }}">
                                                                                 {% if ( evar.spouse == "off" ) %}
                                                                                     👫
                                                                                 {% else %}
                                                                                     👤
                                                                                 {% endif %}
                                                                             </a>
                                                                             <br>
                                                                             <a href="/{{ access }}{% if ( evar.spouse != "" ) %};spouse={{ evar.spouse }}{% endif %}{% if ( evar.age != "on" ) %};age=on{% endif %}{% if ( evar.image != "" ) %};image={{ evar.image }}{% endif %}{% if ( evar.wide != "" ) %};wide={{ evar.wide }}{% endif %}{% if ( evar.misc != "" ) %}misc={{ evar.misc }}{% endif %}{% if ( evar.maxlev != "" ) %};maxlev={{ evar.maxlev }}{% endif %}{% if ( evar.asclev != "" ) %};asclev={{ evar.asclev }}{% endif %}"
                                                                                title="{% if ( evar.age != "on" ) %}{{ _(visualize/show/hide/summary, variant='1') }}{% else %}{{ _(visualize/show/hide/summary, variant='2') }}{% endif %} {{ _(age) }}/{{ _(event/events, variant='1') }}"
                                                                                style="{% if ( evar.age == "on" ) %}color:red;
                                                                                       {% endif %}">🎂</a>
                                                                             {% if ( bvar.event_age != "yes" ) %}
                                                                                 {% if ( ( bvar.no_image_for_visitor != "yes" ) or ( friend or wizard ) ) %}
                                                                                     <br>
                                                                                     <a href="/{{ access }}{% if ( evar.spouse != "" ) %};spouse={{ evar.spouse }}{% endif %}{% if ( evar.age != "" ) %};age={{ evar.age }}{% endif %}{% if ( evar.image != "off" ) %};image=off{% endif %}{% if ( evar.wide != "" ) %};wide={{ evar.wide }}{% endif %}{% if ( evar.misc != "" ) %}misc={{ evar.misc }}{% endif %}{% if ( evar.maxlev != "" ) %};maxlev={{ evar.maxlev }}{% endif %}{% if ( evar.asclev != "" ) %};asclev={{ evar.asclev }}{% endif %}"
                                                                                        title="{% if ( evar.image == "off" ) %}{{ _(visualize/show/hide/summary, variant='1') }}{% else %}{{ _(visualize/show/hide/summary, variant='2') }}{% endif %} {{ _(image/images, variant='1') }}"
                                                                                        style="{% if ( evar.image != "off" ) %}color:red;
                                                                                               {% endif %}">🎴</a>
                                                                                 {% endif %}
                                                                             {% endif %}
                                                                             {% if ( bvar.wide != "on" ) %}
                                                                                 <br>
                                                                                 <a href="{{ prefix_base_password }}{% if ( evar.wide != "on" ) %}wide=on;{% endif %}{# foreach not implemented yet #}"
                                                                                    title="{% if ( evar.wide == "on" ) %}{{ _(full width/columns, variant='1') }}{% else %}{{ _(full width/columns, variant='0') }}{% endif %}">
                                                                                     {% if ( evar.wide != "on" ) %}
                                                                                         ⚊
                                                                                     {% else %}
                                                                                         ⚋
                                                                                     {% endif %}
                                                                                 </a>
                                                                             {% endif %}
                                                                             {% if ( wizard and ( bvar.misc != "yes" ) ) %}
                                                                                 <br>
                                                                                 <a href="/{{ access }}{% if ( evar.spouse != "" ) %};spouse={{ evar.spouse }}{% endif %}{% if ( evar.age != "" ) %};age={{ evar.age }}{% endif %}{% if ( evar.image != "" ) %};image={{ evar.image }}{% endif %}{% if ( evar.wide != "" ) %};wide={{ evar.wide }}{% endif %}{% if ( evar.misc != "yes" ) %};misc=yes{% endif %}{% if ( evar.maxlev != "" ) %};maxlev={{ evar.maxlev }}{% endif %}{% if ( evar.asclev != "" ) %};asclev={{ evar.asclev }}{% endif %}"
                                                                                    title="{% if ( evar.misc != "yes" ) %}{{ _(visualize/show/hide/summary, variant='1') }}{% else %}{{ _(visualize/show/hide/summary, variant='2') }}{% endif %} wikitext">
                                                                                     {% if ( evar.misc != "yes" ) %}
                                                                                         M
                                                                                     {% else %}
                                                                                         <s>M</s>
                                                                                     {% endif %}
                                                                                 </a>
                                                                             {% endif %}
                                                                         </span>
                                                                     </div>
                                                                 {% endmacro %}
                                                                 {% macro init_count(prev_count) %}
                                                                     {{ reset_count }}
                                                                     {% for i in 0..prev_count %}{{ incr_count }}{% endfor %}
                                                                 {% endmacro %}
                                                                 {% macro a_title1(z1, z2) %}
                                                                     {{ nl }}   {{ _(father/mother, variant='0') }}{{ sp }}
                                                                     {% if ( ( z1.father.death_date.year != "" ) and ( ( z1.father.death_date.prec == "" ) and ( z2 >= z1.father.death_date.year ) ) ) %}
                                                                         {{ death_symbol }}-{{ z2 - z1.father.death_date.year }}
                                                                     {% else %}
                                                                         {% if ( ( z1.father.birth_date.year != "" ) and ( ( z1.father.birth_date.prec == "" ) and ( z2 > z1.father.birth_date.year ) ) ) %}
                                                                             {{ z2 - z1.father.birth_date.year }}
                                                                         {% else %}
                                                                             ?
                                                                         {% endif %}
                                                                     {% endif %}
                                                                     {{ nl }}   {{ _(father/mother, variant='1') }}{{ sp }}
                                                                     {% if ( ( z1.mother.death_date.year != "" ) and ( ( z1.mother.death_date.prec == "" ) and ( z2 >= z1.mother.death_date.year ) ) ) %}
                                                                         {{ death_symbol }}-{{ z2 - z1.mother.death_date.year }}
                                                                     {% else %}
                                                                         {% if ( ( z1.mother.birth_date.year != "" ) and ( ( z1.mother.birth_date.prec == "" ) and ( z2 > z1.mother.birth_date.year ) ) ) %}
                                                                             {{ z2 - z1.mother.birth_date.year }}
                                                                         {% else %}
                                                                             ?
                                                                         {% endif %}
                                                                     {% endif %}
                                                                     {{ nl }}
                                                                 {% endmacro %}
                                                                 {% macro a_title2(z1, z2) %}
                                                                     {% if ( ( "z1" == "self" ) or ( ( "z1" == "spouse" ) or ( ( "z1" == "child" ) or ( "z1" == "ancestor" ) ) ) ) %}
                                                                         {% if z1.has_families %}{# foreach not implemented yet #}{% endif %}
                                                                     {% endif %}
                                                                 {% endmacro %}
                                                                 {% macro a_title(xx) %}
                                                                     title="
                                                                     {% if ( evar.del != "on" ) %}
                                                                         {% if xx.has_parents %}
                                                                             {% if ( ( xx.birth_date.year != "" ) and ( ( xx.birth_date.prec != ".." ) and ( xx.birth_date.prec != "|" ) ) ) %}
                                                                                 {% with %}
                                                                                     {% set l1 = xx.birth_date.year %}{{ birth_symbol }} {{ l1 }}{{ a_title1("xx", l1) }}
                                                                                 {% endwith %}
                                                                             {% endif %}
                                                                             {% if ( ( xx.death_date.year != "" ) and ( ( xx.death_date.prec != ".." ) and ( xx.death_date.prec != "|" ) ) ) %}
                                                                                 {% with %}
                                                                                     {% set l1 = xx.death_date.year %}{{ death_symbol }} {{ l1 }}
                                                                                     {% if xx.computable_death_age %}({{ xx.death_age }}){% endif %}
                                                                                     {{ a_title1("xx", l1) }}{{ a_title2("xx", l1) }}
                                                                                 {% endwith %}
                                                                             {% endif %}
                                                                             {% if xx.computable_age %}
                                                                                 {% with %}
                                                                                     {% set l1 = today.year %}{{ birth_symbol }} {{ l1 }} ({{ xx.age }}){{ a_title1("xx", l1) }}{{ a_title2("xx", l1) }}
                                                                                 {% endwith %}
                                                                             {% endif %}
                                                                         {% else %}
                                                                             {% if xx.has_families %}
                                                                                 {% if ( ( xx.death_date.year != "" ) and ( ( xx.death_date.prec != ".." ) and ( xx.death_date.prec != "|" ) ) ) %}
                                                                                     {% with %}
                                                                                         {% set l1 = xx.death_date.year %}{{ death_symbol }}{{ l1 }}
                                                                                         {% if xx.computable_death_age %}({{ xx.death_age }}){% endif %}
                                                                                         {{ nl }}{{ a_title2("xx", l1) }}
                                                                                     {% endwith %}
                                                                                 {% endif %}
                                                                                 {% if xx.computable_age %}
                                                                                     {% with %}
                                                                                         {% set l1 = today.year %}{{ birth_symbol }} {{ l1 }} ({{ xx.age }}){{ a_title2("xx", l1) }}
                                                                                     {% endwith %}
                                                                                 {% endif %}
                                                                             {% else %}
                                                                                 {% if xx.computable_death_age %}
                                                                                      {{ death_symbol }} {{ xx.death_age }}{{ nl }}
                                                                                 {% else %}
                                                                                     {% if xx.computable_age %}{{ birth_symbol }} {{ xx.age }}{{ nl }}{% endif %}
                                                                                 {% endif %}
                                                                             {% endif %}
                                                                         {% endif %}
                                                                     {% endif %}
                                                                     {{ nl }}{{ l_ldates1 }}"
                                                                 {% endmacro %}
                                                                 {% macro link_dates(xx) %}
                                                                     {% if ( not cancel_links ) %}
                                                                         {{ sp }}<a id="xx_{{ xx.index }}" {{ a_title("xx") }} {{ l_ldates }}{{ xx.index }}">
                                                                         {% if ( xx.dates != "" ) %}
                                                                             {{ xx.dates }}
                                                                         {% else %}
                                                                             -
                                                                         {% endif %}
                                                                     </a>
                                                                 {% else %}
                                                                     {{ xx.dates }}
                                                                 {% endif %}
                                                             {% endmacro %}
                                                             {% macro link_marriage(xx) %}
                                                                 {% if ( not cancel_links ) %}
                                                                     {% with %}
                                                                         {% set l1 = marriage_date.year %}
                                                                         {% with %}
                                                                             {% set marriage_date_place = (marriage_date.day"/") if (( marriage_date.day != "" ))(marriage_date.month"/") if (( marriage_date.month != "" ))(marriage_date.year) if (( marriage_date.year != "" ))nl(marriage_place) if (( marriage_place != "" ))nlnl %}
                                                                             {% with %}
                                                                                 {% set him = (_(him/her, variant='0')sp(xx.marriage_age) if (xx.computable_marriage_age) else (" ? "_(years old))(a_title1("xx", l1)) if (( ( marriage_date.year != "" ) and ( ( marriage_date.prec != ".." ) and ( ( marriage_date.prec != "|" ) and xx.has_parents ) ) )) else (nl)) if (( evar.del != "on" )) %}
                                                                                 {% with %}
                                                                                     {% set her = (_(him/her, variant='1')sp(xx.spouse.marriage_age) if (xx.spouse.computable_marriage_age) else (" ? "_(years old))(a_title1("xx.spouse", l1)) if (( ( marriage_date.year != "" ) and ( ( marriage_date.prec != ".." ) and ( ( marriage_date.prec != "|" ) and xx.spouse.has_parents ) ) )) else (nl)) if (( evar.del != "on" )) %}<a id="f{{ family.index }}" {{ l_lmarriage1 }}i={{ family.index }}&ip={{ index }}" title="{{ marriage_date_place }}{{ him }}{{ her }}{{ nl }}{{ l_lmarriage2 }}">
                                                                                     {% if ( on_marriage_date != "" ) %}
                                                                                         &{{ marriage_date.prec }}{{ marriage_date.year }}
                                                                                     {% else %}
                                                                                         &
                                                                                     {% endif %}
                                                                                     {# foreach not implemented yet #}</a>
                                                                                 {% endwith %}
                                                                             {% endwith %}
                                                                         {% endwith %}
                                                                     {% endwith %}
                                                                 {% else %}
                                                                     &
                                                                     {% if ( on_marriage_date != "" ) %}{{ marriage_date.prec }}{{ marriage_date.year }}{% endif %}
                                                                     {# foreach not implemented yet #}
                                                                 {% endif %}
                                                             {% endmacro %}
                                                             {% macro link_name(xx) %}
                                                                 {% if ( cancel_links or xx.is_restricted ) %}
                                                                     {{ xx }}
                                                                 {% else %}
                                                                     <a href="/{{ xx.access }}{{ l_url }}">{{ xx }}</a>
                                                                 {% endif %}
                                                             {% endmacro %}
                                                             {% macro link_name1(xx, yy, zz) %}
                                                                 {% if ( cancel_links or xx.is_restricted ) %}
                                                                     {{ yy }}
                                                                 {% else %}
                                                                     <a href="/{{ xx.access }}{{ l_url }}" zz>{{ yy }}</a>
                                                                 {% endif %}
                                                             {% endmacro %}
                                                             {% macro link_image(xx) %}
                                                                 <a {{ l_on1 }} class="image" href="{{ xx.image_html_url }}">
                                                                     <img src="{{ xx.image_url }}" alt="{{ _(image/images, variant='0') }}">
                                                                 </a>
                                                             {% endmacro %}
                                                             {% macro somebody(xx) %}
                                                                 {{ link_name("xx") }}{{ xx.title }}{{ link_dates("xx") }}
                                                             {% endmacro %}
                                                             {% macro somebody1(xx, yy, zz) %}
                                                                 {{ link_name1("xx", "yy", "zz") }}{{ xx.title }}{{ link_dates("xx") }}
                                                             {% endmacro %}
                                                             {% macro child_long_info(curlev, maxlev) %}
                                                                 {% with %}
                                                                     {% set next_chi = "chi_"(family_cnt"_"( child_cnt + 1 )) if (( nb_children != child_cnt )) else ("1_1") %}{{ somebody1("child", l_child, ("id="chi_"family_cnt"_"child_cnt"""(" name="sosa" ") if (child.has_sosa)sp"onkeypress="javascript:return acc_key(this,event,'sib_1','spo_"family_cnt"','"next_chi"','child_"child.index"','0','0','0');"
                                                                     ") if (( curlev == 1 ))) }}
                                                                     {% if has_families %}{# foreach not implemented yet #}{% endif %}
                                                                 {% endwith %}
                                                             {% endmacro %}
                                                             {% macro children_list() %}
                                                                 {% if has_children %}
                                                                     <ol>
                                                                         {# foreach not implemented yet #}
                                                                     </ol>
                                                                 {% endif %}
                                                             {% endmacro %}
                                                             {% macro advanced(z1, z2) %}
                                                                 {% if ( ( not cancel_links ) and ( bvar.hide_advanced_request != "yes" ) ) %}
                                                                     {% with %}
                                                                         {% set x1 = "/""m=H&v=advanced&focus=z1&birth1_yyyy="birth_date.year"&death2_yyyy="death_date.year"&z1=" %}<a class="date"
    href="javascript:;"
    onclick="adv('{{ x1 }}',this)"
    title="{{ _(advanced request, variant='0') }}">z2</a>
                                                                     {% endwith %}
                                                                 {% else %}
                                                                     z2
                                                                 {% endif %}
                                                             {% endmacro %}
                                                             {% macro content_family(xx, yy) %}
                                                                 {% with %}
                                                                     {% set next_spo = "spo_"(( family_cnt + 1 )) if (( nb_families != family_cnt )) else ("1") %}
                                                                     {% if ( xx.sex == 0 ) %}
                                                                         {{ link_marriage("xx") }}
                                                                     {% else %}
                                                                         {{ link_marriage("xx.spouse") }}
                                                                     {% endif %}
                                                                     {{ sp }}{{ somebody1("yy", "yy", "id="spo_"family_cnt""
                                                                     onkeypress="javascript:return acc_key(this,event,'sib_1','"next_spo"','chi_"family_cnt"_1','spouse_"spouse.index"','0','0','f"family.index"');"
                                                                     ") }}{{ children_list() }}
                                                                 {% endwith %}
                                                             {% endmacro %}
                                                             {% macro parents(z1, z2, z3) %}
                                                                 {# foreach not implemented yet #}{% endmacro %}{% macro consang() %}{% if has_parents %}{{ reset_count }}{# foreach not implemented yet #}
                                                                 {% if ( has_consanguinity or ( count != 0 ) ) %}
                                                                     {% if cancel_links %}
                                                                         {{ _(consanguinity) }}{{ _(:) }} {{ consanguinity }}
                                                                     {% else %}
                                                                         <a href="/em=R&ei={{ mother.index }}&m=NG&t=PN&select={{ father.index }}&et=A&spouse=on&image=on"
                                                                            style="float:none"
                                                                            title="{{ _(relationship computing) }}, {{ _(parents) }}">{{ _(consanguinity) }}{{ _(:) }} {{ consanguinity }}</a>
                                                                     {% endif %}
                                                                 {% endif %}
                                                             {% endif %}
                                                         {% endmacro %}
                                                         {% macro implex() %}
                                                             {% if has_parents %}
                                                                 {{ reset_count }}{# foreach not implemented yet #}
                                                                 {% if ( count != 0 ) %}
                                                                     {% if ( not cancel_links ) %}
                                                                         , <a href="/m=A&t=N&v={{ max_anc_level }}&i={{ index }}&same={{ count }}"
     style="float:none;
            padding:0px"
     title="{{ _(display smallest sosa number relative to ancestor) }}">{{ count }} 
                                                                         {% if ( count == 1 ) %}
                                                                             {{ _(implex/implexes, variant='0') }}
                                                                         {% else %}
                                                                             {{ _(implex/implexes, variant='1') }}
                                                                         {% endif %}
                                                                     </a>
                                                                 {% else %}
                                                                     , {{ count }} 
                                                                     {% if ( count == 1 ) %}
                                                                         {{ _(implex/implexes, variant='0') }}
                                                                     {% else %}
                                                                         {{ _(implex/implexes, variant='1') }}
                                                                     {% endif %}
                                                                 {% endif %}
                                                             {% endif %}
                                                         {% endif %}
                                                     {% endmacro %}
                                                     {% macro anc_families() %}
                                                         {% if has_parents %}
                                                             <div>
                                                                 <div>
                                                                     <span class="menu"
                                                                           style="display:inline;
                                                                                  position:relative;
                                                                                  background-color:#AAA">
                                                                         <span style="margin-left:20px"><small>{{ ascmax() }}{{ implex() }}</small></span>
                                                                         <br>
                                                                         {% with %}
                                                                             {% set l1 = min(max_anc_level, 5) %}<span>
                                                                             <span class="ch2" style="margin-top:-4px;">{{ _(ancestor/ancestors, variant='1')|capitalize }}</span>
                                                                             {% if ( not cancel_links ) %}
                                                                                 <span class="s_menu">
                                                                                     {% if ( max_anc_level > 3 ) %}
                                                                                         {% with %}
                                                                                             {% set l2 = (( max_anc_level + 1 )) if (( max_anc_level < 6 )) else ("5") %}
                                                                                             {% for i in 1..l2 %}
                                                                                                 {% if ( ( i == 1 ) or ( i == 2 ) ) %}
                                                                                                     <span style="width:27px;"></span>
                                                                                                 {% else %}
                                                                                                     <a href="/{{ access }}{% if ( evar.spouse != "" ) %}&spouse={{ evar.spouse }}{% endif %}{% if ( evar.age != "" ) %}&age={{ evar.age }}{% endif %}{% if ( evar.image != "" ) %}&image={{ evar.image }}{% endif %}{% if ( evar.wide != "" ) %}&wide={{ evar.wide }}{% endif %}{% if ( evar.misc != "" ) %}&misc={{ evar.misc }}{% endif %}{% if ( evar.maxlev != "" ) %}&maxlev={{ evar.maxlev }}{% endif %}&asclev={{ i }}"
                                                                                                        style="{% if ( ( ( evar.asclev == "" ) and ( i == 3 ) ) or ( i == evar.asclev ) ) %}background-color:{% if ( bvar.css == 1 ) %}#666;
                                                                                                               {% else %}#EEE;
                                                                                                               {% endif %}{% endif %}width:17px"
                                                                                                        title="{{ i }} {{ _(generation/generations, variant='1') }}{{ nl }}{{ asc(i) }} {{ _(ancestor/ancestors, variant='1') }}">
                                                                                                         {% if ( i < 10 ) %}{% endif %}
                                                                                                     {{ i }}</a>
                                                                                                 {% endif %}
                                                                                             {% endfor %}
                                                                                         {% endwith %}
                                                                                     {% endif %}
                                                                                     <a id="anc_tree"
                                                                                        href="/m=A;t=T;v=4;image=on;marriage=on;{{ access }}"
                                                                                        {{ laY }}>{{ _(ascendants tree)|capitalize }}</a><a href="/m=A&t=H&v={{ l1 }}&maxv={{ max_anc_level }}&i={{ index }}">{{ _(horizontal tree)|capitalize }}</a><a href="/m=A&t=Y&image={{ evar.image }}&v=7&maxv={{ max_anc_level }}&{{ access }}">{{ _(table)|capitalize }} {{ _(ancestor/ancestors, variant='1')|capitalize }}</a><a href="/m=A&t=G&v=3&maxv={{ max_anc_level }}&siblings=on&alias=on&spouse=on&parents=on&rel=on&witn=on&notes=on&src=on&upd=on&hide=on;{{ access }}">{{ _(long display)|capitalize }}</a><a href="/m=A&t=F&tf1=aad&v={{ max_anc_level }}&maxv={{ max_anc_level }}&i={{ index }}">{{ _(age at death)|capitalize }}</a><a href="/m=A&t=F&tf1=sb&v=5&maxv={{ max_anc_level }}&i={{ index }}">{{ _(surnames branch)|capitalize }}</a><a href="/m=A;{{ access }}">Menu {{ _(tools) }} {{ _(ancestor/ancestors, variant='1') }}</a></span>
                                                                             {% endif %}
                                                                         </span>
                                                                     </span>
                                                                 </div>
                                                                 <div style="clear:both">
                                                                     {% if ( ( evar.asclev == 3 ) or ( evar.asclev == "" ) ) %}
                                                                         {% if father.has_parents %}<small>{{ parents(3, "    ", 4) }}</small>{% endif %}
                                                                         {{ parents(2, "", 2) }}
                                                                         {% if mother.has_parents %}<small>{{ parents(3, "    ", 6) }}</small>{% endif %}
                                                                     {% else %}
                                                                         {% if ( evar.asclev > 3 ) %}
                                                                             {% if father.has_parents %}
                                                                                 <small>
                                                                                     {% if father.father.has_parents %}{{ parents(4, "        ", 8) }}{% endif %}
                                                                                     {{ parents(3, "    ", 4) }}
                                                                                     {% if father.mother.has_parents %}{{ parents(4, "        ", 10) }}{% endif %}
                                                                                 </small>
                                                                             {% endif %}
                                                                             {{ parents(2, "", 2) }}
                                                                             {% if mother.has_parents %}
                                                                                 <small>
                                                                                     {% if mother.father.has_parents %}{{ parents(4, "        ", 12) }}{% endif %}
                                                                                     {{ parents(3, "    ", 6) }}
                                                                                     {% if mother.mother.has_parents %}{{ parents(4, "        ", 14) }}{% endif %}
                                                                                 </small>
                                                                             {% endif %}
                                                                         {% endif %}
                                                                     {% endif %}
                                                                 </div>
                                                             </div>
                                                             <div>
                                                                 <div>
                                                                     <span class="menu" style="display:inline;position:relative;">
                                                                         <span style="margin-left:15px;"><small>{{ consang() }}</small></span>
                                                                         <br>
                                                                         <span>
                                                                             <span class="ch2" style="margin-top:-4px;">
                                                                                 {% if ( ( father.nb_children > 1 ) or ( mother.nb_children > 1 ) ) %}
                                                                                     {{ _(full siblings)|capitalize }}
                                                                                 {% else %}
                                                                                     {{ _(relationship)|capitalize }}
                                                                                 {% endif %}
                                                                             </span>
                                                                             {% if ( not cancel_links ) %}
                                                                                 <span class="s_menu">
                                                                                     <a href="/m=R;{{ access }}" id="rela_comp" {{ laR }}>{{ _(relationship computing)|capitalize }} 👪</a>
                                                                                     {% if browsing_with_sosa_ref %}
                                                                                         {% if ( ( sosa_ref.index != "" ) and ( sosa_ref.index != index ) ) %}
                                                                                             <a href="/em=R&ei={{ index }}&i={{ sosa_ref.index }}&m=NG&n=1&t=PN&spouse=on&image=on&et=S"
                                                                                                title="{{ _(shortest path)|capitalize }} {{ _(with) }} {{ sosa_ref }}">{{ _(shortest path)|capitalize }} ♆</a>
                                                                                         {% endif %}
                                                                                     {% endif %}
                                                                                     <a href="/{{ access }}&m=A&t=F&fam7=on&tf1=fam73&v=3&maxv=4">{{ _(family time line)|capitalize }}</a>
                                                                                     {% if has_parents %}
                                                                                         {% if ( father.has_siblings or mother.has_siblings ) %}
                                                                                             <a href="/{{ access }}&m=C&v1=2&v2=1">{{ _(uncles and aunts)|capitalize }}</a>
                                                                                         {% endif %}
                                                                                     {% endif %}
                                                                                     {% if has_nephews_or_nieces %}
                                                                                         <a href="/{{ access }}&m=C&v1=1&v2=2">{{ _(a nephew/a niece, variant='4')|capitalize }}</a>
                                                                                     {% endif %}
                                                                                 </span>
                                                                             {% endif %}
                                                                         </span>
                                                                     </span>
                                                                 </div>
                                                                 {% if ( ( father.nb_children > 1 ) or ( mother.nb_children > 1 ) ) %}
                                                                     <div style="clear:both">
                                                                         <ol>
                                                                             {# foreach not implemented yet #}
                                                                         </ol>
                                                                         {# foreach not implemented yet #}{# foreach not implemented yet #}
                                                                     </div>
                                                                 </div>
                                                             {% endif %}
                                                         {% endwith %}
                                                     {% else %}
                                                         {% if ( wizard and ( ( not cancel_links ) and ( ( first_name != "?" ) and ( surname != "?" ) ) ) ) %}
                                                             <div class="fam2 button">
                                                                 <a id="add_par" href="/m=ADD_PAR;ip={{ index }}" {{ laL }}{{ l_on1 }}>{{ _(add::parents)|capitalize }}</a>
                                                             </div>
                                                         {% endif %}
                                                     {% endif %}
                                                 {% endmacro %}
                                                 {% macro lex(xx, yy) %}
                                                     {% if ( yy == 0 ) %}
                                                         {{ _(xx, variant='0') }}
                                                     {% else %}
                                                         {% if ( yy == 1 ) %}
                                                             {{ _(xx, variant='1') }}
                                                         {% else %}
                                                             {{ _(xx, variant='2') }}
                                                         {% endif %}
                                                     {% endif %}
                                                 {% endmacro %}
                                                 {% macro relations_tree(z1) %}
                                                     {{ reset_count }}<a class="ch2"
    href="/spouse=on&m=RLM&image={{ evar.image }}&{# foreach not implemented yet #}{# foreach not implemented yet #}{# foreach not implemented yet #}{{ incr_count }}i{{ count }}={{ index }}&t{{ count }}={{ l_hh }}&{% if browsing_with_sosa_ref %}{{ incr_count }}i{{ count }}={{ sosa_ref.index }}&t{{ count }}=sosa_1;{% endif %}"
    title="{{ _(relations tree)|capitalize }}">
                                                     {{ reset_count }}
                                                 {% endmacro %}
                                                 {% macro relation_computing(himxx, herxx, typexx) %}
                                                     {% with %}
                                                         {% set l_rt = (("godfather/godmother/godparents") if (( ( relation_type == _(godfather/godmother/godparents, variant='2') ) or ( ( relation_type == _(godfather/godmother/godparents, variant='1') ) or ( relation_type == _(godfather/godmother/godparents, variant='0') ) ) )) else (("adoptive father/adoptive mother/adoptive parents") if (( ( relation_type == _(adoptive father/adoptive mother/adoptive parents, variant='2') ) or ( ( relation_type == _(adoptive father/adoptive mother/adoptive parents, variant='1') ) or ( relation_type == _(adoptive father/adoptive mother/adoptive parents, variant='0') ) ) )) else (("recognizing father/recognizing mother/recognizing parents") if (( ( relation_type == _(recognizing father/recognizing mother/recognizing parents, variant='2') ) or ( ( relation_type == _(recognizing father/recognizing mother/recognizing parents, variant='1') ) or ( relation_type == _(recognizing father/recognizing mother/recognizing parents, variant='0') ) ) )) else (("candidate father/candidate mother/candidate parents") if (( ( relation_type == _(candidate father/candidate mother/candidate parents, variant='2') ) or ( ( relation_type == _(candidate father/candidate mother/candidate parents, variant='1') ) or ( relation_type == _(candidate father/candidate mother/candidate parents, variant='0') ) ) )) else (("foster father/foster mother/foster parents") if (( ( relation_type == _(foster father/foster mother/foster parents, variant='2') ) or ( ( relation_type == _(foster father/foster mother/foster parents, variant='1') ) or ( relation_type == _(foster father/foster mother/foster parents, variant='0') ) ) ))))))) if (( "typexx" == "" )) else ("*") %}
                                                         {% with %}
                                                             {% set l_rt0 = (lex(l_rt, 0)) if (( l_rt != "*" )) else ("typexx") %}
                                                             {% with %}
                                                                 {% set l_rt1 = (lex(l_rt, 1)) if (( l_rt != "*" )) else ("typexx") %}
                                                                 {% if ( not cancel_links ) %}
                                                                     {{ reset_count }}<a href="/spouse=on&m=RLM&image={{ evar.image }}&{% if ( "himxx" != "" ) %}{{ incr_count }}i{{ count }}={{ himxx.index }}&t{{ count }}={{ l_rt0 }}&{% endif %}{% if ( "herxx" != "" ) %}{{ incr_count }}i{{ count }}={{ herxx.index }}&t{{ count }}={{ l_rt1 }}&{% endif %}{% if browsing_with_sosa_ref %}{{ incr_count }}i{{ count }}={{ sosa_ref.index }}&t{{ count }}=sosa_1;{% endif %}{{ incr_count }}i{{ count }}={{ index }}&t{{ count }}={{ l_hh }}&"
    title="{{ _(shortest path)|capitalize }} {{ _(with) }}…">•</a>&nbsp;
                                                                 {% else %}
                                                                     {% if ( not is_first ) %},{{ sp }}{% endif %}
                                                                 {% endif %}
                                                             {% endwith %}
                                                         {% endwith %}
                                                     {% endwith %}
                                                 {% endmacro %}
                                                 {% macro age_at(xx) %}
                                                     {{ _(age at %s birth date:::xx) }}
                                                 {% endmacro %}
                                                 {% macro link_s(z1, z2) %}
                                                     {% if cancel_links %}
                                                         z2
                                                     {% else %}
                                                         {% with %}
                                                             {% set x1 = /m=S;z1= %}<a href="javascript:;"
    onclick="javascript:adv1('{{ x1 }}',this)"
    title="{{ _(search/case sensitive, variant='0') }}">z2</a>
                                                         {% endwith %}
                                                     {% endif %}
                                                 {% endmacro %}
                                                 {% macro nb_days(xx) %}
                                                     {{ nth("/31/28/31/30/31/30/31/31/30/31/30/31", "xx") }}
                                                 {% endmacro %}
                                                 {% macro compute_age1(z1, z2, z3) %}
                                                     <abbr class="abbr1"
                                                           {% if ( l_nbd > 31 ) %}title="{{ l_nbd }} {{ _(days old) }}"{% endif %}>
                                                         {% if ( z1 > 0 ) %}
                                                             {% if ( z1 == 1 ) %}
                                                                 {{ _(one year old) }}
                                                             {% else %}
                                                                 z1 {{ _(years old) }}
                                                             {% endif %}
                                                             {% if ( ( z2 > 0 ) or ( z3 > 0 ) ) %},{% endif %}
                                                         {% endif %}
                                                         {% if ( z2 > 0 ) %}
                                                             {% if ( z2 == 1 ) %}
                                                                 {{ _(one month old) }}
                                                             {% else %}
                                                                 z2 {{ _(months old) }}
                                                             {% endif %}
                                                             {% if ( z3 > 0 ) %},{% endif %}
                                                         {% endif %}
                                                         {% if ( z3 > 0 ) %}
                                                             {% if ( z3 == 1 ) %}
                                                                 {{ _(one day old) }}
                                                             {% else %}
                                                                 z3 {{ _(days old) }}
                                                             {% endif %}
                                                         {% endif %}
                                                     </abbr>
                                                 {% endmacro %}
                                                 {% macro compute_age(z1, z2) %}
                                                     {% with %}
                                                         {% set l1 = nb_days(z2.month) %}
                                                         {% if ( ( z1.month != "" ) and ( ( z2.month != "" ) and ( z1.month > z2.month ) ) ) %}
                                                             {% if ( ( z1.day != "" ) and ( ( z2.day != "" ) and ( z1.day >= z2.day ) ) ) %}
                                                                 {{ compute_age1(( z1.year - z2.year ), ( z1.month - z2.month ), ( z1.day - z2.day )) }}
                                                             {% else %}
                                                                 {{ compute_age1(( z1.year - z2.year ), ( ( z1.month - z2.month ) - 1 ), ( ( l1 + z1.day ) - z2.day )) }}
                                                             {% endif %}
                                                         {% endif %}
                                                         {% if ( ( z1.month != "" ) and ( ( z2.month != "" ) and ( z1.month == z2.month ) ) ) %}
                                                             {% if ( ( z1.day != "" ) and ( ( z2.day != "" ) and ( z1.day >= z2.day ) ) ) %}
                                                                 {{ compute_age1(( z1.year - z2.year ), 0, ( z1.day - z2.day )) }}
                                                             {% else %}
                                                                 {% if ( z1.year > z2.year ) %}
                                                                     {{ compute_age1(( ( z1.year - z2.year ) - 1 ), 11, ( ( l1 + z1.day ) - z2.day )) }}
                                                                 {% endif %}
                                                             {% endif %}
                                                         {% endif %}
                                                         {% if ( ( z1.month != "" ) and ( ( z2.month != "" ) and ( ( z1.month < z2.month ) and ( z1.year > z2.year ) ) ) ) %}
                                                             {% if ( ( z1.day != "" ) and ( ( z2.day != "" ) and ( z1.day >= z2.day ) ) ) %}
                                                                 {{ compute_age1(( ( z1.year - z2.year ) - 1 ), ( ( 12 + z1.month ) - z2.month ), ( z1.day - z2.day )) }}
                                                             {% else %}
                                                                 {{ compute_age1(( ( z1.year - z2.year ) - 1 ), ( ( 11 + z1.month ) - z2.month ), ( ( l1 + z1.day ) - z2.day )) }}
                                                             {% endif %}
                                                         {% endif %}
                                                     {% endwith %}
                                                 {% endmacro %}
                                                 {% macro on_edate(z1) %}
                                                     {% if ( ( ( bvar.event_age != "yes" ) and ( evar.age != "on" ) ) and ( event.age != "" ) ) %}
                                                         <span title="{{ event.age }}">{{ sp }}{{ z1.on_date }}</span>
                                                     {% else %}
                                                         {{ sp }}{{ z1.on_date }}
                                                     {% endif %}
                                                     {% if ( ( ( bvar.event_age == "yes" ) or ( evar.age == "on" ) ) and ( event.age != "" ) ) %}
                                                         • {{ event.age }}
                                                     {% else %}
                                                         {% if ( ( event.name == _(birth) ) and computable_age ) %}
                                                         {% else %}
                                                             {% if ( ( event.age != "" ) and ( event.name == _(death) ) ) %}{% endif %}
                                                         {% endif %}
                                                     {% endif %}
                                                 {% endmacro %}
                                                 {% macro curr_age() %}
                                                     {# foreach not implemented yet #}{% if computable_age %}{% if ( ( birth_date.year != "" ) and ( ( today.year >= birth_date.year ) and ( l_nbd != "" ) ) ) %}{{ compute_age("today", "birth_date") }}{% else %}{{ age }}{% endif %}{% if birthday %} ({{ _(happy birthday to you!) }}){% endif %}{% if ( ( version == l_version ) and ( today == birth_date.date ) ) %}{{ _(today) }}{% endif %}{% endif %}{% endmacro %}{% macro timeline_tree(z1) %}{{ reset_count }}{# foreach not implemented yet #}
                                                     {% if ( count > 1 ) %}
                                                         {{ reset_count }}
                                                         <div class="button" style="position:relative;float:right;">
                                                             <span><a href="/spouse=on&m=RLM&image={{ evar.image }}&{# foreach not implemented yet #}{{ incr_count }}i{{ count }}={{ index }}&t{{ count }}={{ l_hh }}&{% if browsing_with_sosa_ref %}{{ incr_count }}i{{ count }}={{ sosa_ref.index }}&t{{ count }}=sosa_1;{% endif %}"
    {% if ( count < 3 ) %}style="display:none;"{% endif %}>{{ _(tree of witnesses)|capitalize }}</a></span>
                                                             {{ reset_count }}
                                                         </div>
                                                     {% endif %}
                                                 {% endmacro %}
                                                 {% macro event_tree(z1) %}
                                                     {{ reset_count }}
                                                     <br>
                                                     <span><a href="/spouse=on&m=RLM&image={{ evar.image }}&{# foreach not implemented yet #}{{ incr_count }}i{{ count }}={{ index }}&t{{ count }}={{ l_hh }}&{% if browsing_with_sosa_ref %}{{ incr_count }}i{{ count }}={{ sosa_ref.index }}&t{{ count }}=sosa_1;{% endif %}"
    {% if ( count < 3 ) %}style="display:none;"{% endif %}>└</a></span>
                                                     {{ reset_count }}
                                                 {% endmacro %}
                                                 {% macro birth_event() %}
                                                     {% with %}
                                                         {% set parents_age = (a_of_b((_(son/daughter/child, variant='0')|capitalize) if (is_male) else ((_(son/daughter/child, variant='1')|capitalize) if (is_female) else (_(son/daughter/child, variant='2')|capitalize)), (nl) if (( ( bvar.event_age != "yes" ) and ( evar.age != "on" ) ))father(", "("<span class="nobr">"father_age_at_birth"</span>") if (( ( bvar.event_age == "yes" ) or ( evar.age == "on" ) )) else (father_age_at_birth)(",") if (( ( bvar.event_age == "yes" ) or ( evar.age == "on" ) ))) if (( father_age_at_birth != "" ))(nl) if (( ( bvar.event_age != "yes" ) and ( evar.age != "on" ) )) else (sp_(and)sp)mother(", "("<span class="nobr">"mother_age_at_birth"</span>") if (( ( bvar.event_age == "yes" ) or ( evar.age == "on" ) )) else (mother_age_at_birth)) if (( mother_age_at_birth != "" )))) if (has_parents) %}<span>
                                                         {% if ( ( bvar.event_age != "yes" ) and ( evar.age != "on" ) ) %}
                                                             <span title="{{ parents_age }}">{{ capitalize(event.name) }}</span>
                                                         {% else %}
                                                             {{ capitalize(event.name) }}
                                                         {% endif %}
                                                         {% if event.has_date %}{{ on_edate("event") }}{% endif %}
                                                         {% if event.has_place %}{{ _(in (place)) }} {{ advanced("birth_place", event.place) }}{% endif %}
                                                         {% if ( ( ( bvar.event_age == "yes" ) or ( evar.age == "on" ) ) and has_parents ) %}
                                                             <br>
                                                              └ {{ parents_age }}.
                                                         {% endif %}
                                                     </span>
                                                 {% endwith %}
                                             {% endmacro %}
                                             {% macro baptism_event() %}
                                                 <span>
                                                     {{ capitalize(event.name) }}
                                                     {% if event.has_date %}{{ on_edate("event") }}{% endif %}
                                                     {% if event.has_place %}{{ _(in (place)) }} {{ advanced("bapt_place", event.place) }}{% endif %}
                                                 </span>
                                             {% endmacro %}
                                             {% macro death_event() %}
                                                 <span>
                                                     {{ capitalize(event.name) }}
                                                     {% if event.has_date %}{{ on_edate("event") }}{% endif %}
                                                     {% if event.has_place %}{{ _(in (place)) }} {{ advanced("death_place", event.place) }}{% endif %}
                                                 </span>
                                                 {% if has_linked_page.DEATH %}
                                                     <dd>
                                                         {{ linked_page.DEATH }}
                                                     </dd>
                                                 {% endif %}
                                             {% endmacro %}
                                             {% macro burial_event() %}
                                                 <span>
                                                     {{ capitalize(event.name) }}
                                                     {% if event.has_date %}{{ on_edate("event") }}{% endif %}
                                                     {% if event.has_place %}{{ _(in (place)) }} {{ advanced("burial_place", event.place) }}{% endif %}
                                                 </span>
                                             {% endmacro %}
                                             {% macro marriage_event() %}
                                                 <span>
                                                     {% if ( evar.spouse == "off" ) %}
                                                         <span title="{{ _(with) }} {{ event.spouse }}">{{ capitalize(event.name) }}</span>
                                                     {% else %}
                                                         {{ capitalize(event.name) }}
                                                     {% endif %}
                                                     {% if ( event.has_spouse and ( evar.spouse != "off" ) ) %}{{ _(with) }} {{ event.spouse }}{% endif %}
                                                     {% if event.has_date %}{{ on_edate("event") }}{% endif %}
                                                     {% if event.has_place %}{{ _(in (place)) }} {{ advanced("marriage_place", event.place) }}{% endif %}
                                                 </span>
                                             {% endmacro %}
                                             {% macro other_event() %}
                                                 <span>
                                                     {% if ( evar.spouse == "off" ) %}
                                                         <span title="{{ _(with) }} {{ event.spouse }}">
                                                             {% if ( event.name == _(no mention) ) %}
                                                                 {{ _(relation/relations, variant='0')|capitalize }}
                                                             {% else %}
                                                                 {{ capitalize(event.name) }}
                                                             {% endif %}
                                                         </span>
                                                     {% else %}
                                                         {% if ( event.name == _(no mention) ) %}
                                                             {{ _(relation/relations, variant='0')|capitalize }}
                                                         {% else %}
                                                             {{ capitalize(event.name) }}
                                                         {% endif %}
                                                     {% endif %}
                                                     {% if ( event.has_spouse and ( ( evar.spouse != "off" ) and ( ( event.name != _(divorce event) ) and ( ( event.name != _(separate event) ) and ( event.name != _(annulation) ) ) ) ) ) %}
                                                         {{ _(with) }} {{ event.spouse }}
                                                     {% endif %}
                                                     {% if event.has_date %}{{ on_edate("event") }}{% endif %}
                                                     {% if event.has_place %}{{ _(in (place)) }} {{ event.place }}{% endif %}
                                                 </span>
                                             {% endmacro %}
                                             {% macro one_event(z1) %}
                                                 {% if ( "z1" == _(birth) ) %}
                                                     {{ birth_event() }}
                                                 {% else %}
                                                     {% if ( "z1" == _(baptism) ) %}
                                                         {{ baptism_event() }}
                                                     {% else %}
                                                         {% if ( "z1" == _(death) ) %}
                                                             {{ death_event() }}
                                                         {% else %}
                                                             {% if ( "z1" == _(burial) ) %}
                                                                 {{ burial_event() }}
                                                             {% else %}
                                                                 {% if ( "z1" == _(marriage/marriages, variant='0') ) %}
                                                                     {{ marriage_event() }}
                                                                 {% else %}
                                                                     {{ other_event() }}
                                                                 {% endif %}
                                                             {% endif %}
                                                         {% endif %}
                                                     {% endif %}
                                                 {% endif %}
                                                 {% if event.has_witnesses %}
                                                     {{ event_tree(l_ref) }}<span>
                                                     {{ reset_count }}{# foreach not implemented yet #}
                                                     {% if ( count > 1 ) %}
                                                         {{ _(witness/witnesses, variant='1') }}
                                                     {% else %}
                                                         {{ _(witness/witnesses, variant='0') }}
                                                     {% endif %}
                                                     {{ _(:) }}
                                                     {# foreach not implemented yet #}</span>
                                                 {% endif %}
                                                 {% if event.has_note %}<div style="margin-left:30px">{{ event.note }}</div>{% endif %}
                                             {% endmacro %}
                                             {% macro witness_at_event(xx) %}
                                                 {{ _(witness at %s of:::xx)|capitalize }}
                                             {% endmacro %}
                                             {% macro timeline() %}
                                                 <div class="highlight1">
                                                     {% if has_occupation %}{{ advanced("occu", capitalize(occupation)) }}{% endif %}
                                                     {% if ( has_linked_pages and has_linked_page.OCCU ) %}
                                                         {% if has_occupation %},{% endif %}
                                                         {{ linked_page.OCCU }}
                                                     {% endif %}
                                                 </div>
                                                 {# foreach not implemented yet #}{% if ( not cancel_links ) %}{{ timeline_tree(l_ref) }}{% endif %}{% endmacro %}{% macro descmax() %}{% if has_children %}{# foreach not implemented yet #}{% endif %}{% endmacro %}{% macro desc(xx) %}{# foreach not implemented yet #}{% endmacro %}{% macro ascmax() %}{# foreach not implemented yet #}{% endmacro %}{% macro asc(xx) %}{# foreach not implemented yet #}
                                             {% endmacro %}
                                             {% macro nav_with_sosa_ref(xx) %}
                                                 <a id="nav_sosa_ref"
                                                    {% if ( bvar.access_by_key == "yes" ) %}href="{{ prefix_set.iz }}pz={{ first_name_key }}&nz={{ surname_key }}{% if ( evar.ocz != 0 ) %}&ocz={{ occ }}{% endif %}
                                                    {{ self.access }}
                                                    {{ l_url }}
                                                    "
                                                    {% else %}
                                                    href="{{ prefix_set.iz }}iz={{ self.index }}&{{ self.access }}{{ l_url }}"
                                                    {% endif %}
                                                    title="{{ _(navigation with %t as Sosa reference:::xx)|capitalize }} {{ lcS }}"
                                                    {{ laS }}> √  </a>
                                             {% endmacro %}
                                             {% macro sosainfo() %}
                                                 {% if ( not cancel_links ) %}
                                                     {% if ( sosa == 1 ) %}
                                                         {{ _(Sosa)|capitalize }} 1
                                                     {% else %}
                                                         {% if ( has_sosa and ( sosa != 1 ) ) %}
                                                             {% with %}
                                                                 {% set l_sosa_ref = a_of_b(, link_name("sosa_ref")) %}<a href="/m=A&t=X&i={{ sosa_ref.index }}&i1={{ index }}&l={{ max_desc_level }}&image={{ evar.image }}"
    title="{{ a_of_b(_(ancestor/ancestors, variant='1')|capitalize, sosa_ref) }} {{ _(up to) }} {{ self }}">{{ _(Sosa)|capitalize }} {{ sosa }}</a>
                                                                 {{ l_sosa_ref }}
                                                             {% endwith %}
                                                         {% endif %}
                                                     {% endif %}
                                                     {% if ( ( not browsing_with_sosa_ref ) or ( sosa_ref.index != index ) ) %}{{ nav_with_sosa_ref(self) }}{% endif %}
                                                 {% endif %}
                                             {% endmacro %}
                                             <body {{ body_prop }} id="perso">
                                                 {% include 'hed' %}
                                                 <div class="container" onclick="void(0);">
                                                     {{ message_to_wizard }}
                                                     {% if ( evar.del == "on" ) %}
                                                         <h1 class="del">
                                                             {{ _(delete::)|capitalize }} {{ _(person/persons, variant='0') }} (-) {{ _(or) }} {{ _(family/families, variant='0') }} (&)
                                                         </h1>
                                                         {% if ( wizard and ( bvar.can_kill_ancestors == "yes" ) ) %}
                                                             <p>
                                                                 <strong>/!\ can_kill_ancestors=yes</strong>
                                                                 <a class="del"
                                                                    href="/m=KILL_ANC;i={{ index }}"
                                                                    target="ifr"
                                                                    onclick="javascript:deleted(this);"
                                                                    title="{{ _(delete::ancestor/ancestors, variant='0') }}">{{ self }} <em>/!\ {{ _(delete::ancestor/ancestors, variant='0') }} /!\</em></a>
                                                                 <strong>can_kill_ancestors=yes /!\</strong>
                                                             </p>
                                                         {% endif %}
                                                     {% endif %}
                                                     <div>
                                                         <div class="col1">
                                                             <div class="person">
                                                                 <h1 class="ch1 h1_{{ sex }} h1_{{ has_families }}{{ has_sosa }}"
                                                                     style="margin-top:{% if ( evar.wide != "on" ) %}15{% else %}30{% endif %}px">
                                                                     {% if has_public_name %}
                                                                         {{ link_s("n", public_name) }}
                                                                     {% else %}
                                                                         {% if cancel_links %}
                                                                             {{ first_name }}
                                                                         {% else %}
                                                                             <a href="/m=S;p={{ first_name_key }}">{{ first_name }}</a>
                                                                         {% endif %}
                                                                     {% endif %}
                                                                     {{ sp }}
                                                                     {% if has_qualifiers %}<em>{{ qualifier }}</em>{% endif %}
                                                                     {% if cancel_links %}
                                                                         {{ surname }}
                                                                     {% else %}
                                                                         <a style="font-variant: small-caps;" href="/m=S;n={{ surname_key }}">{{ surname }}</a>
                                                                     {% endif %}
                                                                     <small>{{ link_dates("self") }}</small>
                                                                 </h1>
                                                                 {% if ( has_image and ( evar.image != "off" ) ) %}
                                                                     <div>
                                                                         <a href="{{ image_html_url }}" {{ l_on1 }}>
                                                                             <img class="person_img"
                                                                                  src="{{ image_url }}"
                                                                                  alt="{{ _(image/images, variant='0') }}">
                                                                         </a>
                                                                     </div>
                                                                 {% endif %}
                                                                 <p class="data1">
                                                                     {% if has_nobility_titles %}
                                                                         <br>
                                                                         <em>{# foreach not implemented yet #}</em>
                                                                     {% endif %}
                                                                     {% if ( has_linked_pages and has_linked_page.HEAD ) %}
                                                                         {{ linked_page.HEAD }}
                                                                         <br>
                                                                     {% endif %}
                                                                     {% if has_qualifiers %}
                                                                         <br>
                                                                         {{ lazy_print("") }}{# foreach not implemented yet #}{% endif %}{% if has_aliases %}{{ lazy_print("") }}{% if has_qualifiers %}<br>{% endif %}<em><strong>{# foreach not implemented yet #}</strong></em>
                                                                     {% endif %}
                                                                     {% if ( has_public_name or has_qualifiers ) %}
                                                                         {% if ( has_aliases or has_qualifiers ) %}<br>{% endif %}
                                                                         <span style="font-size:13pt">{{ link_s("p", first_name) }}{{ sp }}{{ link_s("n", surname) }}</span>
                                                                     {% endif %}
                                                                     {% if has_first_names_aliases %}
                                                                         {{ lazy_print("") }}
                                                                         <br>
                                                                         {# foreach not implemented yet #}
                                                                     {% endif %}
                                                                     {% if has_surnames_aliases %}
                                                                         {{ lazy_print("") }}
                                                                         <br>
                                                                         {# foreach not implemented yet #}
                                                                     {% endif %}
                                                                     <br>
                                                                     {% if ( is_dead and computable_death_age ) %}{{ _(age at death)|capitalize }}{{ _(:) }} {{ curr_age() }}{% endif %}
                                                                     {% if ( ( not is_dead ) and computable_age ) %}{{ _(age)|capitalize }}{{ _(:) }} {{ curr_age() }}{% endif %}
                                                                 </p>
                                                             </div>
                                                             {{ timeline() }}
                                                             {% if ( bvar.timeline == "yes" ) %}
                                                                 {% include 'timeline' %}
                                                             {% endif %}
                                                             {% if has_relations %}
                                                                 <div class="relations">
                                                                     <div>
                                                                         {{ reset_count }}{# foreach not implemented yet #}{# foreach not implemented yet #}{# foreach not implemented yet #}
                                                                         {% with %}
                                                                             {% set cnt = 0 %}
                                                                             <br>
                                                                             <span>
                                                                                 {% if ( ( not cancel_links ) and ( cnt > 1 ) ) %}{{ relations_tree(l_ref) }}{% endif %}
                                                                                 {{ _(relation/relations, variant='1')|capitalize }}
                                                                                 {% if ( ( not cancel_links ) and ( cnt > 1 ) ) %}</a>{% endif %}
                                                                         </span>
                                                                     </div>
                                                                     {# foreach not implemented yet #}{# foreach not implemented yet #}{# foreach not implemented yet #}
                                                                 </div>
                                                             {% endwith %}
                                                         {% endif %}
                                                         <div class="notes">
                                                             {% if ( has_notes or ( has_linked_page.BNOTE or has_linked_page.NOTE ) ) %}
                                                                 <br>
                                                                 <span {% if ( not has_linked_pages ) %}class="ch2"{% endif %}>
                                                                     {% if ( has_linked_pages and ( not cancel_links ) ) %}
                                                                         <a href="/m=LINKED;{{ access }}"
                                                                            class="ch2"
                                                                            title="{{ _(linked pages)|capitalize }}">
                                                                         {% endif %}
                                                                         {{ _(note/notes, variant='1')|capitalize }}
                                                                         {% if ( has_linked_pages and ( not cancel_links ) ) %}<small>*</small>{% endif %}
                                                                         {% if ( has_linked_pages and ( not cancel_links ) ) %}</a>{% endif %}
                                                                 </span>
                                                                 <div>
                                                                     {% if has_linked_page.BNOTE %}{{ linked_page.BNOTE }}{% endif %}
                                                                     {{ notes }}
                                                                     {% if has_linked_page.NOTE %}{{ linked_page.NOTE }}{% endif %}
                                                                 </div>
                                                             {% endif %}
                                                         </div>
                                                         {% if has_families %}{# foreach not implemented yet #}{% endif %}
                                                         {{ lazy_print("<div class = "sources">
                                                         <h2 class="ch2">"_(source/sources, variant='1')|capitalize"</h2>
                                                         <ul>
                                                             ") }}
                                                             {% if ( has_sources or has_linked_page.BIBLIO ) %}
                                                                 {% if has_linked_page.BIBLIO %}
                                                                     {{ lazy_force }}
                                                                     <li>{{ linked_page.BIBLIO }}</li>
                                                                 {% endif %}
                                                                 {# foreach not implemented yet #}{% endif %}{# foreach not implemented yet #}
                                                                 {% if lazy_printed %}
                                                                 </ul>
                                                             </div>
                                                         {% endif %}
                                                     </div>
                                                     <div class="col2">
                                                         <hr {% if ( lwide == "off" ) %}style="display:none"{% endif %}>
                                                         <br>
                                                         <br>
                                                         {{ anc_families() }}
                                                         {% if has_families %}
                                                             <div style="clear:both">
                                                                 <div>
                                                                     {% if ( not has_children ) %}
                                                                         <h2 class="ch2">
                                                                             {% if ( nb_families > 1 ) %}
                                                                                 {{ _(spouse/spouses, variant='1')|capitalize }}
                                                                             {% else %}
                                                                                 {{ _(spouse/spouses, variant='0')|capitalize }}
                                                                             {% endif %}
                                                                         </h2>
                                                                     {% else %}
                                                                         {% if has_children %}
                                                                             <span class="menu"
                                                                                   style="position:relative;
                                                                                          margin-top:2em;
                                                                                          margin-left:20px"><small>{{ descmax() }}</small></span>
                                                                             <br>
                                                                             <span class="menu" style="position:relative;">
                                                                                 {% with %}
                                                                                     {% set lv = (evar.maxlev) if (( evar.maxlev != "" )) else ((bvar.maxlev) if (( bvar.maxlev != "" )) else ("1")) %}<span>
                                                                                     <span class="ch2" style="margin-top:-4px;">{{ _(descendants)|capitalize }}</span>
                                                                                     {% if ( not cancel_links ) %}
                                                                                         <span class="s_menu" style="font-size:1em">
                                                                                             {% if ( max_desc_level > 1 ) %}
                                                                                                 {% with %}
                                                                                                     {% set l2 = ( max_desc_level + 1 ) %}
                                                                                                     {% for i in 1..l2 %}
                                                                                                         <a href="/{{ access }}{% if ( evar.spouse != "" ) %}&spouse={{ evar.spouse }}{% endif %}{% if ( evar.age != "" ) %}&age={{ evar.age }}{% endif %}{% if ( evar.image != "" ) %}&image={{ evar.image }}{% endif %}{% if ( evar.wide != "" ) %}&wide={{ evar.wide }}{% endif %}{% if ( evar.misc != "" ) %}&misc={{ evar.misc }}{% endif %}&maxlev={{ i }}{% if ( evar.asclev != "" ) %}&asclev={{ evar.asclev }}{% endif %}"
                                                                                                            style="{% if ( ( ( evar.maxlev == "" ) and ( i == 2 ) ) or ( i == evar.maxlev ) ) %}background-color:{% if ( bvar.css == 1 ) %}#666;
                                                                                                                   {% else %}#EEE;
                                                                                                                   {% endif %}{% endif %}width:17px"
                                                                                                            title="{{ i }} {% if ( i == 1 ) %}{{ _(generation/generations, variant='0') }}{% else %}{{ _(generation/generations, variant='1') }}{% endif %}{{ nl }}{% if ( ( i == 1 ) and ( nb_children == 1 ) ) %}{{ _(a descendant, variant='0') }}{% else %}{{ desc(i) }} {{ _(descendants) }}{% endif %}">
                                                                                                             {% if ( i < 10 ) %}{% endif %}
                                                                                                         {{ i }}</a>
                                                                                                     {% endfor %}
                                                                                                 {% endwith %}
                                                                                             {% endif %}
                                                                                             <a href="/m=D;t=T;v=4;image=on;{{ access }}"
                                                                                                {% if ( not has_parents ) %}{{ laY }}{% endif %}>{{ _(descendants tree)|capitalize }}</a>
                                                                                             {% with %}
                                                                                             {% set l1 = min(max_desc_level, 5) %}<a href="/m=D&t=D&v={{ l1 }}&maxv={{ max_desc_level }}&i={{ index }}">{{ _(descendant tree view)|capitalize }}</a><a href="/m=D&t=H&v={{ max_desc_level }}&num=on&birth=on&birth_place=on&marr=on&marr_date=on&marr_place=on&child=on&death=on&death_place=on&death_age=on&occu=on&gen=1&{{ access }}">{{ _(table)|capitalize }} {{ _(descendants) }}</a><a href="/m=D&t=L&v=3&maxv={{ max_desc_level }}&siblings=on&alias=on&spouse=on&parents=on&rel=on&witn=on&notes=on&src=on&upd=on&hide=on&{{ access }}">{{ _(long display)|capitalize }}</a><a href="/m=D;{{ access }}">Menu {{ _(tools) }} {{ _(descendants) }}</a></span>
                                                                                         {% endwith %}
                                                                                     {% endif %}
                                                                                 </span>
                                                                             </span>
                                                                         {% endwith %}
                                                                     {% endif %}
                                                                 {% endif %}
                                                             </div>
                                                             {# foreach not implemented yet #}
                                                         </div>
                                                     {% else %}
                                                         {% if ( wizard and ( not cancel_links ) ) %}
                                                             <div class="button" style="clear:both">
                                                                 {% if ( ( ( first_name == "?" ) or ( surname == "?" ) ) and ( ( nb_families != 0 ) or has_parents ) ) %}
                                                                 {% else %}
                                                                     {% if ( is_male or is_female ) %}
                                                                         <a href="/m=ADD_FAM;ip={{ index }}"
                                                                            title="{{ _(add::family/families, variant='0')|capitalize }} (A)"
                                                                            {{ l_on1 }}>👫 {{ _(add::family/families, variant='0') |capitalize }}</a>
                                                                        <br>
                                                                    {% endif %}
                                                                {% endif %}
                                                            </div>
                                                        {% endif %}
                                                    {% endif %}
                                                    {% if ( ( not cancel_links ) and ( wizard and ( ( evar.misc == "yes" ) or ( bvar.misc == "yes" ) ) ) ) %}
                                                        <div class="div3">
                                                            <form name="syntax" method="get" action="#">
                                                                <ul>
                                                                    <li>index #{{ index }}</li>
                                                                    <li>
                                                                        <label>
                                                                            wikitext
                                                                            <input onclick="javascript: this.select();"
                                                                                   type="text"
                                                                                   name="wiki"
                                                                                   size="70"
                                                                                   value="[[{{ capitalize(first_name_key) }}/{{ capitalize(surname_key) }}/{{ occ }}/{{ first_name }} {{ surname }}]]" />
                                                                        </label>
                                                                    </li>
                                                                </ul>
                                                            </form>
                                                            {{ misc_names }}
                                                        </div>
                                                    {% endif %}
                                                    {% if ( evar.del == "on" ) %}
                                                        <iframe style="position:fixed;
                                                                       bottom:0px;
                                                                       right:0px;
                                                                       width:400px;
                                                                       height:120px;
                                                                       background-color:#AAA"
                                                                name="ifr">
                                                            <p>This browser does not like iframe!</p>
                                                        </iframe>
                                                    {% endif %}
                                                </div>
                                                {% if ( not cancel_links ) %}
                                                    {{ menu() }}{{ buttons() }}
                                                    {% include 'trl' %}
                                                    {% include 'copyr' %}
                                                {% endif %}
                                            </div>
                                            {% include 'js' %}
                                            {{ query_time }}
                                        </body>
                                    </html>
                                {% endwith %}
                            {% endwith %}
                        {% endwith %}
                    {% endwith %}
                {% endwith %}
            {% endwith %}
        {% endwith %}
    {% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}

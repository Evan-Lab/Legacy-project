{# 
  Generated by JinjaGenerator for template 'templm/updfam'
    at 2025-10-26T15:16:34.618005

  Used macros:
  - load_focus()
  - onjq1a(z1)
  - onjq1a1(z1)
  - accesskey(z1)
  - place(z1, z2)
  - date_place(xx, z1, z2, z3, z4, z5)
  - link_create1(z1, z2, z3, xx)
  - link_create2(z1, z2, xx)
  - one_parent(z1)
  - one_child(z1)

  Used includes:
  - css
  - js_upd
  - updind_updfam
  - hed
  - upd_datalist
  - trl
  - copyr
  - js

  Used variables:
  - evar_m (x32)
  - evar_ip (x3)
  - evar_i (x6)
  - charset (x1)
  - ak1 (x2)
  - ak2 (x2)
  - ak3 (x3)
  - ak7 (x3)
  - lta (x2)
  - ltb (x2)
  - ltc (x1)
  - ak4 (x1)
  - evar.i (x2)
  - evar.iexcl (x2)
  - evar.fexcl (x2)
  - evar.m (x1)
  - evar.ip (x1)
  - father.first_name (x1)
  - marriage.prec (x1)
  - lfa3 (x1)
  - z2_place (x1)
  - l_on5 (x2)
  - xx.create.z1_day (x1)
  - xx.create.z1_month (x1)
  - xx.create.z1_year (x1)
  - xx.create.z1_place (x1)
  - xx.create (x5)
  - xx.occ (x4)
  - xx.create.sex (x1)
  - l_d (x3)
  - l_m (x3)
  - ldmy (x2)
  - l_dd (x3)
  - l_mm (x3)
  - l_yy (x3)
  - l1 (x7)
  - l (x4)
  - l2 (x3)
  - parent.create (x1)
  - parent.first_name (x2)
  - parent.surname (x2)
  - parent.create.occupation (x2)
  - lfa1 (x1)
  - sp (x1)
  - l_on3 (x2)
  - l_on8 (x3)
  - l_on7 (x2)
  - l_on4 (x3)
  - z1 (x1)
  - child.create (x1)
  - child.first_name (x1)
  - child.surname (x1)
  - child.create.occupation (x1)
  - body_prop (x1)
  - message_to_wizard (x1)
  - action (x1)
  - hidden (x1)
  - evar_rdsrc (x1)
  - digest (x1)
  - nl (x6)
  - evar_i2 (x1)
  - evar_ini1 (x2)
  - evar_ini2 (x2)
  - lt4 (x1)
  - lt6 (x1)
  - lt3 (x1)
  - lfa2 (x1)
  - lfc2 (x1)
  - lpaO (x1)
  - lpcOk (x1)
  - has_fevents (x1)
  - lfa4 (x1)
  - lfc4 (x1)
  - lt5 (x1)
  - lt2 (x1)
  - lfa5 (x1)
  - l_on1s (x4)
  - comment (x2)
  - bvar.move_comment (x1)
  - bvar.origin_file (x1)
  - fsources (x3)
  - lfa6 (x2)
  - l_on6 (x1)
  - evar_psrc (x2)
  - evar_dsrc (x1)
  - origin_file (x1)
  - query_time (x1)
#}
<!DOCTYPE html>
<html>
    <head>
        <!-- $Id: templm/updfam.txt v7.0 2016/03/21 22:16:53 $ -->
        <title>
            {% if ( ( evar_m == "ADD_FAM" ) or ( evar_m == "ADD_FAM_OK" ) ) %}
                {{ _(add::family/families, variant='0') |capitalize }}
            {% else %}
                {% if ( evar_m == "ADD_PAR" ) %}
                    {{ _(add::parents, variant='0') |capitalize }} - #{{ evar_ip }}
                {% else %}
                    {% if ( ( evar_m == "MOD_FAM" ) or ( evar_m == "MOD_FAM_OK" ) ) %}
                        {{ _(modify::family/families, variant='0') |capitalize }} - #{{ evar_i }}
                    {% else %}
                        {% if ( ( evar_m == "MRG_DUP_FAM_Y_N" ) or ( ( evar_m == "MRG_FAM" ) or ( ( evar_m == "MRG_FAM_OK" ) or ( evar_m == "MRG_MOD_FAM_OK" ) ) ) ) %}
                            {{ _(merge::family/families, variant='1') |capitalize }} - #{{ evar_i }}
                        {% endif %}
                    {% endif %}
                {% endif %}
            {% endif %}
        </title>
        <meta name="robots" content="none" />
        <meta charset="{{ charset }}" />
        <link rel="shortcut icon"
              href="{{ url_for('static/images/', path='favicon_gwd.png') }}" />
        {% include 'css' %}
        {% include 'js_upd' %}
        {% include 'updind_updfam' %}
        {% with %}
            {% set lt1 = <abbr title=ak1ak2ak3ak7>#</abbr> %}
            {% with %}
                {% set lt2 = "<abbr title=""ltaltbltc"">"_(date/dates, variant='0')"</abbr>" %}
                {% with %}
                    {% set lt3 = "<abbr title=""_(place/places, variant='0')|capitalize" 1"_(:)" "_(birth)" "_(father/mother, variant='0')" 2"_(:)" "_(death)" "_(father/mother, variant='0')" 3"_(:)" "_(birth)" "_(father/mother, variant='1')" 4"_(:)" "_(death)" "_(father/mother, variant='1')" *"_(:)" "_(marriage/marriages, variant='0')" 0"_(:)" "_(birth)" "_(child/children, variant='0')" 1 +"_(:)" "_(death)" "_(child/children, variant='0')" 1">
                                        "_(place/places, variant='0')"</abbr>
                                    " %}
                {% with %}
                    {% set lt4 = title=ak1ak2ak3ak7ak4 %}
                    {% with %}
                        {% set lt5 = <abbr title=ak3ak7>#</abbr> %}
                        {% with %}
                            {% set lt6 = "<abbr title=""ltaltb"">"_(date/dates, variant='0')"</abbr>" %}
                            {% macro load_focus() %}
                                onload="oL1();oL2();
                                {% if ( ( evar_m == "ADD_FAM" ) or ( ( evar_m == "ADD_PAR" ) or ( evar_m == "MOD_FAM" ) ) ) %}
                                    jq1b('{{ evar.i }}');
                                    {% if ( ( evar_m == "ADD_FAM" ) or ( evar_m == "ADD_PAR" ) ) %}
                                        {% if ( father.first_name == "" ) %}
                                            sIV('pa1_fn')
                                        {% else %}
                                            sIV('pa2_fn')
                                        {% endif %}
                                    {% else %}
                                        {% if ( marriage.prec != "sure" ) %}
                                            sIV('lfc3')
                                        {% else %}
                                            addChild(1,1)
                                        {% endif %}
                                    {% endif %}
                                {% endif %}
                                "
                            {% endmacro %}
                            {% macro onjq1a(z1) %}
                                onkeydown="if(event.keyCode == 13)tUC(this)" onblur="tUC(this);jq1a('z1')"
                            {% endmacro %}
                            {% macro onjq1a1(z1) %}
                                onkeydown="if(event.keyCode == 13)tUC1(this)" onblur="tUC1(this);jq1a('z1')"
                            {% endmacro %}
                            {% macro accesskey(z1) %}
                                {% if ( "z1" == "marr" ) %}{{ lfa3 }}{% endif %}
                            {% endmacro %}
                            {% macro place(z1, z2) %}
                                <label>
                                    {{ _(place/places, variant='0') }}<input id="z1_place"
       name="z1_place"
       size="44"
       maxlength="200"
       value="{{ z2_place }}"
       onblur="fillPlaceFam(this)"
       {{ l_on5 }} />
                                </label>
                            {% endmacro %}
                            {% macro date_place(xx, z1, z2, z3, z4, z5) %}
                                {% with %}
                                    {% set l_d = xx.create.z1_day %}
                                    {% with %}
                                        {% set l_m = xx.create.z1_month %}
                                        {% with %}
                                            {% set l_dd = ("0") if (( ( l_d != "" ) and ( l_d < 10 ) ))l_d %}
                                            {% with %}
                                                {% set l_mm = ("0") if (( ( l_m != "" ) and ( l_m < 10 ) ))l_m %}
                                                {% with %}
                                                    {% set l_yy = xx.create.z1_year %}<span class="dmyt">
                                                    {% if ( ldmy == "dd" ) %}
                                                        <input id="z2_dd"
                                                               name="z2_dd"
                                                               class="d"
                                                               autocomplete="off"
                                                               size="1"
                                                               maxlength="2"
                                                               value="{{ l_dd }}"
                                                               onkeypress="javascript:return oKPdd(event,'z2','_dd','_mm');" />
                                                        <input id="z2_mm"
                                                               name="z2_mm"
                                                               class="m"
                                                               autocomplete="off"
                                                               size="1"
                                                               maxlength="2"
                                                               value="{{ l_mm }}"
                                                               list="dlmonth"
                                                               onkeypress="javascript:return oKPmm(event,'z2','_mm','_yy');"
                                                               onkeydown="javascript:return oKD1(event,'z2_mm','z2_dd')" />
                                                        <input id="z2_yy"
                                                               name="z2_yyyy"
                                                               class="ys"
                                                               autocomplete="off"
                                                               size="4"
                                                               maxlength="12"
                                                               value="{{ l_yy }}"
                                                               onkeypress="javascript:return cF2(event,'z3',z4,'z5');"
                                                               onkeydown="if(event.keyCode == 13)javascript:evSD('z2');return oKD1(event,'z2_yy','z2_mm')"
                                                               onblur="javascript:evSD('z2')" />
                                                    {% else %}
                                                        {% if ( ldmy == "mm" ) %}
                                                            <input id="z2_mm"
                                                                   name="z2_mm"
                                                                   class="m"
                                                                   autocomplete="off"
                                                                   size="1"
                                                                   maxlength="2"
                                                                   value="{{ l_mm }}"
                                                                   list="dlmonth"
                                                                   onkeypress="javascript:return oKPmm(event,'z2','_mm','_dd');" />
                                                            <input id="z2_dd"
                                                                   name="z2_dd"
                                                                   class="d"
                                                                   autocomplete="off"
                                                                   size="1"
                                                                   maxlength="2"
                                                                   value="{{ l_dd }}"
                                                                   onkeypress="javascript:return oKPdd(event,'z2','_dd','_yy');"
                                                                   onkeydown="javascript:return oKD1(event,'z2_dd','z2_mm')" />
                                                            <input id="z2_yy"
                                                                   name="z2_yyyy"
                                                                   class="ys"
                                                                   autocomplete="off"
                                                                   size="4"
                                                                   maxlength="12"
                                                                   value="{{ l_yy }}"
                                                                   onkeypress="javascript:return cF2(event,'z3',z4,'z5');"
                                                                   onkeydown="if(event.keyCode == 13)javascript:evSD('z2');return oKD1(event,'z2_yy','z2_dd')"
                                                                   onblur="javascript:evSD('z2')" />
                                                        {% else %}
                                                            <input id="z2_yy"
                                                                   name="z2_yyyy"
                                                                   class="ys"
                                                                   autocomplete="off"
                                                                   size="4"
                                                                   maxlength="12"
                                                                   value="{{ l_yy }}"
                                                                   onkeypress="javascript:return cF2(event,'z3',z4,'z5');"
                                                                   onkeydown="if(event.keyCode == 13)javascript:evSD('z2')"
                                                                   onblur="javascript:evSD('z2')" />
                                                            <input id="z2_mm"
                                                                   name="z2_mm"
                                                                   class="m"
                                                                   autocomplete="off"
                                                                   size="1"
                                                                   maxlength="2"
                                                                   value="{{ l_mm }}"
                                                                   list="dlmonth"
                                                                   onkeypress="javascript:return oKPmm(event,'z2','_mm','_dd');"
                                                                   onkeydown="javascript:return oKD1(event,'z2_mm','z2_yy')" />
                                                            <input id="z2_dd"
                                                                   name="z2_dd"
                                                                   class="d"
                                                                   autocomplete="off"
                                                                   size="1"
                                                                   maxlength="2"
                                                                   value="{{ l_dd }}"
                                                                   onkeypress="javascript:return oKPdd(event,'z2','_dd','_pl');"
                                                                   onkeydown="javascript:return oKD1(event,'z2_dd','z2_mm')" />
                                                        {% endif %}
                                                    {% endif %}
                                                <input id="z2_pl"
                                                       name="z2_pl"
                                                       size="44"
                                                       maxlength="200"
                                                       class="pl"
                                                       value="{{ xx.create.z1_place }}"
                                                       onblur="fillPlaceFam(this)"
                                                       {{ l_on5 }} /></span>
                                            {% endwith %}
                                        {% endwith %}
                                    {% endwith %}
                                {% endwith %}
                            {% endwith %}
                        {% endmacro %}
                        {% macro link_create1(z1, z2, z3, xx) %}
                            {% with %}
                                {% set l1 = F %}
                                <input type="hidden" id="z1z2_p" name="z1z2_p" value="{{ xx.create }}" />
                                <input id="z1z2_occ"
                                       name="z1z2_occ"
                                       class="occz3"
                                       placeholder="{{ l1 }}"
                                       autocomplete="off"
                                       size="3"
                                       maxlength="8"
                                       onblur="oB4('z1z2')"
                                       {% if ( xx.create == "create" ) %}{% else %}{% if ( xx.occ == "" ) %} value="0" {% else %} value="{{ xx.occ }}" {% endif %}
                                       {% endif %}>
                            {% endwith %}
                        {% endmacro %}
                        {% macro link_create2(z1, z2, xx) %}
                            {% with %}
                                {% set l = xx.create.sex %}
                                {% with %}
                                    {% set l1 = ("M") if (( l == "male" )) else (("F") if (( l == "female" )) else ("N")) %}
                                    {% with %}
                                        {% set l2 = (("0") if (( l == "male" )) else (("1") if (( l == "female" )) else ("2"))) if (( xx.create == "create" )) %}
                                        <input type="hidden" id="z1z2_sex" name="z1z2_sex" value="{{ l1 }}" />
                                        <input type="hidden" id="z1z2_p" name="z1z2_p" value="{{ xx.create }}" />
                                        <input id="z1z2_occ"
                                               name="z1z2_occ"
                                               class="occ{{ l2 }}"
                                               placeholder="{{ l1 }}"
                                               autocomplete="off"
                                               size="5"
                                               maxlength="8"
                                               onkeypress="javascript:return oKP2(event,'z1','z2','_occ','')"
                                               onblur="oB2('z1z2')"
                                               {% if ( xx.create == "create" ) %} value="" {% else %}{% if ( xx.occ == "" ) %} value="0" {% else %} value="{{ xx.occ }}" {% endif %}
                                               {% endif %}>
                                    {% endwith %}
                                {% endwith %}
                            {% endwith %}
                        {% endmacro %}
                        {% macro one_parent(z1) %}
                            {% with %}
                                {% set l1 = ("hide") if (( parent.create == "link" )) else ("vis") %}
                                {% if ( "z1" == "1" ) %}
                                    <tr>
                                        <td>
                                            {{ link_create1('pa', 'z1', '0', 'parent') }}
                                            <div id="pa1_jq1"></div>
                                        </td>
                                        <td>
                                            <input id="pa1_fn"
                                                   name="pa1_fn"
                                                   size="30"
                                                   maxlength="200"
                                                   placeholder="{{ _(first name/first names, variant='0') }}"
                                                   value="{{ parent.first_name }}"
                                                   {{ lfa1 }}
                                                   {{ sp }}
                                                   onkeypress="javascript:return cF2(event,'pa',1,'_fn');"
                                                   {{ l_on3 }}
                                                   {{ l_on8 }} />
                                            <br />
                                            <input id="pa1_sn"
                                                   name="pa1_sn"
                                                   class="ar"
                                                   size="30"
                                                   maxlength="200"
                                                   placeholder="{{ _(surname/surnames, variant='0') }}"
                                                   value="{{ parent.surname }}"
                                                   onkeypress="javascript:return cF2(event,'pa',1,'_sn');"
                                                   {{ onjq1a("pa1") }}
                                                   {{ l_on7 }} />
                                        </td>
                                        <td class="jq2">
                                            <div id="pa1_jq2"></div>
                                            <div id="pa1_jq3"></div>
                                            <span id="dppa1" class="{{ l1 }}">{{ date_place('parent', 'birth', 'pa1b', 'pa', '1', 'b_yy') }}{{ date_place('parent', 'death', 'pa1d', 'pa', '1', 'd_yy') }}</span>
                                        </td>
                                        <td class="jq4">
                                            <div id="pa1_jq4"></div>
                                            <input id="pa1_occupation"
                                                   name="pa1_occu"
                                                   class="occu {{ l1 }}"
                                                   size="40"
                                                   maxlength="200"
                                                   value="{{ parent.create.occupation }}"
                                                   {{ l_on4 }} />
                                        </td>
                                    </tr>
                                {% else %}
                                    <tr>
                                        <td>
                                            {{ link_create1('pa', 'z1', '1', 'parent') }}
                                            <div id="pa2_jq1"></div>
                                        </td>
                                        <td>
                                            <input id="pa2_fn"
                                                   name="pa2_fn"
                                                   size="30"
                                                   maxlength="200"
                                                   placeholder="{{ _(first name/first names, variant='0') }}"
                                                   value="{{ parent.first_name }}"
                                                   onkeypress="javascript:return cF2(event,'pa',2,'_fn');"
                                                   {{ l_on3 }}
                                                   {{ l_on8 }} />
                                            <br />
                                            <input id="pa2_sn"
                                                   name="pa2_sn"
                                                   class="ar"
                                                   size="30"
                                                   maxlength="200"
                                                   placeholder="{{ _(surname/surnames, variant='0') }}"
                                                   value="{{ parent.surname }}"
                                                   onkeypress="javascript:return cF2(event,'pa',2,'_sn');"
                                                   {{ onjq1a("pa2") }}
                                                   {{ l_on7 }} />
                                        </td>
                                        <td class="jq2">
                                            <div id="pa2_jq2"></div>
                                            <div id="pa2_jq3"></div>
                                            <span id="dppa2" class="{{ l1 }}">{{ date_place('parent', 'birth', 'pa2b', 'pa', '2', 'b_yy') }}{{ date_place('parent', 'death', 'pa2d', 'pa', '2', 'd_yy') }}</span>
                                        </td>
                                        <td class="jq4">
                                            <div id="pa2_jq4"></div>
                                            <input id="pa2_occupation"
                                                   name="pa2_occu"
                                                   class="occu {{ l1 }}"
                                                   size="40"
                                                   maxlength="200"
                                                   value="{{ parent.create.occupation }}"
                                                   {{ l_on4 }} />
                                        </td>
                                    </tr>
                                {% endif %}
                            {% endwith %}
                        {% endmacro %}
                        {% macro one_child(z1) %}
                            {% with %}
                                {% set l1 = ( z1 + 1 ) %}
                                {% with %}
                                    {% set l2 = ("hid") if (( child.create == "link" )) else ("vis") %}
                                    <tr id="chz1">
                                        <td>
                                            {{ link_create2('ch', 'z1', 'child') }}
                                            <div id="chz1_jq1"></div>
                                        </td>
                                        <td>
                                            <input id="chz1_fn"
                                                   name="chz1_fn"
                                                   size="30"
                                                   maxlength="200"
                                                   value="{{ child.first_name }}"
                                                   onkeypress="javascript:return cF2(event,'ch',z1,'_fn');"
                                                   {{ onjq1a1("chz1") }}
                                                   {{ l_on8 }} />
                                            <br />
                                            <input type="hidden"
                                                   id="chz1_sn"
                                                   name="chz1_sn"
                                                   class="ar"
                                                   value="{{ child.surname }}"
                                                   onkeypress="javascript:return cF2(event,'ch',z1,'_sn');"
                                                   {{ onjq1a("chz1") }} />
                                        </td>
                                        <td class="jq2">
                                            <div id="chz1_jq2"></div>
                                            <div id="chz1_jq3"></div>
                                            <span id="dpchz1" class="{{ l2 }}">{{ date_place('child', 'birth', 'chz1b', 'ch', 'z1', 'b_yy') }}{{ date_place('child', 'death', 'chz1d', 'ch', 'z1', 'd_yy') }}</span>
                                        </td>
                                        <td class="jq4">
                                            <div id="chz1_jq4"></div>
                                            <input id="chz1_occupation"
                                                   name="chz1_occu"
                                                   class="occu {{ l2 }}"
                                                   size="40"
                                                   maxlength="200"
                                                   value="{{ child.create.occupation }}"
                                                   {{ l_on4 }} />
                                        </td>
                                    </tr>
                                {% endwith %}
                            {% endwith %}
                        {% endmacro %}
                    </head>
                    <body {{ body_prop }} id="upd" {{ load_focus() }}>
                        {% include 'hed' %}
                        {{ message_to_wizard }}
                        <form name="upd" method="post" action="{{ action }}">
                            <div id="jq" style="display:none"></div>
                            <p style="display:none;">
                                <span id=dmy>{{ _(!dates order, variant='0') }}</span>
                                {{ hidden }}
                                <input type="hidden" name="rdsrc" value="{{ evar_rdsrc }}" />
                                {% include 'upd_datalist' %}
                                <input type="hidden" name="digest" value="{{ digest }}" />
                                {% if ( evar_ip != "" ) %}
                                    <input type="hidden" name="ip" value="{{ evar_ip }}" />
                                    {{ nl }}
                                {% endif %}
                                {% if ( evar_i != "" ) %}
                                    <input type="hidden" name="i" value="{{ evar_i }}" />
                                    {{ nl }}
                                {% endif %}
                                {% if ( ( evar_m == "ADD_FAM" ) or ( evar_m == "ADD_FAM_OK" ) ) %}
                                    <input type="hidden" name="m" value="ADD_FAM_OK" />
                                    {{ nl }}
                                {% else %}
                                    {% if ( evar_m == "ADD_PAR" ) %}
                                        <input type="hidden" name="m" value="ADD_FAM_OK" />
                                        {{ nl }}
                                    {% else %}
                                        {% if ( ( evar_m == "MOD_FAM" ) or ( evar_m == "MOD_FAM_OK" ) ) %}
                                            <input type="hidden" name="m" value="MOD_FAM_OK" />
                                            {{ nl }}
                                        {% else %}
                                            {% if ( ( evar_m == "MRG_DUP_FAM_Y_N" ) or ( ( evar_m == "MRG_FAM" ) or ( ( evar_m == "MRG_FAM_OK" ) or ( evar_m == "MRG_MOD_FAM_OK" ) ) ) ) %}
                                                <input type="hidden" name="i2" value="{{ evar_i2 }}" />
                                                {% if ( ( evar_ini1 != "" ) and ( evar_ini2 != "" ) ) %}
                                                    <input type="hidden" name="ini1" value="{{ evar_ini1 }}" />
                                                    <input type="hidden" name="ini2" value="{{ evar_ini2 }}" />
                                                {% endif %}
                                                {% if ( evar.iexcl != "" ) %}<input type="hidden" name="iexcl" value="{{ evar.iexcl }}" />{% endif %}
                                                {% if ( evar.fexcl != "" ) %}<input type="hidden" name="fexcl" value="{{ evar.fexcl }}" />{% endif %}
                                                <input type="hidden" name="m" value="MRG_MOD_FAM_OK" />
                                                {{ nl }}
                                            {% endif %}
                                        {% endif %}
                                    {% endif %}
                                {% endif %}
                                {{ hevent('marr', 'marriage') }}{{ hevent('div', 'divorce') }}
                            </p>
                            <fieldset>
                                <legend>
                                    {% if ( ( evar_m == "ADD_FAM" ) or ( evar_m == "ADD_FAM_OK" ) ) %}
                                        {{ _(add::family/families, variant='0') |capitalize }}
                                    {% else %}
                                        {% if ( evar_m == "ADD_PAR" ) %}
                                            {{ _(add::parents, variant='0') |capitalize }}
                                        {% else %}
                                            {% if ( ( evar_m == "MOD_FAM" ) or ( evar_m == "MOD_FAM_OK" ) ) %}
                                                {{ _(modify::family/families, variant='0') |capitalize }} # {{ evar_i }}
                                            {% else %}
                                                {% if ( ( evar_m == "MRG_DUP_FAM_Y_N" ) or ( ( evar_m == "MRG_FAM" ) or ( ( evar_m == "MRG_FAM_OK" ) or ( evar_m == "MRG_MOD_FAM_OK" ) ) ) ) %}
                                                    {{ _(merge::family/families, variant='1') |capitalize }} # {{ evar_i }}
                                                {% endif %}
                                            {% endif %}
                                        {% endif %}
                                    {% endif %}
                                    &nbsp;&nbsp;
                                    <input type="submit" value="Ok" />
                                </legend>
                                <table>
                                    {# foreach not implemented yet #}
                                </table>
                            </fieldset>
                            <fieldset>
                                <legend>{{ _(child/children, variant='1') |capitalize }}</legend>
                                <table>
                                    <tr>
                                        <td class="bg7">
                                            <abbr {{ lt4 }}>#</abbr>
                                        </td>
                                        <td class="bg7">
                                            {{ _(first name/first names, variant='0') }} /
                                            <a id="ch_hid"
                                               style="display:none"
                                               href="javascript:visHid('ch','_sn')"
                                               title="{{ _(visualize/show/hide/summary, variant='2') }} {{ _(surname/surnames, variant='0') }}">{{ _(surname/surnames, variant='0') }}</a>
                                            <a id="ch_vis"
                                               style="display:inline"
                                               href="javascript:visHid('ch','_sn')"
                                               title="{{ _(visualize/show/hide/summary, variant='1') }} {{ _(surname/surnames, variant='0') }}"><em>{{ _(surname/surnames, variant='0') }}</em></a>
                                        </td>
                                        <td class="bg7">{{ _(birth) }} / {{ _(death) }}{{ _(:) }} {{ lt6 }} {{ lt3 }}</td>
                                        <td class="bg7">{{ _(occupation/occupations, variant='0') }}</td>
                                    </tr>
                                    {# foreach not implemented yet #}
                                    <tr id="new_child">
                                        <td colspan=4 style="display:none"></td>
                                    </tr>
                                    <tr>
                                        <td class="bg7">
                                            <a id="ach" href="javascript:addChild(1,1)" {{ lfa2 }}> + </a>
                                        </td>
                                        <td colspan=3 style="text-align:left;border:0">{{ lfc2 }}</td>
                                    </tr>
                                </table>
                            </fieldset>
                            <fieldset class="event">
                                <legend>
                                    {{ _(event/events, variant='1') |capitalize }}
                                    {% if ( evar.m != "ADD_FAM" ) %}
                                        <a id="chg_evt_fam"
                                           href="/m=CHG_EVT_FAM_ORD&i={{ evar.i }}&ip={{ evar.ip }}"
                                           {{ lpaO }}
                                           title="{{ _(invert::event/events, variant='1') |capitalize }} {{ _(family/families, variant='0') }} (Alt+{{ lpcOk }})">⇳</a>
                                    {% endif %}
                                </legend>
                                {% if has_fevents %}
                                    {# foreach not implemented yet #}
                                {% else %}
                                    {{ one_event(1, '#marr', 'fwitness') }}
                                {% endif %}
                                <dl id="new_event">
                                </dl>
                                <dl>
                                    <dt>
                                        <a href="javascript:addEvent(1,1)" {{ lfa4 }}>+ {{ _(event/events, variant='0') }}</a> {{ lfc4 }} {{ lt5 }} {{ lt2 }} {{ _(place/places, variant='0') }} {{ _(note/notes, variant='1') }} {{ _(source/sources, variant='1') }}
                                    </dt>
                                </dl>
                            </fieldset>
                            <fieldset class="f2 al">
                                <legend>
                                    <label style="font-size:inherit" for="comment" {{ lfa5 }}>{{ _(marriage notes/marriages notes, variant='0') |capitalize }}
                                    </label>
                                </legend>
                                <label>
                                    <textarea id="comment" name="comment" placeholder="{{ _(comment)|capitalize }}" rows="1" {{ l_on1s }}>
{% if ( ( comment != "" ) and ( bvar.move_comment == "yes" ) ) %}{# foreach not implemented yet #}{% else %}{{ comment }}{% endif %}</textarea>
                                </label>
                            </fieldset>
                            <fieldset class="f2 w3">
                                <legend>{{ _(source/sources, variant='1') |capitalize }}</legend>
                                <label>
                                    {% if ( fsources == "" ) %}
                                        <input id="src"
                                               name="src"
                                               placeholder="{{ _(source/sources, variant='1') |capitalize }} {{ _(family/families, variant='0') }}"
                                               maxlength="800"
                                               {{ lfa6 }}
                                               {{ l_on6 }}
                                               {{ l_on1s }}
                                               value="{{ fsources }}" />
                                    </label>
                                {% else %}
                                    <textarea id="src"
                                              name="src"
                                              placeholder="{{ _(source/sources, variant='1')|capitalize }} {{ _(family/families, variant='0') }}"
                                              rows="1"
                                              maxlength="800"
                                              {{ lfa6 }}
                                              {{ l_on1s }}>{{ fsources }}</textarea>
                                </label>
                            {% endif %}
                            <label>
                                <textarea id="psrc"
                                          name="psrc"
                                          placeholder="{{ _(source/sources, variant='1')|capitalize }} {{ _(person/persons, variant='0') }}"
                                          rows="1"
                                          maxlength="800"
                                          {{ l_on1s }}>{% if ( evar_psrc != "" ) %}{{ evar_psrc }}{% else %}{{ evar_dsrc }}{% endif %}</textarea>
                            </label>
                            {% if ( bvar.origin_file == "on" ) %}
                                <label>
                                    {{ _(file) }}
                                    <input name="origin_file"
                                           size="50"
                                           maxlength="200"
                                           value="{{ origin_file }}" />
                                </label>
                            {% endif %}
                        </fieldset>
                    </form>
                    {% include 'trl' %}
                    {% include 'copyr' %}
                    {% include 'js' %}
                    {{ query_time }}
                </body>
            </html>
        {% endwith %}
    {% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}

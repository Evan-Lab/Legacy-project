{# 
  Generated by JinjaGenerator for template 'templm/tools'
    at 2025-10-26T20:25:34.897832

  Used macros:
  - on_side(xx)
  - checkbox(cc, xx, yy, uu)
  - radio(xx, yy, zz, uu)
  - image(xx)
  - longdisplay()
  - anc_hrztl()
  - border_color()
  - generation()
  - envkb()
  - perso_gen()
  - tools_perso()
  - tools_anctree()
  - tools_dag()
  - tools_anclist()
  - tools_ancsosa()
  - tools_deslist()

  Used includes:
  None

  Used variables:
  - e.fs (x2)
  - e.wi (x2)
  - e.he (x2)
  - e.sosa (x2)
  - e.im (x1)
  - e.siblings (x1)
  - e.bp (x2)
  - e.t (x18)
  - e.maxv (x17)
  - e.xx (x2)
  - e.m (x10)
  - e.t1 (x7)
  - e.gen (x3)
  - e.bd (x2)
  - e.color (x1)
  - e.v (x1)
  - e.cpl (x4)
  - e.dsrc (x1)
  - e.spouse (x1)
  - e.p (x8)
  - e.n (x8)
  - e.oc (x8)
  - e.i (x8)
  - e.hi (x3)
  - e.sms (x1)
  - e.notab (x1)
  - e.nogroup (x1)
  - e.dpos (x2)
  - e.overlap (x2)
  - e.width (x2)
  - e.em (x1)
  - e.opt (x1)
  - e.lim (x1)
  - e.fam7 (x5)
  - e.tf1 (x6)
  - e.lang (x3)
  - e.i1 (x4)
  - e.l (x4)
  - e.miss (x2)
  - e.al (x1)
  - e.ms (x1)
  - e.M3b (x1)
  - e.M3m (x1)
  - e.M3d (x1)
  - e.tl1 (x8)
  - browsing_with_sosa_ref (x1)
  - has_sosa (x2)
  - l_fs (x3)
  - l_wi (x3)
  - l_he (x3)
  - b.max_anc_tree (x4)
  - b.no_image_for_visitor (x3)
  - b.wide (x1)
  - b.max_desc_tree (x2)
  - b.max_anc_level (x4)
  - b.max_desc_level (x2)
  - l_on1 (x2)
  - l_on (x34)
  - _on1 (x3)
  - friend (x3)
  - wizard (x5)
  - nosurn (x1)
  - alias (x1)
  - i (x2)
  - bgi (x3)
  - l_emaxv (x3)
  - nl (x4)
  - hidden (x6)
  - cancel_links (x2)
  - has_children (x1)
  - max_desc_level (x2)
  - action (x7)
  - maxvd (x2)
  - lcX (x1)
  - l_maxlev (x1)
  - laX (x1)
  - env.maxlev (x1)
  - lwide (x2)
  - ag (x2)
  - access (x2)
  - l_v (x2)
  - msg (x2)
  - dag.max_wid (x3)
  - dag.min_wid (x3)
  - url_set.m_iz_upddag_templ_pz_nz_ocz.U_0_on (x1)
  - suffix (x1)
  - l_bmaxv (x9)
  - fam70 (x1)
  - fam71 (x1)
  - fam72 (x1)
  - default_lang (x1)
  - l_up (x1)
#}
<!-- $Id: templm/tools.txt v7.0 2016/02/04 21:27:03 $ -->
{% with %}
    {% set l_fs = (e.fs) if (( e.fs != "" )) else ("15") %}
    {% with %}
        {% set l_wi = (e.wi) if (( e.wi != "" )) else ("980") %}
        {% with %}
            {% set l_he = (e.he) if (( e.he != "" )) else ("600") %}
            {% with %}
                {% set l_sosa_ref = ("on") if (( ( e.sosa == "on" ) and ( browsing_with_sosa_ref and has_sosa ) )) %}
                {% with %}
                    {% set l_prefix = "/""t=h7&im="e.im"&siblings="e.siblings"&sosa="e.sosa"&fs="l_fs"&wi="l_wi"&he="l_he"&bp="e.bp"&" %}<style id="s" type="text/css">
    #htree {
        font-size: {
                {
                l_fs
            }
        }

        px;

        width: {
                {
                l_wi
            }
        }

        px;

        height: {
                {
                l_he
            }
        }

        px
    }
</style>
                    <style type="text/css">
                        #tools p input {
                            text-align: right;
                            width: 40px;
                        }
                    </style>
                    <script type="text/javascript">
                        <!--
                        function over1(xx) {
                            document.getElementById(xx).style.outline = "#00F solid 4px";
                            return false;
                        }

                        function out1(xx) {
                            document.getElementById(xx).style.outline = "none";
                            return false;
                        }

                        function ob() {
                            var a = new Array(3)
                            for (var i = 0; i < a.length; ++i) {
                                a {
                                    {
                                        _("i")
                                    }
                                } = document.getElementById("e" + i).value;
                            }
                            document.getElementById("s").outerHTML = '\
<style id="s" type="text\/css">\n\
@page{size:' + a {
                                {
                                    _("1")
                                }
                            } + 'px ' + a {
                                {
                                    _("2")
                                }
                            } + 'px;}\n\
#htree{position:relative;font-size:' + a {
                                {
                                    _("0")
                                }
                            } + 'px;width:' + a {
                                {
                                    _("1")
                                }
                            } + 'px;height:' + a {
                                {
                                    _("2")
                                }
                            } + 'px;margin:3em}\n\
<\/style>';
                        }
                        -->
                    </script>
{% with %}
{% set l_on = "onclick="this.focus()" onkeydown="if (event.keyCode == 13) javascript:document.tools.submit();"" %}
{% with %}
{% set l_emaxv = (e.maxv) if (( e.t != "T" )) else (("7") if (( b.max_anc_tree == "" )) else (b.max_anc_tree)) %}
{% macro on_side(xx) %}
{{ _("on %s's side:::xx") |capitalize }}
{% endmacro %}
{% macro checkbox(cc, xx, yy, uu) %}
<label title="uu">
 cc<input type="checkbox" name="xx" value="on" {{ l_on1 }} {{ l_on }}{% if ( e.xx == "on" ) %} checked="checked"{% endif %} />yy
</label>
{% endmacro %}
{% macro radio(xx, yy, zz, uu) %}
<label title="uu">
<input type="radio" id="xxyy" name="xx" value="yy" {{ _on1 }} {{ l_on }}{% if ( e.xx == "yy" ) %} checked="checked"{% endif %} />zz
</label>
{% endmacro %}
{% macro image(xx) %}
{% if ( ( b.no_image_for_visitor != "yes" ) or ( friend or wizard ) ) %}
{{ checkbox("xx", "image", _("display picture") , "") }}
{% endif %}
{% endmacro %}
{% macro longdisplay() %}
{% if ( has_sosa and ( e.m == "D" ) ) %}
<label>
<input type="checkbox" name="t1" value="1" {{ l_on }}{% if ( e.t1 == "1" ) %} checked="checked"{% endif %} />{{ _("branch/branches", variant='0') }} : Sosa
</label>
{% endif %}
{{ checkbox("├", "siblings", _("siblings") , "") }}
{% with %}
{% set nosurn = _("first name/first names", variant='0')" (<span style="text-decoration:line-through;">"_("surname/surnames", variant='0')"</span>)" %}{{ checkbox("├", "nosurn", nosurn, "") }}
{% with %}
{% set alias = _("surname alias")", "_("first name alias") %}{{ checkbox("├", "alias", alias, "") }}{{ checkbox("├", "spouse", _("include spouses") , "") }}{{ checkbox("├", "parents", _("parents") , "") }}{{ checkbox("├", "rel", _("relation/relations", variant='1') , "") }}{{ checkbox("├", "witn", _("witness/witnesses", variant='1') , "") }}{{ checkbox("├", "notes", _("note/notes", variant='1') , "") }}{{ checkbox("├", "src", _("source/sources", variant='1') , "") }}{{ checkbox("├", "upd", _("update::", variant='1') , "") }}{{ checkbox("└", "hide", _("visualize/show/hide/summary", variant='2') , "") }}
{% endwith %}
{% endwith %}
{% endmacro %}
{% macro anc_hrztl() %}
{{ checkbox("├", "marriage2", _("marriage date") , _("display marriage date")) }}{{ checkbox("├", "sosa", _("n° Sosa") , "") }}{{ checkbox("└", "xy", _("by couple") , "") }}{{ checkbox("    ├", "siblings", _("child/children", variant='1') , "") }}{{ checkbox("    ├", "timeline", _("time line") , "") }}
<label>
     └ {{ _("scale") }}
<input title="{{ _("year/month/day", variant='0') }}s/{{ _("generation/generations", variant='0') }} (default 40, {{ _("maximum") }} 50)" type="number" style="width:2.8em" min="0" max="50" name="gen" class="number" value="{{ e.gen }}" size="1" placeholder="40" />
</label>
{% endmacro %}
{% macro border_color() %}
<label>
 ├ {{ _("border") }}
<input type="number" name="bd" min="0" style="padding:0px 2px;width:2.4em;" value="{% if ( e.bd != "" ) %}{{ e.bd }}{% endif %}" placeholder="0" />
px
</label>
<label>
 └ {{ _("color") }} 
{% for i in 0..8 %}
{% with %}
{% set bgi = "bg"i %}<a style="style:inline" class="{{ bgi }}"><input type="radio" name="color" value="{{ bgi }}" {{ l_on1 }} {{ l_on }}{% if ( e.color == bgi ) %} checked="checked"{% endif %} /></a>
{% if ( i == 3 ) %}<br>{% endif %}
{% endwith %}
{% endfor %}
</table>
{% endmacro %}
{% macro generation() %}
<label style="display:inline">
<input type="number" id="v" name="v" style="font-weight:bold;text-align:right;font-size:14px;width:2.4em;height:16px" value="{{ e.v }}" autocomplete="off" min="{% if ( ( e.m == "A" ) or ( e.m == "D" ) ) %}{% if ( ( e.t1 == "CT" ) and ( e.cpl == "on" ) ) %}4{% else %}{% if ( ( e.t1 == "CT" ) and ( e.cpl == "" ) ) %}3{% else %}2{% endif %}{% endif %}{% else %}1 {% endif %}" max="{% if ( e.m == "A" ) %}{% if ( ( e.t1 == "CT" ) and ( e.cpl == "on" ) ) %}13{% else %}{% if ( ( e.t1 == "CT" ) and ( e.cpl == "" ) ) %}12{% else %}{{ l_emaxv }}{% endif %}{% endif %}" {% endif %}title="{% if ( ( e.m == "A" ) and ( e.t == "T" ) ) %}{{ _("maximum") |capitalize }}{{ _(":") }}{{ nl }}{{ _("full tree") |capitalize }} {{ l_emaxv }} {{ _("generation/generations", variant='1') }}{{ nl }}{{ _("compact tree") |capitalize }} H {{ _("or") }} I  13 {{ _("generation/generations", variant='1') }}&#10;     {{ _("by couple") }} 14 {{ _("generation/generations", variant='1') }}{% endif %}{{ nl }}{{ _("with") |capitalize }} {{ _("n° Sosa") }} 12 {{ _("generation/generations", variant='1') }}{{ nl }}    {{ _("by couple") }} 13 {{ _("generation/generations", variant='1') }}" accesskey="X" />
{{ _("generation/generations", variant='1') }} <code>(X)</code>
</label>
<br>
{% endmacro %}
{% macro envkb() %}
{{ hidden }}{# foreach not implemented yet #}
{% endmacro %}
{% macro perso_gen() %}
{% if ( not cancel_links ) %}
{% with %}
{% set maxvd = (max_desc_level) if (( has_children and ( max_desc_level > 1 ) )) else ("3") %}
{% with %}
{% set l_on = "onclick="this.focus()" onkeydown="if (event.keyCode == 13) javascript:document.tools.submit();"" %}
<form style="display:inline" name="tools" method="get" action="{{ action }}">
{{ envkb() }}
<label>
<input type="number" style="font-weight:bold;text-align:right;font-size:16px;width:2.5em" type="number" min="1" max="{{ maxvd }}" id="maxlev" title="{{ _("maximum") |capitalize }}{{ _(":") }} {{ maxvd }} {{ _("generation/generations", variant='1') }} {{ lcX }}" name="maxlev" value="{{ l_maxlev }}" {{ l_on }} {{ laX }} />
<input id="hide_ie" tabindex="-1" type="submit" />
</label>
</form>
{% endwith %}
{% endwith %}
{% endif %}
{% endmacro %}
{% macro tools_perso() %}
{% with %}
{% set l_on1 =  %}
<hr style="clear:both">
<form id="tools" style="display:block" name="tools" method="get" action="{{ action }}">
<fieldset style="border:0">
<legend style="font-weight:bold">
{{ _("tools") |capitalize }}
<input type="submit" value="Ok" />
</legend>
{{ envkb() }}
{% if wizard %}
<label>
{{ _("source/sources", variant='0') |capitalize }}{{ _(":") }} {{ _("person/persons", variant='1') }} ({{ _("create") }})
<input name="dsrc" value="{{ e.dsrc }}" size="20" maxlength="300" />
</label>
{% endif %}
{% if cancel_links %}<input type="hidden" name="maxlev" value="{{ env.maxlev }}" />{% endif %}
{{ checkbox("", "cgl", _("cancel GeneWeb links") , "") }}{{ image("") }}
{% if ( b.wide == "on" ) %}
<label>
 <input type="checkbox" name="wide" value="no" {{ l_on }}{% if ( lwide == "off" ) %} checked="checked"{% endif %} />{{ _("visualize/show/hide/summary", variant='0') }} &middot;|&middot;
</label>
{% else %}
<label>
 <input type="checkbox" name="wide" value="yes" {{ l_on }}{% if ( lwide == "on" ) %} checked="checked"{% endif %} />{{ _("visualize/show/hide/summary", variant='0') }} &divide;
</label>
{% endif %}
<label>
 <input type="checkbox" name="spouse" value="off" {{ l_on }}{% if ( e.spouse == "off" ) %} checked="checked"{% endif %} />{{ _("spouses not included") }}
</label>
{% with %}
{% set ag = _("visualize/show/hide/summary", variant='1')" "_("age")"/"_("event/events", variant='1') %}{{ checkbox("", "age", ag, ag) }}
</fieldset>
</form>
{% endwith %}
{% endwith %}
{% endmacro %}
{% macro tools_anctree() %}
<hr style="clear:both">
<form id="tools" style="display:block" name="tools" method="get" action="{{ action }}">
<fieldset style="border:0">
<input type="hidden" name="t" value="T" {{ l_on }}{% if ( e.t == "T" ) %} checked="checked"{% endif %} />
<legend style="font-weight:bold">
<a href="/{{ access }}&m=A">⏎</a>
{{ _("tools", variant='0') |capitalize }} {{ _("ascendants tree") }}
  
<input type="submit"title="{{ _("validate/delete", variant='0') |capitalize }}"style="align=center;valign=center;font-weight:bold;height:24px"value="Ok" />
  {{ generation() }}
</legend>
{{ hidden }}
<input type="hidden" name="m" value="A" />
{% if ( ( e.p != "" ) or ( ( e.n != "" ) or ( e.oc != "" ) ) ) %}
<input type="hidden" name="p" value="{{ e.p }}" />
<input type="hidden" name="n" value="{{ e.n }}" />
<input type="hidden" name="oc" value="{{ e.oc }}" />
{% endif %}
{% if ( e.i != "" ) %}<input type="hidden" name="i" value="{{ e.i }}" />{% endif %}
<input type="hidden" name="maxv" value="{{ e.maxv }}" />
<fieldset style="float:left;border:0">
{% with %}
{% set l_on1 = "onchange="valid('t1T')"" %}{{ radio("t1", "A", _("male line/female line", variant='0') |capitalize, "") }}{{ radio("t1", "C", _("male line/female line", variant='1') |capitalize, "") }}{{ radio("t1", "T", _("full tree") |capitalize, _("ascendants tree")|capitalize) }}{{ checkbox("├", "dag", _("dag") , "") }}
{% if ( e.t == "T" ) %}
 ├ <a href="/m=A;t=T;v={{ l_v }}&{{ access }}&dag=on&notab=on" accesskey="/" title="{{ _("display by slices/slice width/overlap/total width", variant='0') }} (/)">{{ _("display by slices/slice width/overlap/total width", variant='0') }}</a>
{% endif %}
<br>
{{ border_color() }}
</fieldset>
<fieldset style="float:left;border:0">
{% with %}
{% set l_on1 = "onchange="valid('t1HT')"" %}{{ radio("t1", "HT", _("horizontal tree") |capitalize, "") }}{{ checkbox("└", "xy", _("by couple") , "") }}{{ checkbox("    ├", "timeline", _("time line") , "") }}
<label>
     └ {{ _("scale") }}
<input title="{{ _("year/month/day", variant='0') }}s/{{ _("generation/generations", variant='0') }} (default 40, {{ _("maximum") }} 50)" type="number" style="width:2.8em" min="0" max="50" name="gen" class="number" value="{{ e.gen }}" size="1" placeholder="40" />
</label>
<br>
<br>
{% with %}
{% set l_on1 =  %}{{ checkbox("  ", "cgl", _("cancel GeneWeb links") |capitalize, "") }}
{% if ( ( b.no_image_for_visitor != "yes" ) or ( friend or wizard ) ) %}
{{ checkbox("  ", "image", _("image/images", variant='1') , "") }}
{% endif %}
{{ checkbox("  ", "marriage", _("marriage date") , _("display marriage date")) }}{{ checkbox("  ", "siblings", _("full siblings") , "") }}{{ checkbox("  ", "sosa", _("n° Sosa") , _("visualize/show/hide/summary", variant='1')) }}
<label>
    {{ _("font size") |capitalize }}
<input type="number" class="number" style="width:3em" id="e0" name="fs" value="{{ l_fs }}" size="2" onchange="ob()" />
px
</label>
</fieldset>
<fieldset style="border:0">
{% with %}
{% set l_on1 = "onchange="valid('t1CT')"" %}{{ radio("t1", "CT", _("compact tree") |capitalize, "[itree] [or] [htree]") }}
<label title="">
 ├ orientation
<input type="radio" id="itIH" name="hi" value="I" {{ _on1 }} {{ l_on }}{% if ( e.hi == "I" ) %} checked="checked"{% endif %} /> I
<input type="radio" id="itIH" name="hi" value="H" {{ _on1 }} {{ l_on }}{% if ( ( e.hi == "H" ) or ( e.hi == "" ) ) %} checked="checked"{% endif %} /> H
</label>
{% with %}
{% set msg = _("by couple")" ("_("one additional generation")")" %}{{ checkbox("├", "cpl", msg, "") }}
{% with %}
{% set msg = _("implex links") %}{{ checkbox("├", "implx", msg, "") }}
<label title="{{ _("create") }} {{ _("family/families", variant='0') }}">
 └<input type="checkbox" name="sms" value="on" {{ l_on }}{% if ( e.sms == "on" ) %} checked="checked"{% endif %} />
{{ _("visualize/show/hide/summary", variant='1') }} {{ _("missing sosa") }}
</label>
<br>
<label title="{{ _("full tree") |capitalize }} {{ _("with") }} 256 {{ _("n° Sosa") }} + extra {{ _("generation/generations", variant='0') }} = 9 {{ _("generation/generations", variant='1') }}">
<input type="radio" name="t1" value="m" {{ l_on }}{% if ( e.t1 == "m" ) %} checked="checked"{% endif %} />
{{ _("mtree") |capitalize }}
</label>
<br>
<label title="">
<input type="hidden" name="p_mod" value="a6">
<input type="radio" name="t1" value="h7" {{ l_on }}{% if ( e.t1 == "h7" ) %} checked="checked"{% endif %} />
{{ _("h7-tree") |capitalize }}
</label>
<label>
 ├<input type="checkbox" name="bp" value="on" {{ l_on }}{% if ( e.bp == "on" ) %} checked="checked"{% endif %} />{{ _("birth place") }}
</label>
<label>
 ├ largeur
<input type="number" class="number" style="width:5em" id="e1" name="wi" value="{{ l_wi }}" onchange="ob()" />
px
</label>
<label>
 └ hauteur
<input type="number" class="number" style="width:5em" id="e2" name="he" value="{{ l_he }}" onchange="ob()" />
px
</label>
</fieldset>
</fieldset>
</form>
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endmacro %}
{% macro tools_dag() %}
<hr>
<form id="tools" name="tools" method="get" action="{{ action }}">
<fieldset>
<legend>
{{ _("tools", variant='0') |capitalize }}
<input type="submit" value="Ok" />
</legend>
{{ hidden }}{# foreach not implemented yet #}
{% if ( e.t == "T" ) %}
<p>
{% with %}
{% set l_emaxv = (("7") if (( b.max_anc_tree == "" )) else (b.max_anc_tree)) if (( e.m == "A" )) else (("4") if (( b.max_desc_tree == "" )) else (b.max_desc_tree)) %}
<input type="hidden" name="maxv" value="{{ e.maxv }}" />
{{ generation() }}
</p>
{% endwith %}
{% endif %}
{% if ( e.notab == "on" ) %}
<fieldset>
<legend>
<label>
<input type="checkbox" name="notab" value="on" checked="checked" {{ l_on }} />{{ _("display by slices/slice width/overlap/total width", variant='0') |capitalize }}
</label>
</legend>
<label>
<input type="checkbox" name="nogroup" value="on" {{ l_on }}{% if ( e.nogroup == "on" ) %} checked="checked"{% endif %} />{{ _("don't group the common branches together") }}
</label>
<label>
<input name="dpos" size="5" value="{% if ( e.dpos != "" ) %}{{ e.dpos }}{% else %}78{% endif %}" />
{{ _("display by slices/slice width/overlap/total width", variant='1') }}
</label>
<label>
<input name="overlap" size="5" value="{% if ( e.overlap != "" ) %}{{ e.overlap }}{% else %}10{% endif %}" />
{{ _("display by slices/slice width/overlap/total width", variant='2') }}
</label>
<label>
<input name="width" size="5" value="{% if ( e.width != "" ) %}{{ e.width }}{% else %}{% if ( dag.max_wid <= 78 ) %}{{ dag.max_wid }}{% else %}{% if ( dag.min_wid >= 78 ) %}{{ dag.min_wid }}{% else %}78{% endif %}{% endif %}{% endif %}" />
{{ _("display by slices/slice width/overlap/total width", variant='3') }} ({{ dag.min_wid }}-{{ dag.max_wid }})
</label>
</fieldset>
{% else %}
<ul>
{% if ( wizard and ( e.m == "RLM" ) ) %}
<li>
<a href="{{ url_set.m_iz_upddag_templ_pz_nz_ocz.U_0_on }}">{{ _("modify::tree") |capitalize }}</a>
</li>
{% endif %}
<li>
<a href="/{{ suffix }}&notab=on" accesskey="/" title="{{ _("display by slices/slice width/overlap/total width", variant='0') }} (/)">{{ _("display by slices/slice width/overlap/total width", variant='0') |capitalize }}</a>
</li>
</ul>
{% endif %}
<fieldset style="border:0">
{% if ( ( e.m == "RLM" ) or ( ( e.m == "RL" ) or ( e.em == "R" ) ) ) %}
{{ checkbox("├", "spouse", _("include spouses") , "") }}
{% endif %}
<label>
 ├<input type="checkbox" name="opt" value="no_index" {{ l_on }}{% if ( e.opt == "no_index" ) %} checked="checked"{% endif %} />{{ _("link to use") }}
</label>
{{ checkbox("├", "cgl", _("cancel GeneWeb links") , "") }}{{ image("├") }}{{ border_color() }}
</fieldset>
{% if ( e.m == "RLM" ) %}
{{ checkbox("├", "invert", _("invert") , "") }}{{ checkbox("├", "new", _("new") , "") }}
<label>
lim
<input name="lim" value="{{ e.lim }}" size="1" />
</label>
{% endif %}
</fieldset>
</form>
{% endmacro %}
{% macro tools_anclist() %}
<hr style="clear:both;">
<form id="tools" name="tools" method="get" action="{{ action }}">
<fieldset>
<legend>
{{ _("tools", variant='0') |capitalize }}
{% if ( e.fam7 == "on" ) %}{{ _("family time line", variant='1') }}{% endif %}
<input type="submit" value="Ok" />
</legend>
{{ hidden }}
<input type="hidden" name="m" value="A" />
<input type="hidden" name="t" value="{{ e.t }}" />
{% if ( ( e.p != "" ) or ( ( e.n != "" ) or ( e.oc != "" ) ) ) %}
<input type="hidden" name="p" value="{{ e.p }}" />
<input type="hidden" name="n" value="{{ e.n }}" />
<input type="hidden" name="oc" value="{{ e.oc }}" />
{% endif %}
{% if ( e.i != "" ) %}<input type="hidden" name="i" value="{{ e.i }}" />{% endif %}
{% with %}
{% set l_bmaxv = (e.maxv) if (( b.max_anc_level == "" )) else (b.max_anc_level) %}
{% with %}
{% set l_emaxv = (l_bmaxv) if (( e.maxv == "" )) else ((e.maxv) if (( e.maxv < l_bmaxv )) else (l_bmaxv)) %}
{% with %}
{% set l_maxv = ("4") if (( ( e.fam7 == "on" ) and ( l_v > 4 ) )) else (l_emaxv) %}
<input type="hidden" name="maxv" value="{{ e.maxv }}" />
{{ generation() }}
<p>
{% if ( ( e.fam7 != "on" ) and ( ( e.t != "H" ) and ( e.t != "L" ) ) ) %}
{{ checkbox("├", "only", _("only the generation selected") , "") }}
{% endif %}
{{ checkbox("├", "cgl", _("cancel GeneWeb links") , "") }}
{% if ( e.t == "H" ) %}
{{ checkbox("├", "marriage2", _("marriage date") , _("display marriage date")) }}{{ checkbox("├", "sosa", _("n° Sosa") , "") }}{{ checkbox("├", "xy", _("by couple") , "") }}{{ checkbox("├", "siblings", _("child/children", variant='1') , "") }}{{ checkbox("├", "timeline", _("time line") , "") }}
<label>
 └ {{ _("scale") }}
<input title="{{ _("year/month/day", variant='0') }}s/{{ _("generation/generations", variant='0') }} (default 40, {{ _("maximum") }} 50)"type="number" style="width:2.8em" min="0" max="50"name="gen" class="number" value="{{ e.gen }}"size="1" placeholder="40" />
</label>
{% endif %}
{% if ( e.fam7 == "on" ) %}
<input type="hidden" name="fam7" value="on" />
{{ radio("tf1", "fam73", _("time line") , "") }}
{% with %}
{% set fam70 = _("date/dates", variant='0')", "_("place/places", variant='0') %}{{ radio("tf1", "fam70", fam70, "") }}
{% if ( ( b.no_image_for_visitor != "yes" ) or ( friend or wizard ) ) %}
{% with %}
{% set fam71 = _("image/images", variant='1')" "_("long display") %}{{ radio("tf1", "fam71", fam71, "") }}
{% with %}
{% set fam72 = _("image/images", variant='1')" onmousemov" %}{{ radio("tf1", "fam72", fam72, "") }}
{% endwith %}
{% endwith %}
{% endif %}
{{ checkbox("├", "spouse", _("add::spouse/spouses", variant='1') , "") }}{{ checkbox("└", "cousins", _("add::cousins") , "") }}
</p>
</fieldset>
{% endwith %}
{% endif %}
{% if ( ( e.tf1 != "" ) and ( e.fam7 != "on" ) ) %}
<fieldset style="border:0;">
<legend>{{ _("list/list (ancestors)", variant='0') |capitalize }}</legend>
{{ radio("tf1", "sb", _("surnames branch") , "") }}
<label>
<input type="radio" name="tf1" value="surn" {{ l_on }}{% if ( e.tf1 == "surn" ) %} checked="checked"{% endif %} />{{ _("list eclair", variant='0') }} - {{ _("surname/surnames", variant='1') }} / {{ _("place/places", variant='1') }}
</label>
<label>
<input type="radio" name="tf1" value="place" {{ l_on }}{% if ( e.tf1 == "place" ) %} checked="checked"{% endif %} />{{ _("list eclair", variant='0') }} - {{ _("place/places", variant='1') }}
</label>
</fieldset>
<fieldset style="border:0;">
<legend>{{ _("statistics") |capitalize }}</legend>
{{ radio("tf1", "cal", _("calendar/calendars", variant='0') , "") }}{{ radio("tf1", "bmdm", _("year/month/day", variant='1') , "") }}
<label>
<input type="radio" name="tf1" value="afm" {{ l_on }}{% if ( e.tf1 == "afm" ) %} checked="checked"{% endif %} />{{ _("age") }} ({{ _("father/mother", variant='0') }}, {{ _("father/mother", variant='1') }})
</label>
{{ radio("tf1", "aax", _("age at %s birth date:::x") , "") }}
<label>
<input type="radio" name="tf1" value="nxd" {{ l_on }}{% if ( e.tf1 == "nxd" ) %} checked="checked"{% endif %} />{{ _("year/month/day", variant='0') }} {{ _("death") }} - {{ _("year/month/day", variant='0') }} {{ _("death") }} x
</label>
{{ radio("tf1", "aad", _("age at death") , "") }}
<label>
<input type="radio" name="tf1" value="mm" {{ l_on }}{% if ( e.tf1 == "mm" ) %} checked="checked"{% endif %} />{{ _("year/month/day", variant='1') }} {{ _("birth") }} = {{ _("year/month/day", variant='1') }} {{ _("death") }} ?
</label>
{{ radio("tf1", "ars", _("Αἰθήρ") , "") }}
{% endif %}
</fieldset>
</form>
{% endwith %}
{% endwith %}
{% endwith %}
{% endmacro %}
{% macro tools_ancsosa() %}
<hr>
<form id="tools" name="tools" method="get" action="{{ action }}">
<fieldset>
<legend>
{{ _("tools", variant='0') |capitalize }}
<input type="submit" value="Ok" />
</legend>
{{ hidden }}
<input type="hidden" name="m" value="A" />
{% if ( ( e.p != "" ) or ( ( e.n != "" ) or ( e.oc != "" ) ) ) %}
<input type="hidden" name="p" value="{{ e.p }}" />
<input type="hidden" name="n" value="{{ e.n }}" />
<input type="hidden" name="oc" value="{{ e.oc }}" />
{% endif %}
{% if ( e.i != "" ) %}<input type="hidden" name="i" value="{{ e.i }}" />{% endif %}
<input type="hidden" name="t" value="{{ e.t }}" />
{% if ( ( e.lang != "" ) and ( e.lang != default_lang ) ) %}
<input type="hidden" name="lang" value="{{ e.lang }}" />
{% endif %}
{% if ( l_up == "" ) %}
<p>
{% with %}
{% set l_bmaxv = ("9") if (( b.max_anc_level == "" )) else (b.max_anc_level) %}
{% with %}
{% set l_emaxv = (l_bmaxv) if (( e.maxv == "" )) else ((e.maxv) if (( e.maxv < l_bmaxv )) else (l_bmaxv)) %}
<input type="hidden" name="maxv" value="{{ e.maxv }}" />
{{ generation() }}{{ checkbox("├", "only", _("only the generation selected") , "") }}
{% endwith %}
{% endwith %}
{% endif %}
{% if ( ( e.t == "D" ) or ( ( e.t == "G" ) or ( e.t == "Z" ) ) ) %}
{% if ( e.i1 != "" ) %}<input type="hidden" name="i1" value="{{ e.i1 }}" />{% endif %}
{% if ( e.l != "" ) %}<input type="hidden" name="l" value="{{ e.l }}" />{% endif %}
{{ checkbox("├", "cgl", _("cancel GeneWeb links") , "") }}{{ image("└") }}
</p>
{% endif %}
{% if ( e.t == "G" ) %}
<fieldset>
<legend>{{ _("long display") |capitalize }}</legend>
{{ longdisplay() }}
</fieldset>
{% endif %}
{% if ( e.t == "M" ) %}
<fieldset style="border:0;">
<legend>
<label>
<input type="radio" name="miss" value="M1" id="M1" {{ l_on }}{% if ( e.miss == "M1" ) %} checked="checked"{% endif %} />{{ _("missing ancestors") |capitalize }}
</label>
</legend>
<label>
<input type="checkbox" name="al" value="on" onchange="valid('M1')" {{ l_on }}{% if ( e.al == "on" ) %} checked="checked"{% endif %} />{{ _("alphabetic order") }}
</label>
<label>
<input type="checkbox" name="ms" value="on" onchange="valid('M1')" {{ l_on }}{% if ( e.ms == "on" ) %} checked="checked"{% endif %} />{{ _("first name/first names", variant='1') }}, {{ _("surname/surnames", variant='1') }} = ??
</label>
</fieldset>
<fieldset style="border:0;">
<legend>
<label>
<input type="radio" name="miss" value="M3" id="M3" {{ l_on }}{% if ( e.miss == "M3" ) %} checked="checked"{% endif %} />{{ _("date/dates", variant='0') |capitalize }} &lt;&gt; {{ _("exact") }}
</label>
</legend>
<label>
<input type="checkbox" name="M3b" value="b" onchange="valid('M3')" {{ l_on }}{% if ( e.M3b == "b" ) %} checked="checked"{% endif %} />{{ _("birth") }}
</label>
<label>
<input type="checkbox" name="M3m" value="m" onchange="valid('M3')" {{ l_on }}{% if ( e.M3m == "m" ) %} checked="checked"{% endif %} />{{ _("marriage/marriages", variant='0') }}
</label>
<label>
<input type="checkbox" name="M3d" value="d" onchange="valid('M3')" {{ l_on }}{% if ( e.M3d == "d" ) %} checked="checked"{% endif %} />{{ _("death") }}
</label>
</fieldset>
{% endif %}
</fieldset>
</form>
{% endmacro %}
{% macro tools_deslist() %}
<hr>
<form id="tools" name="tools" method="get" action="{{ action }}">
<fieldset>
<legend>
{{ _("tools", variant='0') |capitalize }}
{% if ( e.tl1 != "hrtzl" ) %}{{ _("statistics") }}{% endif %}
<input type="submit" value="Ok" />
</legend>
{{ hidden }}
<input type="hidden" name="m" value="D" />
{% if ( ( e.p != "" ) or ( ( e.n != "" ) or ( e.oc != "" ) ) ) %}
<input type="hidden" name="p" value="{{ e.p }}" />
<input type="hidden" name="n" value="{{ e.n }}" />
<input type="hidden" name="oc" value="{{ e.oc }}" />
{% endif %}
{% if ( e.i != "" ) %}
<input type="hidden" name="i" value="{{ e.i }}" />
<input type="hidden" name="i1" value="{{ e.i1 }}" />
{% endif %}
{% if ( e.l != "" ) %}<input type="hidden" name="l" value="{{ e.l }}" />{% endif %}
{% if ( e.i1 == "" ) %}
<p>
{% with %}
{% set l_bmaxv = (e.maxv) if (( b.max_desc_level == "" )) else (b.max_desc_level) %}
{% with %}
{% set l_emaxv = (l_bmaxv) if (( e.maxv == "" )) else ((e.maxv) if (( e.maxv < l_bmaxv )) else (l_bmaxv)) %}
<input type="hidden" name="maxv" value="{{ e.maxv }}" />
{{ generation() }}
</p>
{% endwith %}
{% endwith %}
{% endif %}
<p>
{{ checkbox("  ", "cgl", _("cancel GeneWeb links") , "") }}
{% if ( e.tl1 == "" ) %}{{ image() }}{% endif %}
</p>
{% if ( e.tl1 == "" ) %}
{% if ( ( e.t == "L" ) or ( ( e.t == "M" ) or ( e.t == "F" ) ) ) %}
<fieldset style="border:0;">
<legend>{{ radio("t", "L", _("long display", variant='0') |capitalize, "") }}</legend>
{{ radio("t", "M", _("male line/female line", variant='0') , "") }}{{ radio("t", "F", _("male line/female line", variant='1') , "") }}{{ longdisplay() }}
</fieldset>
{% endif %}
{% else %}
{% if ( e.tl1 == "hrztl" ) %}
<input type="hidden" name="t" value="L" />
<input type="hidden" name="tl1" value="hrztl" />
{% else %}
<input type="hidden" name="t" value="L" />
<fieldset style="border:0;">
{{ radio("tl1", "cal", _("calendar/calendars", variant='0') , "") }}{{ radio("tl1", "bmdm", _("year/month/day", variant='1') , "") }}
<label>
<input type="radio" name="tl1" value="afm" {{ l_on }}{% if ( e.tl1 == "afm" ) %} checked="checked"{% endif %} />{{ _("age") }} ({{ _("father/mother", variant='0') }}, {{ _("father/mother", variant='1') }})
</label>
<label>
<input type="radio" name="tl1" value="aax" {{ l_on }}{% if ( e.tl1 == "aax" ) %} checked="checked"{% endif %} />{{ _("age at %s birth date:::x") }}
</label>
<label>
<input type="radio" name="tl1" value="nxd" {{ l_on }}{% if ( e.tl1 == "nxd" ) %} checked="checked"{% endif %} />{{ _("year/month/day", variant='0') }} {{ _("death") }} - {{ _("year/month/day", variant='0') }} {{ _("death") }} x
</label>
{{ radio("tl1", "aad", _("age at death") , "") }}
<label>
<input type="radio" name="tl1" value="mm" {{ l_on }}{% if ( e.tl1 == "mm" ) %} checked="checked"{% endif %} />{{ _("year/month/day", variant='1') }} {{ _("birth") }} = {{ _("year/month/day", variant='1') }} {{ _("death") }} ?
</label>
{{ radio("tl1", "ars", _("Αἰθήρ") , "") }}
</fieldset>
{% endif %}
{% endif %}
</fieldset>
</form>
{% endmacro %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}

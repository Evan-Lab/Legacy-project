{# 
  Generated by JinjaGenerator for template 'perso_utils'
    at 2025-10-26T20:24:44.456657

  Used macros:
  - setvar(nnn, vvv)
  - getvar(nnn)
  - ext_link(xx)
  - init_count(prev_count)
  - li_SD(xx)
  - li_SDC(xx)
  - marr_wrench_to_bullet(xx)
  - image_MF(xxx)
  - type_puce_desc(nnn)
  - type_puce_asc(nnn)
  - type_wedding()
  - image_sosa(xxx, yyy)
  - nav_with_sosa_ref(xxx)
  - witness_relation(xxx, yyy)
  - age_at_birth_of(xxx)
  - display_shared_parent(xxx)
  - thegen(xx)
  - gena(xx)
  - letter(xx)
  - fromthe(xx)
  - fromthenth(xx)
  - tothegen(xx)
  - tothenthgen(xx)
  - uptothegen(xx)
  - togena(xx)
  - togend(xx)
  - gend(xx)
  - desc_count(xxx)
  - desc_count_l(xxx)
  - on_side(xx)
  - display_sosa(xx)
  - short_display_person(xx)
  - short_display_person_tree(xx)
  - short_display_person_noname(xx)
  - short_display_person_f(xx)
  - access_ind(nnn)
  - very_short_display_person(xx)
  - very_short_display_person_no_sex(xx)
  - very_short_display_person_name(xx)
  - long_display_person(xx)
  - display_vertical(xx)
  - display_horizontal(xx)
  - rel_date_place(sexx, date_place)
  - married_to(xx, yy)
  - display_date_marriage_parent(xx)
  - not_married_no_descendants()
  - short_display_siblings()
  - short_display_siblings_noname()
  - long_display_siblings()
  - display_sibling()
  - list_half_siblings()
  - detail_wedding()
  - detail_children()
  - desc_seq(yyy, bi)
  - descendancy_grand_fathers(mmm, yyy, bi)
  - descendancy_grand_mothers(mmm, yyy, bi)
  - mm(i)
  - oo(i)
  - show_templ(tpl)
  - get_mod(modnum, optx)
  - relation_separation_tooltip()

  Used includes:
  None

  Used variables:
  - set_var.nnn.vvv (x1)
  - get_var.nnn (x1)
  - index (x2)
  - first_name_key_strip (x1)
  - sp (x25)
  - surname_key_strip (x1)
  - reset_count (x5)
  - prev_count (x1)
  - incr_count (x4)
  - xx.has_parents (x1)
  - xx.has_families (x2)
  - xx (x37)
  - xx.has_sosa (x2)
  - xx.sosa_link (x1)
  - xx.sosa.v (x1)
  - xx.index (x13)
  - xx.is_restricted (x9)
  - xx.access (x9)
  - xx.sex (x23)
  - xx.first_name (x9)
  - xx.occ (x8)
  - xx.surname (x9)
  - xx.computable_age (x7)
  - xx.age (x6)
  - xx.computable_death_age (x7)
  - xx.death_age (x6)
  - xx.dates (x6)
  - xx.title (x3)
  - xx.public_name (x10)
  - xx.birthday (x4)
  - xx.has_nobility_titles (x3)
  - xx.has_birth_date (x5)
  - xx.on_birth_date (x3)
  - xx.has_birth_place (x7)
  - xx.birth_place (x6)
  - xx.has_baptism_date (x4)
  - xx.on_baptism_date (x3)
  - xx.has_baptism_place (x7)
  - xx.baptism_place (x6)
  - xx.is_dead (x4)
  - xx.died (x3)
  - xx.has_death_date (x3)
  - xx.on_death_date (x3)
  - xx.has_death_place (x3)
  - xx.death_place (x3)
  - xx.is_buried (x4)
  - xx.has_burial_date (x3)
  - xx.on_burial_date (x3)
  - xx.has_burial_place (x3)
  - xx.burial_place (x3)
  - xx.is_cremated (x4)
  - xx.has_cremation_date (x3)
  - xx.on_cremation_date (x3)
  - xx.has_cremation_place (x3)
  - xx.cremation_place (x3)
  - xx.has_occupation (x4)
  - xx.occupation (x3)
  - xx.has_consanguinity (x4)
  - xx.consanguinity (x3)
  - xx.has_event (x2)
  - xx.has_linked_page.OCCU (x2)
  - xx.linked_page.OCCU (x3)
  - xx.has_linked_page.DEATH (x1)
  - xx.linked_page.DEATH (x2)
  - count (x3)
  - roglo (x1)
  - wizard (x14)
  - cancel_links (x28)
  - family.index (x1)
  - self (x2)
  - spouse.first_name (x1)
  - spouse.occ (x2)
  - spouse.surname (x1)
  - spouse.has_image (x1)
  - spouse.image_html_url (x1)
  - spouse.image_url (x2)
  - spouse.image_small_size (x2)
  - xxx.index (x1)
  - xxx.first_name (x1)
  - xxx.surname (x1)
  - xxx.occ (x2)
  - xxx.is_male (x1)
  - xxx.is_female (x1)
  - nnn.has_families (x1)
  - nnn.has_children (x1)
  - nnn.has_parents (x1)
  - nnn.father (x1)
  - nnn.mother (x2)
  - nnn.is_restricted (x1)
  - nnn (x2)
  - nnn.access (x1)
  - nnn.title (x1)
  - nnn.dates (x1)
  - are_married (x4)
  - nb_children (x3)
  - are_not_married (x4)
  - are_engaged (x3)
  - is_no_sexes_check (x3)
  - is_no_mention (x3)
  - yyy (x1)
  - static_max_desc_level (x1)
  - e.xx (x5)
  - e.m (x3)
  - e.t (x2)
  - e.v (x2)
  - e.im (x1)
  - e.marriage (x1)
  - e.cgl (x2)
  - e.p_mod (x3)
  - b.display_sosa (x1)
  - b.always_surname (x2)
  - b.show_consang (x4)
  - b.p_mod (x2)
  - b.perso_module_modnum (x1)
  - sosa_ref (x1)
  - sosa_ref.first_name_key_strip (x1)
  - sosa_ref.surname_key_strip (x1)
  - central_index (x8)
  - is_self (x1)
  - father.surname (x3)
  - father.index (x1)
  - nl (x13)
  - xx_name (x3)
  - has_parents (x1)
  - mother.index (x1)
  - has_birth_date (x1)
  - central_person (x1)
  - xx_age_at_birth (x1)
  - sexx (x1)
  - are_marriage_banns (x2)
  - are_marriage_contract (x2)
  - are_marriage_license (x2)
  - are_pacs (x2)
  - are_residence (x2)
  - on_marriage_date (x2)
  - marriage_place (x2)
  - in_place (x1)
  - yy (x1)
  - marr_text (x2)
  - wedding_birthday (x1)
  - child.has_families (x2)
  - child.has_image (x2)
  - child.image_html_url (x1)
  - child.image_url (x2)
  - child.image_small_size (x2)
  - border (x1)
  - has_children (x1)
  - friend (x1)
  - marriage_date.year (x2)
  - marriage_date (x2)
  - marriage_date.prec (x2)
  - mi (x1)
  - oi (x1)
  - p_mod (x41)
  - i (x1)
  - mnb (x1)
  - include.tpl (x1)
  - abc (x1)
  - perso_module_modnum (x1)
  - modx (x2)
  - are_separated (x1)
  - separation_date (x2)
  - are_divorced (x1)
  - divorce_date (x2)
#}
<!-- $Id: perso_utils v7.1 13/08/2023 16:55:48 $ -->
{% macro setvar(nnn, vvv) %}
    {{ set_var.nnn.vvv }}
{% endmacro %}
{% macro getvar(nnn) %}
    {{ get_var.nnn }}
{% endmacro %}
{% with %}
    {% set central_index = index %}
    {% with %}
        {% set central_person = first_name_key_stripspsurname_key_strip %}
        {% macro ext_link(xx) %}
        {% endmacro %}
        {% macro init_count(prev_count) %}
            {{ reset_count }}
            {% for i in 0..prev_count %}{{ incr_count }}{% endfor %}
        {% endmacro %}
        {% macro li_SD(xx) %}
            <li style="vertical-align: middle;
                       list-style-type: {% if xx.has_parents %}disc{% else %}circle{% endif %}">
            {% endmacro %}
            {% macro li_SDC(xx) %}
                {% if xx.has_families %}{{ reset_count }}{# foreach not implemented yet #}{% endif %}
                <li style="vertical-align: middle;
                           list-style-type: {% if xx.has_families %}{% if ( count != 0 ) %}square{% else %}disc{% endif %}{% else %}circle{% endif %}">
                {% endmacro %}
                {% with %}
                    {% set in_place = ("-") if (roglo) else (_("in (place)")) %}
                    {% macro marr_wrench_to_bullet(xx) %}
                        {% if ( wizard and ( not cancel_links ) ) %}
                            <a href="/m=MOD_FAM&i={{ family.index }}&ip={{ index }}">
                                <i class="fa fa-wrench fa-sm text-success"
                                   {{ sp }}
                                   title="{{ _("modify::family/families", variant='0') |capitalize }} {{ self }} &{{ sp }}{{ spouse.first_name }}{% if ( spouse.occ != "0" ) %}.{{ spouse.occ }}{% endif %}{{ sp }}{{ spouse.surname }} ({{ _("wizard/wizards/friend/friends/exterior", variant='0') }})"></i></a>
                        {% endif %}
                    {% endmacro %}
                    {% macro image_MF(xxx) %}
                        {% if ( not cancel_links ) %}
                            {% if wizard %}
                                <a href="/m=MOD_IND&i={{ xxx.index }}"
                                   {{ sp }}
                                   title="{{ _("modify::") |capitalize }} {{ xxx.first_name }} {{ xxx.surname }}{% if ( xxx.occ != "0" ) %} ({{ xxx.occ }}){% endif %}">
                                {% endif %}
                                <i {{ sp }}
                                   {% endif %}
                                   {% if xxx.is_male %}{% if cancel_links %}♂{{ sp }}{% else %}class="fa fa-mars male fa-xs{% endif %}
                                   {% else %}
                                   {% if xxx.is_female %}{% if cancel_links %}♀{{ sp }}{% else %}class="fa fa-venus female fa-xs{% endif %}
                                   {% else %}
                                   {% if cancel_links %}⚲{{ sp }}{% else %}class="fa fa-neuter neuter fa-xs{% endif %}
                                   {% endif %}
                                   {% endif %}
                                   {% if ( not cancel_links ) %}
                                   mr-1
                                   "></i>
                                {% if wizard %}</a>{% endif %}
                        {% endif %}
                    {% endmacro %}
                    {% macro type_puce_desc(nnn) %}
                        <li style="list-style-type:{% if nnn.has_families %}{% if nnn.has_children %}square{% else %}disc{% endif %}{% else %}circle{% endif %}">
                        {% endmacro %}
                        {% macro type_puce_asc(nnn) %}
                            {% if nnn.has_parents %}
                                {% if ( ( nnn.father != "? ?" ) and ( ( nnn.mother != "? ?" ) and ( nnn.mother != "de l'une de ses épouses" ) ) ) %}
                                    <li class="list-unstyled" style="list-style-type:square">
                                    {% else %}
                                        <li class="list-unstyled" style="list-style-type:disc">
                                        {% endif %}
                                    {% else %}
                                        <li class="list-unstyled" style="list-style-type:circle">
                                        {% endif %}
                                    {% endmacro %}
                                    {% macro type_wedding() %}
                                        {% if are_married %}
                                            {% if ( nb_children != 0 ) %}
                                                <img src="{{ url_for('static', path='images/married.png') }}"
                                                     alt="{{ _("married") }}"
                                                     title="{{ _("married") }}">
                                            {% else %}
                                                <img src="{{ url_for('static', path='images/married_no_descendants.png') }}"
                                                     alt="{{ _("married") }}"
                                                     title="{{ _("married") }}">
                                            {% endif %}
                                        {% else %}
                                            {% if are_not_married %}
                                                <img src="{{ url_for('static', path='images/not_married.png') }}"
                                                     alt="{{ _("not married") }}"
                                                     title="{{ _("not married") }}">
                                            {% else %}
                                                {% if are_engaged %}
                                                    <img src="{{ url_for('static', path='images/engaged.png') }}"
                                                         alt="{{ _("engaged") }}"
                                                         title="{{ _("engaged") }}">
                                                {% else %}
                                                    {% if is_no_sexes_check %}
                                                        <img src="{{ url_for('static', path='images/not_married.png') }}"
                                                             alt="{{ _("relationship") }}"
                                                             title="{{ _("relationship") }}">
                                                    {% else %}
                                                        {% if is_no_mention %}
                                                            <img src="{{ url_for('static', path='images/not_married.png') }}"
                                                                 alt="{{ _("with") }}"
                                                                 title="{{ _("with") }}">
                                                        {% endif %}
                                                    {% endif %}
                                                {% endif %}
                                            {% endif %}
                                        {% endif %}
                                    {% endmacro %}
                                    {% macro image_sosa(xxx, yyy) %}
                                        <span class="far fa-circle-dot text-success mr-1"
                                              title="{% if ( yyy != 1 ) %}{{ _("direct ancestor of %s:::xxx") |capitalize }} – {{ _("Sosa") |capitalize }} yyy{% endif %}"></span>
                                    {% endmacro %}
                                    {% macro nav_with_sosa_ref(xxx) %}
                                        {{ _("navigation with %t as Sosa reference:::xxx") |capitalize }}
                                    {% endmacro %}
                                    {% macro witness_relation(xxx, yyy) %}
                                        {{ _("witness at marriage of %s and %s:::xxx:yyy") |capitalize }}
                                    {% endmacro %}
                                    {% macro age_at_birth_of(xxx) %}
                                        {{ _("age at %s birth date:::xxx") }}{{ sp }}
                                    {% endmacro %}
                                    {% macro display_shared_parent(xxx) %}
                                        {{ _("on %s's side:::xxx") |capitalize }}
                                    {% endmacro %}
                                    {% macro nav_with_sosa_ref(xxx) %}
                                        {{ _("navigation with %t as Sosa reference:::xxx") |capitalize }}
                                    {% endmacro %}
                                    {% macro thegen(xx) %}
                                        {{ _("the %s generation:::xx") }}
                                    {% endmacro %}
                                    {% macro gena(xx) %}
                                        {% if ( xx == 1 ) %}
                                            {{ _("specify::generation/generations", variant='0') |capitalize }}
                                        {% else %}
                                            {% if ( xx == 2 ) %}
                                                {{ _("the parents") }}
                                            {% else %}
                                                {% if ( xx == 3 ) %}
                                                    {{ _("the grandparents") }}
                                                {% else %}
                                                    {% if ( xx == 4 ) %}
                                                        {{ _("the great-grandparents") }}
                                                    {% else %}
                                                        {{ thegen(nth(_("nth (generation)") , xx)) }}
                                                    {% endif %}
                                                {% endif %}
                                            {% endif %}
                                        {% endif %}
                                    {% endmacro %}
                                    {% macro letter(xx) %}
                                        {{ nth("/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y/z/
                                                                                ", "xx") }}
                                    {% endmacro %}
                                    {% macro fromthe(xx) %}
                                        {{ _("from the %s (gen):::xx") }}
                                    {% endmacro %}
                                    {% macro fromthenth(xx) %}
                                        {{ fromthe(nth(_("nth (generation)") , xx)) }}
                                    {% endmacro %}
                                    {% macro tothegen(xx) %}
                                        {{ _("to the %s gen:::xx") }}
                                    {% endmacro %}
                                    {% macro tothenthgen(xx) %}
                                        {{ tothegen(nth(_("nth (generation)") , xx)) }}
                                    {% endmacro %}
                                    {% macro uptothegen(xx) %}
                                        {{ _("upto the %s generation:::xx") }}
                                    {% endmacro %}
                                    {% macro togena(xx) %}
                                        {% if ( xx == 0 ) %}
                                            {{ _("specify::generation/generations", variant='0') }}
                                        {% else %}
                                            {% if ( xx == 1 ) %}
                                                {{ _("to the parents") }}
                                            {% else %}
                                                {% if ( xx == 2 ) %}
                                                    {{ _("to the grandparents") }}
                                                {% else %}
                                                    {% if ( xx == 3 ) %}
                                                        {{ _("to the great-grandparents") }}
                                                    {% else %}
                                                        {{ uptothegen(nth(_("nth (generation)") , xx)) }}
                                                    {% endif %}
                                                {% endif %}
                                            {% endif %}
                                        {% endif %}
                                    {% endmacro %}
                                    {% macro togend(xx) %}
                                        {% if ( ( xx == 0 ) and ( static_max_desc_level > 0 ) ) %}
                                            ({{ _("specify::generation/generations", variant='0') }})
                                        {% else %}
                                            {% if ( xx == 1 ) %}
                                                {{ _("to the children") }}
                                            {% else %}
                                                {% if ( xx == 2 ) %}
                                                    {{ _("to the grandchildren") }}
                                                {% else %}
                                                    {% if ( xx == 3 ) %}
                                                        {{ _("to the great-grandchildren") }}
                                                    {% else %}
                                                        {{ uptothegen(nth(_("nth (generation)") , xx)) }}
                                                    {% endif %}
                                                {% endif %}
                                            {% endif %}
                                        {% endif %}
                                    {% endmacro %}
                                    {% macro gend(xx) %}
                                        {% if ( e.xx == 0 ) %}
                                            {{ _("specify::generation/generations", variant='0') }}
                                        {% else %}
                                            {% if ( e.xx == 1 ) %}
                                                {{ _("the children") }}
                                            {% else %}
                                                {% if ( e.xx == 2 ) %}
                                                    {{ _("the grandchildren") }}
                                                {% else %}
                                                    {% if ( e.xx == 3 ) %}
                                                        {{ _("the great-grandchildren") }}
                                                    {% else %}
                                                        {{ thegen(nth(_("nth (generation)") , e.xx)) }}
                                                    {% endif %}
                                                {% endif %}
                                            {% endif %}
                                        {% endif %}
                                    {% endmacro %}
                                    {% macro desc_count(xxx) %}
                                        {# foreach not implemented yet #}{% endmacro %}{% macro desc_count_l(xxx) %}{# foreach not implemented yet #}
                                    {% endmacro %}
                                    {% macro on_side(xx) %}
                                        {{ _("on %s's side:::xx") |capitalize }}
                                    {% endmacro %}
                                    {% macro display_sosa(xx) %}
                                        {% if ( xx.has_sosa and ( ( b.display_sosa == "yes" ) and ( self != sosa_ref ) ) ) %}
                                            {% if ( not cancel_links ) %}<a href="/{{ xx.sosa_link }}">{% endif %}
                                                {{ image_sosa(sosa_ref.first_name_key_stripspsosa_ref.surname_key_strip, xx.sosa.v) }}
                                                {% if ( not cancel_links ) %}</a>{% endif %}
                                        {% endif %}
                                    {% endmacro %}
                                    {% macro short_display_person(xx) %}
                                        {{ display_sosa("xx") }}
                                        {% if ( xx.index == central_index ) %}
                                            <b>{{ xx }}</b>
                                        {% else %}
                                            {% if ( cancel_links or xx.is_restricted ) %}
                                                {{ xx }}
                                            {% else %}
                                                <a {{ ext_link("xx") }}
                                                   href="/{{ xx.access }}"
                                                   class="{% if ( xx.sex == 0 ) %}male{% else %}{% if ( xx.sex == 1 ) %}female{% else %}neuter{% endif %}{% endif %}-underline">{{ xx }}</a>
                                            {% endif %}
                                        {% endif %}
                                        {% if ( cancel_links or ( not wizard ) ) %}
                                            <span {% else %}
                                                  a
                                                  href="/m=MOD_IND&i={{ xx.index }}"
                                                  {% endif %}
                                                  {{ sp }}
                                                  title="{% if ( not ( cancel_links or ( not wizard ) ) ) %}{{ _("modify::") |capitalize }} {{ xx.first_name }}{% if ( xx.occ != "0" ) %}.{{ xx.occ }}{% endif %} {{ xx.surname }}{% endif %} {% if xx.computable_age %}({{ xx.age }}){% else %}{% if xx.computable_death_age %}({{ xx.death_age }}){% endif %}{% endif %}"
                                                  class="text-nowrap font-italic">
                                                {% if ( xx.dates != "" ) %}{{ xx.dates }}{% endif %}
                                                {% if ( cancel_links or ( not wizard ) ) %}
                                                </span>
                                            {% else %}
                                            </a>
                                        {% endif %}
                                        {% if ( xx.title != "" ) %}, {{ xx.title }}{% endif %}
                                    {% endmacro %}
                                    {% macro short_display_person_tree(xx) %}
                                        <div>
                                            {% if ( xx.has_sosa and ( e.m != "" ) ) %}{{ display_sosa("xx") }}{% endif %}
                                            {% if ( cancel_links or ( xx.is_restricted or is_self ) ) %}
                                                <span>
                                                    {% if ( xx.public_name != "" ) %}
                                                        {{ xx.public_name }}
                                                    {% else %}
                                                        {{ xx.first_name }}
                                                    {% endif %}
                                                </span>
                                                <br>
                                                <span>{{ xx.surname }}</span>
                                            {% else %}
                                                <a {{ ext_link("xx") }}
                                                   href="/{{ xx.access }}{% if ( e.t != "" ) %}&t={{ e.t }}{% endif %}{% if ( e.v != "" ) %}&v={{ e.v }}{% endif %}{% if ( e.im == 0 ) %}&im=0{% endif %}{% if ( e.marriage == "on" ) %}&marriage=on{% endif %}"><span>
                                                    {% if ( xx.public_name != "" ) %}
                                                        {{ xx.public_name }}
                                                    {% else %}
                                                        {{ xx.first_name }}
                                                    {% endif %}
                                                </span>
                                                <br>
                                                <span>{{ xx.surname }}</span></a>
                                        {% endif %}
                                        {% if ( wizard and ( not cancel_links ) ) %}
                                            <a href="/m=MOD_IND&i={{ xx.index }}"
                                               title="{{ _("modify::") |capitalize }} {{ xx.first_name }}{% if ( xx.occ != "0" ) %}.{{ xx.occ }}{% endif %} {{ xx.surname }}">
                                            {% endif %}
                                            <div class="text-nowrap font-italic"
                                                 title="{% if ( wizard and ( not cancel_links ) ) %}{{ _("modify::") |capitalize }} {{ xx.first_name }}{% if ( xx.occ != "0" ) %}.{{ xx.occ }}{% endif %} {{ xx.surname }}{% endif %}{% if ( xx.computable_age or xx.computable_death_age ) %}{% if xx.computable_age %} ({{ xx.age }}){% else %}{% if xx.computable_death_age %} ({{ xx.death_age }}){% endif %}{% endif %}{% endif %}">
                                                {% if ( xx.dates != "" ) %}
                                                    {{ xx.dates }}
                                                {% else %}
                                                    {% if ( wizard and ( not cancel_links ) ) %}
                                                        -
                                                    {% else %}
                                                        {% if cancel_links %}{% endif %}
                                                    {% endif %}
                                                {% endif %}
                                            </div>
                                            {% if ( wizard and ( not cancel_links ) ) %}</a>{% endif %}
                                    </div>
                                {% endmacro %}
                                {% macro short_display_person_noname(xx) %}
                                    {{ image_MF("xx") }}{{ display_sosa("xx") }}
                                    {% if ( xx.index == central_index ) %}
                                        <b>
                                            {% if ( xx.surname == father.surname ) %}
                                                {% if ( xx.public_name != "" ) %}
                                                    {{ xx.public_name }}
                                                {% else %}
                                                    {{ xx.first_name }}
                                                {% endif %}
                                            {% else %}
                                                {{ xx }}
                                            {% endif %}
                                        </b>
                                    {% else %}
                                        {% if ( cancel_links or xx.is_restricted ) %}
                                            {% if ( ( b.always_surname != "yes" ) and ( xx.surname == father.surname ) ) %}
                                                {% if ( xx.public_name != "" ) %}
                                                    {{ xx.public_name }}
                                                {% else %}
                                                    {{ xx.first_name }}
                                                {% endif %}
                                            {% else %}
                                                {{ xx }}
                                            {% endif %}
                                        {% else %}
                                            <a {{ ext_link("xx") }}
                                               href="/{{ xx.access }}"
                                               title="{{ _("visualize/show/hide/summary", variant='1') |capitalize }} {{ xx }}">
                                                {% if ( ( b.always_surname != "yes" ) and ( xx.surname == father.surname ) ) %}
                                                    {% if ( xx.public_name != "" ) %}
                                                        {{ xx.public_name }}
                                                    {% else %}
                                                        {{ xx.first_name }}
                                                    {% endif %}
                                                {% else %}
                                                    {{ xx }}
                                                {% endif %}
                                            </a>
                                        {% endif %}
                                    {% endif %}
                                    {% if ( wizard and ( not cancel_links ) ) %}<a href="/m=MOD_IND&i={{ xx.index }}">{% endif %}
                                        <span class="text-nowrap font-italic"
                                              title="{% if wizard %}{{ _("modify::") |capitalize }} {{ xx.first_name }}{% if ( xx.occ != "0" ) %}.{{ xx.occ }}{% endif %} {{ xx.surname }}{% endif %}{% if xx.computable_age %} ({{ xx.age }}){% else %}{% if xx.computable_death_age %} ({{ xx.death_age }}){% endif %}{% endif %}">{{ xx.dates }}</span>
                                        {% if ( wizard and ( not cancel_links ) ) %}</a>{% endif %}
                                {% endmacro %}
                                {% macro short_display_person_f(xx) %}
                                    {{ very_short_display_person("xx") }}{{ sp }}{{ xx.title }}<span class="text-nowrap">{{ xx.dates }}</span>
                                    {% if xx.birthday %}({{ _("happy birthday to you!") }}){% endif %}
                                {% endmacro %}
                                {% macro access_ind(nnn) %}
                                    {% if ( cancel_links or nnn.is_restricted ) %}
                                        {{ nnn }}
                                    {% else %}
                                        <a {{ ext_link("nnn") }} href="/{{ nnn.access }}">{{ nnn }}</a>{{ nnn.title }}
                                    {% endif %}
                                    {{ nnn.dates }}{{ nl }}
                                {% endmacro %}
                                {% macro very_short_display_person(xx) %}
                                    {{ image_MF("xx") }}{{ display_sosa("xx") }}
                                    {% if ( xx.index == central_index ) %}
                                        <b>{{ xx }}</b>
                                    {% else %}
                                        {% if ( cancel_links or xx.is_restricted ) %}
                                            {{ xx }}
                                        {% else %}
                                            <a href="/{{ xx.access }}">{{ xx }}</a>
                                        {% endif %}
                                    {% endif %}
                                {% endmacro %}
                                {% macro very_short_display_person_no_sex(xx) %}
                                    {{ display_sosa("xx") }}
                                    {% if ( xx.index == central_index ) %}
                                        <b>{{ xx }}</b>
                                    {% else %}
                                        {% if ( cancel_links or xx.is_restricted ) %}
                                            {{ xx }}
                                        {% else %}
                                            <a href="/{{ xx.access }}"
                                               class="{% if ( xx.sex == 0 ) %}male{% else %}{% if ( xx.sex == 1 ) %}female{% else %}neuter{% endif %}{% endif %}-underline">{{ xx }}</a>
                                        {% endif %}
                                    {% endif %}
                                {% endmacro %}
                                {% macro very_short_display_person_name(xx) %}
                                    {{ image_MF("xx") }}{{ display_sosa("xx") }}
                                    {% if ( xx.index == central_index ) %}
                                        <b>{{ xx_name }}</b>
                                    {% else %}
                                        {% if ( cancel_links or xx.is_restricted ) %}
                                            {{ xx_name }}
                                        {% else %}
                                            <a href="/{{ xx.access }}">{{ xx_name }}</a>
                                        {% endif %}
                                    {% endif %}
                                {% endmacro %}
                                {% macro long_display_person(xx) %}
                                    {{ image_MF("xx") }}{{ display_sosa("xx") }}
                                    {% if ( xx.index == central_index ) %}
                                        <b>{{ xx }}</b>
                                    {% else %}
                                        {% if ( cancel_links or xx.is_restricted ) %}
                                            {{ xx }}
                                        {% else %}
                                            <a {{ ext_link("xx") }} href="/{{ xx.access }}">{{ xx }}</a>
                                        {% endif %}
                                        {% if xx.has_nobility_titles %}{# foreach not implemented yet #}{% endif %}
                                    {% endif %}
                                    <span style="font-size: 90%">
                                        {% if xx.has_birth_date %}
                                            , {{ nth(_("born") , xx.sex) }} {{ xx.on_birth_date }}
                                            {% if xx.birthday %}({{ _("happy birthday to you!") }}){% endif %}
                                            {% if xx.has_birth_place %}- {{ xx.birth_place }}{% endif %}
                                        {% else %}
                                            {% if xx.has_birth_place %}, {{ nth(_("born") , xx.sex) }} - {{ xx.birth_place }}{% endif %}
                                        {% endif %}
                                        {% if xx.has_baptism_date %}
                                            , {{ nth(_("baptized") , xx.sex) }} {{ xx.on_baptism_date }}
                                            {% if xx.has_baptism_place %}- {{ xx.baptism_place }}{% endif %}
                                        {% else %}
                                            {% if xx.has_baptism_place %}, {{ nth(_("baptized") , xx.sex) }} - {{ xx.baptism_place }}{% endif %}
                                        {% endif %}
                                        {% if xx.computable_age %}, {{ _("age") }}{{ _(":") }} {{ xx.age }}{% endif %}
                                        {% if xx.is_dead %}
                                            , {{ xx.died }}
                                            {% if xx.has_death_date %}{{ xx.on_death_date }}{% endif %}
                                            {% if xx.has_death_place %}- {{ xx.death_place }}{% endif %}
                                            {% if xx.computable_death_age %}{{ _("aged") }} {{ xx.death_age }}{% endif %}
                                        {% endif %}
                                        {% if xx.is_buried %}
                                            , {{ nth(_("buried") , xx.sex) }}{{ sp }}
                                            {% if xx.has_burial_date %}{{ xx.on_burial_date }}{% endif %}
                                            {% if xx.has_burial_place %}- {{ xx.burial_place }}{% endif %}
                                        {% endif %}
                                        {% if xx.is_cremated %}
                                            , {{ nth(_("cremated") , xx.sex) }}{{ sp }}
                                            {% if xx.has_cremation_date %}{{ xx.on_cremation_date }}{% endif %}
                                            {% if xx.has_cremation_place %}- {{ xx.cremation_place }}{% endif %}
                                        {% endif %}
                                        {% if xx.has_occupation %}, {{ xx.occupation }}{% endif %}
                                        {% if ( xx.has_consanguinity and ( b.show_consang != "no" ) ) %}
                                            ,{{ sp }}{{ _("consanguinity") }} : {{ xx.consanguinity }}
                                        {% endif %}
                                    </span>
                                {% endmacro %}
                                {% macro display_vertical(xx) %}
                                    {% if ( xx.has_birth_date or ( xx.has_birth_place or ( xx.has_baptism_date or ( xx.has_baptism_place or ( xx.is_dead or ( xx.is_buried or ( xx.is_cremated or ( xx.has_event or ( ( xx.has_consanguinity and ( b.show_consang != "no" ) ) or ( xx.has_occupation or ( xx.has_linked_page.OCCU and ( xx.linked_page.OCCU != "" ) ) ) ) ) ) ) ) ) ) ) ) %}
                                        <ul>
                                            {% if ( xx.index != central_index ) %}
                                                <li>
                                                    {{ image_MF("xx") }}{{ display_sosa("xx") }}
                                                    {% if ( cancel_links or xx.is_restricted ) %}
                                                        {{ xx }}
                                                    {% else %}
                                                        <a href="/{{ xx.access }}">{{ xx }}</a>
                                                    {% endif %}
                                                    {{ sp }}
                                                </li>
                                                {{ nl }}
                                                {% if xx.has_nobility_titles %}{# foreach not implemented yet #}{% endif %}{% endif %}{% if xx.has_birth_date %}<li>{{ capitalize(nth(_("born"), xx.sex)) }} {{ xx.on_birth_date }}{% if xx.birthday %} ({{ _("happy birthday to you!") }}){% endif %}{% if xx.has_birth_place %} - {{ xx.birth_place }}{% endif %}</li>{{ nl }}{% else %}{% if xx.has_birth_place %}<li>{{ capitalize(nth(_("born"), xx.sex)) }} - {{ xx.birth_place }}</li>{{ nl }}{% endif %}{% endif %}{% if xx.has_baptism_date %}<li>{{ capitalize(nth(_("baptized"), xx.sex)) }} {{ xx.on_baptism_date }}{% if xx.has_baptism_place %} - {{ xx.baptism_place }}{% endif %}</li>{{ nl }}{% else %}{% if xx.has_baptism_place %}<li>{{ capitalize(nth(_("baptized"), xx.sex)) }} - {{ xx.baptism_place }}</li>{{ nl }}{% endif %}{% endif %}{% if xx.computable_age %}<li>{{ _("age")|capitalize }} : {{ xx.age }}</li>{{ nl }}{% endif %}{% if xx.has_event %}{# foreach not implemented yet #}
                                                {% endif %}
                                                {% if xx.is_dead %}
                                                    <li>
                                                        {{ capitalize(xx.died) }}
                                                        {% if xx.has_death_date %}{{ xx.on_death_date }}{% endif %}
                                                        {% if xx.has_death_place %}- {{ xx.death_place }}{% endif %}
                                                        {% if ( xx.has_linked_page.DEATH and ( xx.linked_page.DEATH != "" ) ) %}{{ xx.linked_page.DEATH }}{% endif %}
                                                        {% if xx.computable_death_age %}{{ _("aged") }} {{ xx.death_age }}{% endif %}
                                                    </li>
                                                    {{ nl }}
                                                    {% if xx.is_buried %}
                                                        <li>
                                                            {{ capitalize(nth(_("buried") , xx.sex)) }}
                                                            {% if xx.has_burial_date %}{{ xx.on_burial_date }}{% endif %}
                                                            {% if xx.has_burial_place %}- {{ xx.burial_place }}{% endif %}
                                                        </li>
                                                        {{ nl }}
                                                    {% endif %}
                                                    {% if xx.is_cremated %}
                                                        <li>
                                                            {{ capitalize(nth(_("cremated") , xx.sex)) }}
                                                            {% if xx.has_cremation_date %}{{ xx.on_cremation_date }}{% endif %}
                                                            {% if xx.has_cremation_place %}- {{ xx.cremation_place }}{% endif %}
                                                        </li>
                                                        {{ nl }}
                                                    {% endif %}
                                                {% endif %}
                                                {% if xx.has_occupation %}
                                                    <li>{{ capitalize(xx.occupation) }}</li>
                                                    {{ nl }}
                                                {% endif %}
                                                {% if ( xx.has_linked_page.OCCU and ( xx.linked_page.OCCU != "" ) ) %}
                                                    <li>{{ capitalize(xx.linked_page.OCCU) }}</li>
                                                    {{ nl }}
                                                {% endif %}
                                                {% if ( xx.has_consanguinity and ( b.show_consang != "no" ) ) %}
                                                    <li>{{ _("consanguinity") |capitalize }} : {{ xx.consanguinity }}</li>
                                                    {{ nl }}
                                                {% endif %}
                                            </ul>
                                        {% else %}
                                            &nbsp;
                                        {% endif %}
                                    {% endmacro %}
                                    {% macro display_horizontal(xx) %}
                                        {% if ( xx.index != central_index ) %}
                                            {{ image_MF("xx") }}{{ display_sosa("xx") }}
                                            {% if ( cancel_links or xx.is_restricted ) %}
                                                {{ xx }}
                                            {% else %}
                                                <a href="/{{ xx.access }}">{{ xx }}</a>
                                            {% endif %}
                                            {% if xx.has_nobility_titles %}{# foreach not implemented yet #}{% endif %}
                                        {% endif %}
                                        <span style="font-size: 90%">
                                            {% if has_parents %}
                                                {% if ( ( xx.index == father.index ) or ( xx.index == mother.index ) ) %}
                                                    {% if ( has_birth_date and xx.has_birth_date ) %}
                                                        {{ sp }}(<abbr title="{{ age_at_birth_of(central_person) }}">{{ xx_age_at_birth }}</abbr>)
                                                    {% endif %}
                                                {% endif %}
                                            {% endif %}
                                            {% if xx.has_birth_date %}
                                                , {{ nth(_("born") , xx.sex) }} {{ xx.on_birth_date }}
                                                {% if xx.birthday %}({{ _("happy birthday to you!") }}){% endif %}
                                                {% if xx.has_birth_place %}- {{ xx.birth_place }}{% endif %}
                                            {% else %}
                                                {% if xx.has_birth_place %}, {{ nth(_("born") , xx.sex) }} - {{ xx.birth_place }}{% endif %}
                                            {% endif %}
                                            {% if xx.has_baptism_date %}
                                                , {{ nth(_("baptized") , xx.sex) }} {{ xx.on_baptism_date }}
                                                {% if xx.has_baptism_place %}- {{ xx.baptism_place }}{% endif %}
                                            {% else %}
                                                {% if xx.has_baptism_place %}, {{ nth(_("baptized") , xx.sex) }} - {{ xx.baptism_place }}{% endif %}
                                            {% endif %}
                                            {% if xx.computable_age %}, {{ _("age") }}{{ _(":") }} {{ xx.age }}{% endif %}
                                            {% if xx.is_dead %}
                                                , {{ xx.died }}
                                                {% if xx.has_death_date %}{{ xx.on_death_date }}{% endif %}
                                                {% if xx.has_death_place %}- {{ xx.death_place }}{% endif %}
                                                {% if xx.computable_death_age %}{{ _("aged") }} {{ xx.death_age }}{% endif %}
                                                {% if xx.is_buried %}
                                                    , {{ nth(_("buried") , xx.sex) }}{{ sp }}
                                                    {% if xx.has_burial_date %}{{ xx.on_burial_date }}{% endif %}
                                                    {% if xx.has_burial_place %}- {{ xx.burial_place }}{% endif %}
                                                {% endif %}
                                                {% if xx.is_cremated %}
                                                    , {{ nth(_("cremated") , xx.sex) }}{{ sp }}
                                                    {% if xx.has_cremation_date %}{{ xx.on_cremation_date }}{% endif %}
                                                    {% if xx.has_cremation_place %}- {{ xx.cremation_place }}{% endif %}
                                                {% endif %}
                                            {% endif %}
                                            {% if xx.has_occupation %}, {{ xx.occupation }}{% endif %}
                                            {% if ( xx.has_consanguinity and ( b.show_consang != "no" ) ) %}
                                                ,{{ sp }}{{ _("consanguinity") }}{{ _(":") }} {{ xx.consanguinity }}
                                            {% endif %}
                                        </span>
                                    {% endmacro %}
                                    {% macro rel_date_place(sexx, date_place) %}
                                        {% if ( sexx == 1 ) %}
                                            {% if are_married %}
                                                {{ _("married%t to:::date_place", variant='1') }}
                                            {% else %}
                                                {% if are_not_married %}
                                                    {{ _("relationship%t to:::date_place", variant='1') }}
                                                {% else %}
                                                    {% if are_engaged %}
                                                        {{ _("engaged%t to:::date_place", variant='1') }}
                                                    {% else %}
                                                        {% if is_no_sexes_check %}
                                                            {{ _("relationship%t to:::date_place", variant='1') }}
                                                        {% else %}
                                                            {% if is_no_mention %}
                                                                {{ _("no mention") }} | date_place {{ _("with") }}
                                                            {% else %}
                                                                {% if are_marriage_banns %}
                                                                    {{ _("marriage banns%t to:::date_place", variant='1') }}
                                                                {% else %}
                                                                    {% if are_marriage_contract %}
                                                                        {{ _("marriage contract%t with:::date_place", variant='1') }}
                                                                    {% else %}
                                                                        {% if are_marriage_license %}
                                                                            {{ _("married%t to:::date_place", variant='1') }}
                                                                        {% else %}
                                                                            {% if are_pacs %}
                                                                                {{ _("pacsed%t to:::date_place", variant='1') }}
                                                                            {% else %}
                                                                                {% if are_residence %}
                                                                                    {{ _("residence%t to:::date_place", variant='1') }}
                                                                                {% endif %}
                                                                            {% endif %}
                                                                        {% endif %}
                                                                    {% endif %}
                                                                {% endif %}
                                                            {% endif %}
                                                        {% endif %}
                                                    {% endif %}
                                                {% endif %}
                                            {% endif %}
                                        {% else %}
                                            {% if are_married %}
                                                {{ _("married%t to:::date_place", variant='0') }}
                                            {% else %}
                                                {% if are_not_married %}
                                                    {{ _("relationship%t to:::date_place", variant='0') }}
                                                {% else %}
                                                    {% if are_engaged %}
                                                        {{ _("engaged%t to:::date_place", variant='0') }}
                                                    {% else %}
                                                        {% if is_no_sexes_check %}
                                                            {{ _("relationship%t to:::date_place", variant='0') }}
                                                        {% else %}
                                                            {% if is_no_mention %}
                                                                {{ _("no mention") }} | date_place {{ _("with") }}
                                                            {% else %}
                                                                {% if are_marriage_banns %}
                                                                    {{ _("marriage banns%t to:::date_place", variant='0') }}
                                                                {% else %}
                                                                    {% if are_marriage_contract %}
                                                                        {{ _("marriage contract%t with:::date_place", variant='0') }}
                                                                    {% else %}
                                                                        {% if are_marriage_license %}
                                                                            {{ _("married%t to:::date_place", variant='0') }}
                                                                        {% else %}
                                                                            {% if are_pacs %}
                                                                                {{ _("pacsed%t to:::date_place", variant='0') }}
                                                                            {% else %}
                                                                                {% if are_residence %}
                                                                                    {{ _("residence%t to:::date_place", variant='0') }}
                                                                                {% endif %}
                                                                            {% endif %}
                                                                        {% endif %}
                                                                    {% endif %}
                                                                {% endif %}
                                                            {% endif %}
                                                        {% endif %}
                                                    {% endif %}
                                                {% endif %}
                                            {% endif %}
                                        {% endif %}
                                    {% endmacro %}
                                    {% macro married_to(xx, yy) %}
                                        {% with %}
                                            {% set marr_text = rel_date_place(xx.sex, (" "on_marriage_date) if (( on_marriage_date != "" ))(" "in_place" "marriage_place) if (( marriage_place != "" ))) %}
                                            {% if ( yy == 1 ) %}
                                                {{ capitalize(marr_text) }}
                                            {% else %}
                                                {{ marr_text }}
                                            {% endif %}
                                            {% if wedding_birthday %}({{ _("happy birthday to them!") }}){% endif %}
                                        {% endwith %}
                                    {% endmacro %}
                                    {% macro display_date_marriage_parent(xx) %}
                                        {# foreach not implemented yet #}
                                    {% endmacro %}
                                    {% macro not_married_no_descendants() %}
                                        <img src="{{ url_for('static', path='images/not_married_no_descendants.png') }}"
                                             alt="{{ _("not married") }},&nbsp;{{ _("no descendants") }}"
                                             title="{{ _("not married") }},&nbsp;{{ _("no descendants") }}">
                                    {% endmacro %}
                                    {% macro short_display_siblings() %}
                                        {{ li_SDC("child") }}{{ short_display_person("child") }}
                                    </li>
                                {% endmacro %}
                                {% macro short_display_siblings_noname() %}
                                    {{ li_SDC("child") }}{{ short_display_person_noname("child") }}
                                </li>
                            {% endmacro %}
                            {% macro long_display_siblings() %}
                                {{ li_SDC("child") }}{{ short_display_person("child") }}
                                {% if child.has_families %}{# foreach not implemented yet #}{% endif %}
                            </li>
                        {% endmacro %}
                        {% macro display_sibling() %}
                            {{ li_SDC("child") }}
                            {% if child.has_image %}
                                <table>
                                    <tr>
                                        <td style="vertical-align: middle">
                                            {% if ( e.cgl != "on" ) %}
                                                <a href="{{ child.image_html_url }}">
                                                    <img src="{{ child.image_url }}"
                                                         {{ sp }}
                                                         {{ child.image_small_size }}
                                                         style="border: none"
                                                         alt=""
                                                         title="{{ _("image/images", variant='0') }}">
                                                </a>
                                            {% else %}
                                                <img src="{{ child.image_url }}"
                                                     {{ sp }}
                                                     {{ child.image_small_size }}
                                                     style="border: none"
                                                     alt=""
                                                     title="{{ _("image/images", variant='0') }}">
                                            {% endif %}
                                        </td>
                                        <td style="vertical-align: middle">
                                        {% endif %}
                                        {{ short_display_person_f("child") }}
                                        {% if child.has_families %}{# foreach not implemented yet #}{% endif %}
                                        {% if child.has_image %}
                                        </td>
                                    </tr>
                                </table>
                            {% endif %}
                        </li>
                    {% endmacro %}
                    {% macro list_half_siblings() %}
                        <ul>
                            {{ li_SD("spouse") }}
                            {% if spouse.has_image %}
                                <table border="{{ border }}">
                                    <tr>
                                        <td style="vertical-align: middle">
                                            {{ _("with") }}
                                            {{ short_display_person("spouse") }}
                                        </td>
                                        <td style="vertical-align: middle">
                                            {% if ( e.cgl != "on" ) %}
                                                <a href="{{ spouse.image_html_url }}">
                                                    <img src="{{ spouse.image_url }}"
                                                         {{ sp }}
                                                         {{ spouse.image_small_size }}
                                                         style="border: none"
                                                         alt=""
                                                         title="{{ _("image/images", variant='0') }}">
                                                </a>
                                            {% else %}
                                                <img src="{{ spouse.image_url }}"
                                                     {{ sp }}
                                                     {{ spouse.image_small_size }}
                                                     style="border: none"
                                                     alt=""
                                                     title="{{ _("image/images", variant='0') }}">
                                            {% endif %}
                                        </td>
                                    </tr>
                                </table>
                            {% else %}
                                {{ _("with") }}
                                {{ short_display_person("spouse") }}
                            {% endif %}
                            {% if has_children %}
                                <ul>
                                    {# foreach not implemented yet #}
                                </ul>
                            {% endif %}
                        </li>
                    </ul>
                {% endmacro %}
                {% macro detail_wedding() %}
                    {% if ( wizard or friend ) %}
                        {{ type_wedding() }}
                        {% if ( marriage_date.year != "" ) %}{{ marriage_date.year }}{% endif %}
                    {% endif %}
                {% endmacro %}
                {% macro detail_children() %}
                    {{ nb_children }}
                    {% if ( nb_children <= 1 ) %}
                        {{ _("child/children", variant='0') }}
                    {% else %}
                        {{ _("child/children", variant='1') }}
                    {% endif %}
                {% endmacro %}
                {% macro desc_seq(yyy, bi) %}
                    <li class="list-unstyled">
                        <ul>
                            {# foreach not implemented yet #}
                        </ul>
                    </li>
                {% endmacro %}
                {% macro descendancy_grand_fathers(mmm, yyy, bi) %}
                    {# foreach not implemented yet #}{% endmacro %}{% macro descendancy_grand_mothers(mmm, yyy, bi) %}{# foreach not implemented yet #}{% endmacro %}{% with %}{% set p_mod = (b.p_mod) if (( ( b.p_mod != "" ) and ( e.p_mod == "" ) )) else ((e.p_mod) if (( e.p_mod != "" ))) %}{% macro mm(i) %}{{ mi }}{% endmacro %}{% macro oo(i) %}{{ oi }}{% endmacro %}{% with %}{% set m0 = nth_c(p_mod, 0) %}{% with %}{% set o0 = nth_c(p_mod, 1) %}{% with %}{% set m1 = nth_c(p_mod, 2) %}{% with %}{% set o1 = nth_c(p_mod, 3) %}{% with %}{% set m2 = nth_c(p_mod, 4) %}{% with %}{% set o2 = nth_c(p_mod, 5) %}{% with %}{% set m3 = nth_c(p_mod, 6) %}{% with %}{% set o3 = nth_c(p_mod, 7) %}{% with %}{% set m4 = nth_c(p_mod, 8) %}{% with %}{% set o4 = nth_c(p_mod, 9) %}{% with %}{% set m5 = nth_c(p_mod, 10) %}{% with %}{% set o5 = nth_c(p_mod, 11) %}{% with %}{% set m6 = nth_c(p_mod, 12) %}{% with %}{% set o6 = nth_c(p_mod, 13) %}{% with %}{% set m7 = nth_c(p_mod, 14) %}{% with %}{% set o7 = nth_c(p_mod, 15) %}{% with %}{% set m8 = nth_c(p_mod, 16) %}{% with %}{% set o8 = nth_c(p_mod, 17) %}{% with %}{% set m9 = nth_c(p_mod, 18) %}{% with %}{% set o9 = nth_c(p_mod, 19) %}{% with %}{% set m10 = nth_c(p_mod, 20) %}{% with %}{% set o10 = nth_c(p_mod, 21) %}{% with %}{% set m11 = nth_c(p_mod, 22) %}{% with %}{% set o11 = nth_c(p_mod, 23) %}{% with %}{% set m12 = nth_c(p_mod, 24) %}{% with %}{% set o12 = nth_c(p_mod, 25) %}{% with %}{% set m13 = nth_c(p_mod, 26) %}{% with %}{% set o13 = nth_c(p_mod, 27) %}{% with %}{% set m14 = nth_c(p_mod, 28) %}{% with %}{% set o14 = nth_c(p_mod, 29) %}{% with %}{% set m15 = nth_c(p_mod, 30) %}{% with %}{% set o15 = nth_c(p_mod, 31) %}{% with %}{% set perso_module_a = "arbres" %}{% with %}{% set perso_module_c = "chronologie" %}{% with %}{% set perso_module_d = "data_3col" %}{% with %}{% set perso_module_f = "fratrie" %}{% with %}{% set perso_module_g = "gr_parents" %}{% with %}{% set perso_module_h = "htrees" %}{% with %}{% set perso_module_i = "individu" %}{% with %}{% set perso_module_l = "ligne" %}{% with %}{% set perso_module_n = "notes" %}{% with %}{% set perso_module_p = "parents" %}{% with %}{% set perso_module_r = "relations" %}{% with %}{% set perso_module_s = "sources" %}{% with %}{% set perso_module_u = "unions" %}{% with %}{% set perso_module_t = "test" %}{% with %}{% set abc = "acdfghilnprsut" %}{{ reset_count }}{% for i in 0..15 %}{% with %}{% set mnb = mm(i) %}{% if ( mnb != "" ) %}{{ incr_count }}{% endif %}{% endwith %}{% endfor %}{% with %}{% set p_mod_nbr = count %}{% macro show_templ(tpl) %}{{ include.tpl }}{% endmacro %}{% macro get_mod(modnum, optx) %}{% if ( "modnum" in abc ) %}{% with %}{% set modx = "modules/"perso_module_modnum %}{% with %}{% set op_m = "optx" %}{{ show_templ(modx) }}{% endwith %}{% endwith %}{% else %}{% with %}{% set modx = "modules/"b.perso_module_modnum %}{% with %}{% set op_m = "1" %}{{ show_templ(modx) }}{% endwith %}{% endwith %}{% endif %}{% endmacro %}{{ reset_count }}{% if ( p_mod != "" ) %}{% if ( "c" in p_mod ) %}{{ incr_count }}{% endif %}{% endif %}{% if ( p_mod == "zz" ) %}{{ incr_count }}{% endif %}{% with %}{% set timeline = ("yes") if (( count > 0 )) else ("no") %}{% macro relation_separation_tooltip() %}{% if are_married %}& {{ _("married") }} {% else %}{% if are_not_married %}{{ _("no marriage event") }} {% endif %}{% endif %}{% if ( ( ( marriage_date != "" ) and ( marriage_date.prec == "" ) ) or ( marriage_date.prec == "?" ) ) %}{{ marriage_date }} {% endif %}{% if are_separated %}— {{ _("separated") }} {% if ( separation_date != "" ) %}{{ separation_date }}{% endif %}{% endif %}{% if are_divorced %}– ⅋ {{ _("divorced") }} {% if ( divorce_date != "" ) %}{{ divorce_date }}{% endif %}{% endif %}{% endmacro %}{% if ( ( e.m == "" ) and ( ( p_mod == "" ) or ( ( p_mod == "zz" ) or ( "i" in p_mod ) ) ) ) %}{# foreach not implemented yet #}{% endif %}{% if ( ( e.m == "" ) and ( ( p_mod == "" ) or ( ( p_mod == "zz" ) or ( "u" in p_mod ) ) ) ) %}{{ reset_count }}{# foreach not implemented yet #}
                {% endif %}
            {% endwith %}
        {% endwith %}
    {% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}

{# 
  Generated by JinjaGenerator for template 'modules/arbre_famille'
    at 2025-10-26T20:25:10.837822

  Used macros:
  - short_display_person_image(xxx, yyy, zzz)
  - in_full(ccc, maj)
  - addpar(xx, yy)
  - on_side(xx)
  - ancestorlv4(vv, ww, xx, yy, zz)
  - border()
  - short_display_person_spouse_image(xx, yy)
  - url(xxx, yyy)

  Used includes:
  None

  Used variables:
  - sp (x6)
  - childrank (x2)
  - xxx.is_male (x5)
  - xxx.is_female (x4)
  - xxx.birth_date (x1)
  - xxx.slash_birth_date (x1)
  - xxx.birth_place (x2)
  - xxx.is_dead (x3)
  - xxx.death_date (x1)
  - xxx.slash_death_date (x1)
  - xxx.death_place (x2)
  - xxx.computable_death_age (x1)
  - xxx.death_age (x1)
  - xxx.computable_age (x1)
  - xxx.age (x1)
  - xxx.has_sosa (x2)
  - xxx.sosa (x2)
  - xxx.is_restricted (x3)
  - xxx.access (x2)
  - xxx (x5)
  - xxx.has_image (x1)
  - xxx.image_url (x2)
  - xxx.index (x2)
  - xxx.first_name (x3)
  - xxx.surname (x3)
  - xxx.occ (x2)
  - xxx.dates (x2)
  - spouserank (x1)
  - selfsex (x1)
  - sosa_ref (x1)
  - e.im (x7)
  - e.sp (x5)
  - e.half (x4)
  - e.m (x2)
  - e.fn (x3)
  - e.wide (x1)
  - e.fam (x2)
  - cancel_links (x15)
  - personinfo (x5)
  - b.default_image (x1)
  - wizard (x7)
  - images_prefix (x1)
  - maj (x1)
  - spouse (x1)
  - self (x1)
  - self.is_male (x1)
  - xx (x1)
  - prefix_set.pmod (x1)
  - url_set.im[0] (x1)
  - url_set.im (x1)
  - url_set.half[0] (x1)
  - url_set.half (x1)
  - url_set.sp[0] (x1)
  - url_set.sp (x1)
  - url_set.fn[0] (x1)
  - url_set.fn (x1)
  - url_set.xxx.yyy (x1)
  - p_mod (x2)
  - has_parents (x2)
  - father.has_parents (x1)
  - father.index (x2)
  - mother.has_parents (x1)
  - mother.index (x2)
  - index (x1)
  - has_families (x4)
  - nb_children (x1)
  - nb_families (x1)
#}
<!-- $Id: modules/arbre_famille.txt v7.1 13/08/2023 23:29:59 $ -->
{% macro short_display_person_image(xxx, yyy, zzz) %}
    {% with %}
        {% set personinfo = (sp"("childrank")") if (( "xxx" == "child" )) else (((sp"("(_("a brother-in-law/a sister-in-law", variant='0')) if (xxx.is_male) else ((_("a brother-in-law/a sister-in-law", variant='1')) if (xxx.is_female) else (_("a sibling-in-law/siblings-in-law", variant='0')))")") if (( ( "zzz" == "siblings" ) or ( "zzz" == "spouse.siblings" ) )) else ((sp"("(_("a son-in-law/a daughter-in-law", variant='0')) if (xxx.is_male) else ((_("a son-in-law/a daughter-in-law", variant='1')) if (xxx.is_female) else (_("a child-in-law/children-in-law", variant='0')))")") if (( ( "zzz" == "child" ) or ( "zzz" == "child.halfsiblings" ) )) else ((sp"("a_of_b(("("_("the spouse", variant='0')) if (xxx.is_male) else (_("the spouse", variant='1')), childrank)")") if (( ( "zzz" == "halfsiblings" ) or ( "zzz" == "spouse.halfsiblings" ) ))))) if (( "xxx" == "child.spouse" )) else ((spouserank) if (( "xxx" == "spouse" )) else ((selfsex) if (( "xxx" == "self" )) else ((" ("_("the father/the mother/a parent", variant='0')")") if (( "xxx" == "father" )) else ((" ("_("the father/the mother/a parent", variant='1')")") if (( "xxx" == "mother" )) else ((" ("_("the father-in-law/the mother-in-law", variant='0')")") if (( "xxx" == "spouse.father" )) else ((" ("_("the father-in-law/the mother-in-law", variant='1')")") if (( "xxx" == "spouse.mother" )) else ((" ("_("a grandfather/a grandmother/a grandparent", variant='0')")") if (( ( "xxx" == "father.father" ) or ( ( "xxx" == "mother.father" ) or ( ( "xxx" == "spouse.father.father" ) or ( "xxx" == "spouse.mother.father" ) ) ) )) else ((" ("_("a grandfather/a grandmother/a grandparent", variant='1')")") if (( ( "xxx" == "father.mother" ) or ( ( "xxx" == "mother.mother" ) or ( ( "xxx" == "spouse.father.mother" ) or ( "xxx" == "spouse.mother.mother" ) ) ) )))))))))))("&#010;   ° "xxx.slash_birth_date) if (( xxx.birth_date != "" ))(spxxx.birth_place) if (( xxx.birth_place != "" ))("&#010;   †") if (xxx.is_dead)(" "xxx.slash_death_date) if (( xxx.death_date != "" ))(spxxx.death_place) if (( xxx.death_place != "" ))("&#010;     "xxx.death_age) if (( xxx.is_dead and xxx.computable_death_age )) else (("&#010;      "xxx.age) if (( ( not xxx.is_dead ) and xxx.computable_age )))(("&#010;"_("n° Sosa")|capitalize" 1") if (( xxx.sosa == 1 )) else ("&#010;"a_of_b(_("n° Sosa")|capitalize" "xxx.sosa, sosa_ref))) if (xxx.has_sosa) %}
        <div class="d-flex justify-content-start list-group-item list-group-item-{% if xxx.has_sosa %}warning{% else %}{% if xxx.is_male %}primary{% else %}{% if xxx.is_female %}danger{% else %}dark{% endif %}{% endif %}{% endif %} {% if ( ( "xxx" == "mother" ) or ( "xxx" == "spouse.mother" ) ) %}ml-1{% else %}{% if ( ( "xxx" == "father" ) or ( "xxx" == "spouse.father" ) ) %}mr-1{% else %}pr-0 w-100{% endif %}{% endif %}{% if ( e.im != 0 ) %} pl-0 py-0{% endif %}{% if ( ( "xxx" == "father.father" ) or ( "xxx" == "mother.father" ) ) %} translate-left-1 {% else %}{% if ( ( "xxx" == "spouse.father.father" ) or ( "xxx" == "spouse.mother.father" ) ) %} translate-right-1 {% endif %}{% endif %}">
            {% if ( not ( cancel_links or xxx.is_restricted ) ) %}
                <a href="/{{ xxx.access }}&m=F{% if ( e.sp == 0 ) %}&sp=0{% endif %}{% if ( e.half == 0 ) %}&half=0{% endif %}{% if ( e.im == 0 ) %}&im=0{% endif %}"
                   class="big_anchor list-group-item-action"
                   title="{{ _("navigation") |capitalize }} {{ xxx }}{{ personinfo }}"></a>
            {% endif %}
            <div class="d-flex align-items-center">
                {% if ( ( e.im != 0 ) and ( ( "yyy" == "yes" ) or ( "yyy" == "force" ) ) ) %}
                    {% if xxx.has_image %}
                        {% if ( not cancel_links ) %}
                            <a href="{{ xxx.image_url }}"
                               class="normal_anchor"
                               target="_blank"
                               title="{{ _("image/images", variant='0') |capitalize }} {{ xxx }}{{ personinfo }}">
                            {% endif %}
                            <img class="image-arbre-famille {% if ( not cancel_links ) %}fade_image{% endif %} rounded ml-0 pr-0"
                                 src="{{ xxx.image_url }}"
                                 alt="{{ _("image/images", variant='0') }}">
                            {% if ( not cancel_links ) %}</a>{% endif %}
                    {% else %}
                        {% if ( b.default_image == "yes" ) %}
                            {% if ( wizard and ( not cancel_links ) ) %}
                                <a href="/m=SND_IMAGE;i={{ xxx.index }}"
                                   class="normal_anchor"
                                   target="_blank"
                                   title="{{ a_of_b(_("add picture") |capitalize, xxx) }}{{ personinfo }}">
                                {% endif %}
                                <img class="image-arbre-famille rounded ml-0"
                                     src="{{ images_prefix }}img_unknown_{% if xxx.is_female %}wo{% else %}{% if xxx.is_male %}{% else %}u_{% endif %}{% endif %}man.png"
                                     alt="{{ _("missing image") }}">
                                {% if ( wizard and ( not cancel_links ) ) %}</a>{% endif %}
                        {% else %}
                            <span class="image-arbre-placeholder ml-0 pb-2">?</span>
                        {% endif %}
                    {% endif %}
                {% endif %}
            </div>
            <div class="d-flex flex-column justify-content-center overflow-hidden ml-2">
                {% if ( not ( cancel_links or xxx.is_restricted ) ) %}
                    <a class="normal_anchor"
                       href="/{{ xxx.access }}"
                       title="{{ a_of_b(_("vital record") |capitalize, (_("unknown person")) if (( xxx == "? ?" )) else (xxx.first_name" "xxx.surname)) }}{{ personinfo }}">
                    {% endif %}
                    <span class="name-container {% if ( ( "xxx" == "father" ) or ( ( "xxx" == "mother" ) or ( ( "xxx" == "father.father" ) or ( ( "xxx" == "father.mother" ) or ( ( "xxx" == "mother.father" ) or ( "xxx" == "mother.mother" ) ) ) ) ) ) %}text-truncate-narrow{% endif %}">
                    {{ xxx.first_name }} {{ xxx.surname }}</span>
                    {% if ( not ( cancel_links or xxx.is_restricted ) ) %}</a>{% endif %}
                {% if ( wizard and ( not cancel_links ) ) %}
                    <a class="normal_anchor"
                       href="/m=MOD_IND&i={{ xxx.index }}"
                       title="{{ _("modify::") |capitalize }} {% if ( xxx == "? ?" ) %}{{ _("unknown person") }}{% else %}{{ xxx.first_name }}{% if ( xxx.occ != "0" ) %}.{{ xxx.occ }}{% endif %} {{ xxx.surname }}{% endif %}{{ personinfo }}">
                    {% endif %}
                    <span class="text-muted">
                        {% if ( xxx.dates != "" ) %}
                            {{ xxx.dates }}
                        {% else %}
                            {% if ( wizard and ( not cancel_links ) ) %}
                                -
                            {% else %}
                                {% if cancel_links %}<br>{% endif %}
                            {% endif %}
                        {% endif %}
                    </span>
                    {% if ( wizard and ( not cancel_links ) ) %}</a>{% endif %}
            </span>
        </div>
    </div>
{% endwith %}
{% endmacro %}
{% macro in_full(ccc, maj) %}
    {% if ( maj == 1 ) %}
        {{ capitalize(nth(_("n (number)") , "ccc")) }}
    {% else %}
        {{ nth(_("n (number)") , "ccc") }}
    {% endif %}
{% endmacro %}
{% macro addpar(xx, yy) %}
    {% if ( "xx" == "spouse" ) %}<div class="col-4 p-2"></div>{% endif %}
    <div class="{% if ( ( "xx" == "spouse" ) or ( ( "xx" == "" ) or ( "xx" == "ancestor" ) ) ) %}col-6 mx-1 {% else %}{% if ( ( "xx" == "father" ) or ( ( "xx" == "mother" ) or ( ( "xx" == "spouse.father" ) or ( "xx" == "spouse.mother" ) ) ) ) %}w-75 align-self-center mx-1{% endif %}{% endif %}{% if ( "xx" == "spouse" ) %}mr-5 ml-auto{% else %}{% if ( "xx" == "" ) %}mr-auto ml-5{% endif %}{% endif %} text-center rounded-top {% if wizard %}list-group-item-secondary{% endif %}">
        {% if wizard %}
            <a href="/m=ADD_PAR;ip=yy;"
               class="text-center align-self-center"
               title="{{ a_of_b(_("add") |capitalize" "_("missing parents"), (spouse) if (( "xx" == "spouse" )) else ((self) if (( "xx" == "" )) else (xx))) }}">
                <i class="fa fa-plus mx-2 text-danger"></i>
            </a>
        {% endif %}
    </div>
    {% if ( "xx" == "" ) %}<div class="col-4 p-2"></div>{% endif %}
{% endmacro %}
{% macro on_side(xx) %}
    {{ _("on %s's side:::xx") }}
{% endmacro %}
{% macro ancestorlv4(vv, ww, xx, yy, zz) %}
    {# foreach not implemented yet #}{# foreach not implemented yet #}
{% endmacro %}
{% macro border() %}
    <div class="w-50 border border-dark border-left-0 border-top-0 border-bottom-0">&#8203;</div>
{% endmacro %}
{% macro short_display_person_spouse_image(xx, yy) %}
    {{ short_display_person_image('xx', 'yes', 'yy') }}
    {% if ( e.sp != 0 ) %}{# foreach not implemented yet #}{% endif %}
{% endmacro %}
{% with %}
    {% set prefx = (prefix_set.pmod) if (( e.m == "F" )) else ("/") %}
    {% if ( not cancel_links ) %}
        <div class="d-flex justify-content-end">
            <div class="text-right mr-3">
                <a href="{% if ( e.im != 0 ) %}{{ url_set.im[0] }}{% else %}{{ url_set.im }}{% endif %}"
                   class="btn btn-outline-{% if ( e.im == 0 ) %}primary{% else %}danger{% endif %}"
                   title="{% if ( e.im != 0 ) %}{{ _("visualize/show/hide/summary", variant='2') |capitalize }}{% else %}{{ _("visualize/show/hide/summary", variant='1') |capitalize }}{% endif %} {{ _("image/images", variant='0') }}">
                    <i class="fa fa-image fa-fw"></i>
                </a>
                <a href="{% if ( e.half != 0 ) %}{{ url_set.half[0] }}{% else %}{{ url_set.half }}{% endif %}"
                   class="btn btn-outline-{% if ( e.half == 0 ) %}primary{% else %}danger{% endif %}"
                   title="{% if ( e.half != 0 ) %}{{ _("visualize/show/hide/summary", variant='2') |capitalize }}{% else %}{{ _("visualize/show/hide/summary", variant='1') |capitalize }}{% endif %} {{ _("half-brothers/half-sisters/half-siblings", variant='2') }}">
                ½</a>
                <a href="{% if ( e.sp != 0 ) %}{{ url_set.sp[0] }}{% else %}{{ url_set.sp }}{% endif %}"
                   class="btn btn-outline-{% if ( e.sp == 0 ) %}primary{% else %}danger{% endif %}"
                   title="{% if ( e.sp != 0 ) %}{{ _("visualize/show/hide/summary", variant='2') |capitalize }}{% else %}{{ _("visualize/show/hide/summary", variant='1') |capitalize }}{% endif %} {{ _("spouse/spouses", variant='1') }}">
                    <i class="fa fa-user-plus fa-flip-horizontal" aria-hidden="true"></i>
                </a>
                <a href="{% if ( e.fn != 0 ) %}{{ url_set.fn[0] }}{% else %}{{ url_set.fn }}{% endif %}"
                   class="btn btn-outline-{% if ( e.fn == 0 ) %}primary{% else %}danger{% endif %}"
                   title="{% if ( e.fn != 0 ) %}{{ _("visualize/show/hide/summary", variant='2') |capitalize }}{% else %}{{ _("visualize/show/hide/summary", variant='1') |capitalize }}{% endif %} {{ _("first name/first names", variant='1') }}">
                    <i class="fa fa-child fa-fw" aria-hidden="true"></i>
                </a>
            </div>
        </div>
    {% endif %}
    {% if ( ( ( p_mod == "zz" ) or ( p_mod == "" ) ) and ( e.m != "F" ) ) %}
        <div class="col-12{% if ( e.wide != "on" ) %} col-lg-8{% endif %}">
        {% endif %}
        {% with %}
            {% set fam_cnt = (e.fam) if (( e.fam != "" )) else ("1") %}
            <div class="col-12 d-flex mt-2">
                <div class="col-6 px-0 mr-1 align-self-end">
                    {% if has_parents %}
                        <div class="d-flex">
                            <div class="col-6 px-0 align-self-end">
                                <div class="d-flex flex-column">
                                    {% if father.has_parents %}
                                        {% if ( not cancel_links ) %}
                                            <div class="d-flex justify-content-around px-2 mr-1">{{ ancestorlv4('ancestor', 8, 9, 10, 11) }}</div>
                                        {% endif %}
                                        <div class="list-group mr-1 d-flex align-items-stretch">
                                            {{ short_display_person_image('father.father', 'yes', '') }}{{ short_display_person_image('father.mother', 'yes', '') }}
                                        </div>
                                        {{ border() }}
                                    {% else %}
                                        {{ addpar("father", father.index) }}
                                    {% endif %}
                                    <div class="list-group">{{ short_display_person_image('father', 'yes', '') }}</div>
                                </div>
                            </div>
                            <div class="col-6 px-0 align-self-end">
                                <div class="d-flex flex-column">
                                    {% if mother.has_parents %}
                                        {% if ( not cancel_links ) %}
                                            <div class="d-flex justify-content-around px-2 ml-1">{{ ancestorlv4('ancestor', 12, 13, 14, 15) }}</div>
                                        {% endif %}
                                        <div class="list-group ml-1">
                                            {{ short_display_person_image('mother.father', 'yes', '') }}{{ short_display_person_image('mother.mother', 'yes', '') }}
                                        </div>
                                        {{ border() }}
                                    {% else %}
                                        {{ addpar("mother", mother.index) }}
                                    {% endif %}
                                    <div class="list-group">{{ short_display_person_image('mother', 'yes', '') }}</div>
                                </div>
                            </div>
                        </div>
                        {{ border() }}
                    {% else %}
                        <div class="d-flex">{{ addpar("", index) }}</div>
                    {% endif %}
                </div>
                <div class="col-6 px-0 ml-1 align-self-end">{# foreach not implemented yet #}</div>
            </div>
            <div class="col-12 d-flex px-1">
                <div class="col{% if ( not has_families ) %}-6{% endif %} pr-0 pl-2">
                    <div class="{% if ( not has_families ) %}d-flex justify-content-center mx-5{% else %}ml-3{% endif %}">
                        {% with %}
                            {% set selfsex = "("(_("him/her", variant='0')) if (self.is_male) else (_("him/her", variant='1'))")" %}{{ short_display_person_image('self', 'force', '') }}
                            {% with %}
                                {% set selfsex =  %}
                            </div>
                            {% if has_parents %}
                                {% with %}
                                    {% set fath = father.index %}
                                    {% with %}
                                        {% set moth = mother.index %}{# foreach not implemented yet #}{# foreach not implemented yet #}
                                    {% endwith %}
                                {% endwith %}
                            {% endif %}
                        </div>
                        <div class="{% if ( not has_families ) %}d-none{% else %}col{% endif %} px-0">
                            <div class="d-flex flex-column">
                                <div class="{% if ( e.im != 0 ) %}mt-3{% endif %} px-0">
                                    {% with %}
                                        {% set nb_ch_tot = nb_children %}{# foreach not implemented yet #}
                                    </div>
                                    <div class="px-2">{# foreach not implemented yet #}{# foreach not implemented yet #}</div>
                                </div>
                            </div>
                            {% macro url(xxx, yyy) %}
                                {{ url_set.xxx.yyy }}
                            {% endmacro %}
                            <div class="{% if ( not has_families ) %}d-none{% else %}col{% endif %} pl-0 pr-2">
                                <div class="mr-3">
                                    {% with %}
                                        {% set famcount = nb_families %}{# foreach not implemented yet #}
                                    </div>
                                    {# foreach not implemented yet #}
                                </div>
                            </div>
                        {% endwith %}
                    {% endwith %}
                {% endwith %}
            {% endwith %}
        {% endwith %}
    {% endwith %}

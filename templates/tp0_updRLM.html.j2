{# 
  Generated by JinjaGenerator for template 'tp0_updRLM'
    at 2025-10-26T20:24:47.105091

  Used macros:
  - one_pvar_line(znz, zocz, zfnz, zsnz, zbdz, ztz, zparamz)
  - one_pvar(zz)
  - my_hidden(xx)

  Used includes:
  - css
  - hed
  - trl
  - copyr
  - js

  Used variables:
  - lang (x1)
  - body_prop (x1)
  - sp (x1)
  - mid (x9)
  - e.izz (x1)
  - e.pzz (x1)
  - e.tzz (x1)
  - e.xx (x2)
  - e.i0 (x1)
  - e.p0 (x1)
  - pvar.zz.has_birth_date (x1)
  - pvar.zz.slash_birth_date (x1)
  - pvar.zz.has_baptism_date (x1)
  - pvar.zz.slash_baptism_date (x1)
  - pvar.zz.has_death_date (x1)
  - pvar.zz.slash_death_date (x1)
  - pvar.zz.has_burial_date (x1)
  - pvar.zz.slash_burial_date (x1)
  - pvar.zz.has_cremation_date (x1)
  - pvar.zz.slash_cremation_date (x1)
  - pvar.zz.occ (x1)
  - pvar.zz.first_name (x1)
  - pvar.zz.surname (x1)
  - tmp (x1)
  - zz (x1)
  - action (x1)
  - hidden (x1)
  - cancel_links (x1)
  - query_time (x1)
#}
<!DOCTYPE html>
<html lang="{{ lang }}">
    <head>
        <title>{{ _("modify::tree") |capitalize }}</title>
        <meta name="robots" content="none" />
        <meta charset="UTF-8">
        <meta name="viewport"
              content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="shortcut icon"
              href="{{ url_for('static', path='images/favicon_gwd.png') }}">
        <link rel="apple-touch-icon"
              href="{{ url_for('static', path='images/favicon_gwd.png') }}">
        {% include 'css.html.j2' %}
    </head>
    <body {{ body_prop }}>
        {% include 'hed.html.j2' %}
        {% with %}
            {% set mid = sp"class="align-middle"" %}
            {% macro one_pvar_line(znz, zocz, zfnz, zsnz, zbdz, ztz, zparamz) %}
                <trzparamz>
                <td>
                    <i class="fa fa-plus row_add_before"></i>
                    <i class="fa fa-minus row_del"></i>
                </td>
                <td>
                    <i class="fa fa-up-long row_move_up"></i>
                    <i class="fa fa-down-long row_move_down"></i>
                </td>
                <td {{ mid }}>
                    <input name="oc" class="form-control reset_bd_text" size="5" value="zocz">
                </td>
                <td {{ mid }}>
                    <input name="p" class="form-control reset_bd_text" size="30" value="zfnz">
                </td>
                <td {{ mid }}>
                    <input name="n" class="form-control reset_bd_text" size="30" value="zsnz">
                </td>
                <td class="bd_text align-middle">zbdz</td>
                <td {{ mid }}>
                    <input name="t" class="form-control" size="30" value="ztz">
                </td>
            </tr>
        {% endmacro %}
        {% macro one_pvar(zz) %}
            {% if ( ( e.izz != "" ) or ( e.pzz != "" ) ) %}
                {% with %}
                    {% set tmp = ("° "pvar.zz.slash_birth_date) if (pvar.zz.has_birth_date) else ((pvar.zz.slash_baptism_date) if (pvar.zz.has_baptism_date))"<br>
                                        "("† "pvar.zz.slash_death_date) if (pvar.zz.has_death_date) else ((pvar.zz.slash_burial_date) if (pvar.zz.has_burial_date) else ((pvar.zz.slash_cremation_date) if (pvar.zz.has_cremation_date))) %}{{ one_pvar_line("zz", pvar.zz.occ, pvar.zz.first_name, pvar.zz.surname, tmp, e.tzz, "") }}{{ one_pvar(( zz + 1) ) }}
                {% endwith %}
            {% endif %}
        {% endmacro %}
        {% macro my_hidden(xx) %}
            {% if ( e.xx != "" ) %}<input type="hidden" name="xx" value="{{ e.xx }}">{% endif %}
        {% endmacro %}
        <div class="container-fluid">
            <form id="upd" method="post" action="{{ action }}">
                <div class="d-flex justify-content-end m-2">
                    <div class="h2">{{ _("add/clear/show/edit the graph", variant='3') |capitalize }}</div>
                    <input type="submit" class="btn btn-primary ml-auto" value="OK">
                </div>
                {{ hidden }}
                <input type="hidden" name="m" value='RLM'>
                {{ my_hidden("spouse") }}{{ my_hidden("image") }}{{ my_hidden("bd") }}{{ my_hidden("new") }}
                <table class="table table-hover table-sm">
                    <thead>
                        <tr>
                            <td></td>
                            <td></td>
                            <td {{ mid }}>#
                            </td>
                            <td {{ mid }}>{{ _("first name/first names", variant='0') |capitalize }}
                            </td>
                            <td {{ mid }}>{{ _("surname/surnames", variant='0') |capitalize }}
                            </td>
                            <td {{ mid }}>{{ _("birth") |capitalize }}
                                <br>
                                {{ _("death") |capitalize }}
                            </td>
                            <td {{ mid }}>{{ _("text") |capitalize }}
                            </td>
                        </tr>
                    </thead>
                    <tbody>
                        {{ one_pvar_line('', '', '', '', '', '', " id='template_line' style='display:none;'") }}
                        {% if ( ( e.i0 != "" ) and ( e.p0 != "" ) ) %}
                            {{ one_pvar(0) }}
                        {% else %}
                            {{ one_pvar(1) }}
                        {% endif %}
                        <tr class="last_row">
                            <td colspan="7">
                                <i class="fa fa-plus row_add_before w-100"></i>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </form>
            {% if ( not cancel_links ) %}
                {% include 'trl.html.j2' %}
                {% include 'copyr.html.j2' %}
            {% endif %}
        </div>
        {% include 'js.html.j2' %}
        {{ query_time }}<script>
    $(document).on("click", ".row_add_before", function() {
        $(this).closest("tr").before($("#template_line").clone().removeAttr("id").removeAttr("style").get(0));
    });
    $(document).on("click", ".row_del", function() {
        $(this).closest('tr').remove();
    });
    $(document).on("click", ".row_move_up", function() {
        var row = $(this).closest("tr");
        if (row.index() > 1) { // The first row is a template
            row.insertBefore(row.prev());
        }
    });
    $(document).on("click", ".row_move_down", function() {
        var row = $(this).closest("tr");
        var row_next = row.next();
        if (0 != row_next.length && !row_next.hasClass("last_row")) {
            row.insertAfter(row_next);
        }
    });
    $(document).on("change", ".reset_bd_text", function() {
        $(this).closest("tr").children(".bd_text").html("");
    });
    $("#upd").submit(function() {
        event.preventDefault();
        $(this).find("tr").each(function(index) {
            if ($(this).attr("id") == "template_line") {
                $(this).find("input{{ _("
                    name = oc ") }}").prop("disabled", true);
                $(this).find("input{{ _("
                    name = p ") }}").prop("disabled", true);
                $(this).find("input{{ _("
                    name = n ") }}").prop("disabled", true);
                $(this).find("input{{ _("
                    name = t ") }}").prop("disabled", true);
            } else {
                $(this).find("input{{ _("
                    name = oc ") }}").attr("name", "oc" + (index - 1));
                $(this).find("input{{ _("
                    name = p ") }}").attr("name", "p" + (index - 1));
                $(this).find("input{{ _("
                    name = n ") }}").attr("name", "n" + (index - 1));
                $(this).find("input{{ _("
                    name = t ") }}").attr("name", "t" + (index - 1));
            }
        });
        $(this).unbind('submit').submit();
    });
</script>
    </body>
</html>
{% endwith %}

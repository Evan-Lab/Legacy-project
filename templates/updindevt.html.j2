{# 
  Generated by JinjaGenerator for template 'updindevt'
    at 2025-10-26T20:25:08.999928

  Used macros:
  - one_pevent(xcnt)
  - print_event()

  Used includes:
  - css
  - hed
  - home
  - trl
  - copyr
  - js

  Used variables:
  - lang (x1)
  - body_prop (x1)
  - event_str (x1)
  - action (x1)
  - hidden (x1)
  - index (x1)
  - query_time (x1)
#}
<!DOCTYPE html>
<html lang="{{ lang }}">
    <head>
        <!-- $Id: updindevt.txt v7.1 15/10/2023 19:54:09 $ -->
        <title>{{ _("modify::person/persons", variant='0') |capitalize }}</title>
        <meta name="robots" content="none">
        <meta charset="UTF-8">
        <meta name="viewport"
              content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="shortcut icon"
              href="{{ url_for('static', path='images/favicon_gwd.png') }}">
        {% include 'css.html.j2' %}
    </head>
    <body {{ body_prop }}>
        {% include 'hed.html.j2' %}
        <div class="container">
            {% include 'home.html.j2' %}
            <h1>{{ _("changed order of person's events") |capitalize }}</h1>
            {% macro one_pevent(xcnt) %}
                <li class="list-group-item d-flex align-items-center">
                    <input type="hidden" name="e_idxcnt" value="xcnt">
                    <input type="hidden"
                           class="pos"
                           name="e_posxcnt"
                           size="2"
                           maxlength="2"
                           value="xcnt">
                    <button type="button"
                            class="btn btn-primary up mr-2"
                            title="{{ _("move up/down", variant='0') |capitalize }}">
                        <i class="fa-solid fa-up-long"></i>
                    </button>
                    <button type="button"
                            class="btn btn-primary down mr-2"
                            title="{{ _("move up/down", variant='1') |capitalize }}">
                        <i class="fa-solid fa-down-long"></i>
                    </button>
                    {{ event_str }}
                </li>
            {% endmacro %}
            {% macro print_event() %}
                <form method="POST" action="{{ action }}">
                    {{ hidden }}
                    <input type="hidden" name="i" value="{{ index }}">
                    <input type="hidden" name="m" value="CHG_EVT_IND_ORD_OK">
                    <ul id="sort_list" class="list-group">
                        {# foreach not implemented yet #}
                    </ul>
                    <input type="submit" class="btn btn-primary ml-4 mt-2" value="Ok">
                </form>
            {% endmacro %}
            {{ print_event() }}
            {% include 'trl.html.j2' %}
            {% include 'copyr.html.j2' %}
        </div>
        {% include 'js.html.j2' %}
        {{ query_time }}<script>
    $('.up').click(function() {
        var $li = $(this).parent();
        $li.find('.pos').val(function(i, old) {
            return --old
        });
        $li.prev().find('.pos').val(function(i, old) {
            return ++old
        });
        if ($li.is(':first-child'))
            $('#sort_list').append($li);
        else
            $li.insertBefore($li.prev());
        if ($li.is(':first-child')) {
            $li.find('.up').css('visibility', 'hidden');
            $li.next().find('.up').css('visibility', 'visible');
        }
        if ($li.next().is(':last-child')) {
            $li.next().find('.down').css('visibility', 'hidden');
            $li.find('.down').css('visibility', 'visible');
        }
    });
    $('.down').click(function() {
        var $li = $(this).parent();
        $li.find('.pos').val(function(i, old) {
            return ++old
        });
        $li.next().find('.pos').val(function(i, old) {
            return --old
        });
        if ($li.is(':last-child'))
            $('#sort_list').prepend($li);
        else
            $li.insertAfter($li.next());
        if ($li.is(':last-child')) {
            $li.find('.down').css('visibility', 'hidden');
            $li.prev().find('.down').css('visibility', 'visible');
        }
        if ($li.prev().is(':first-child')) {
            $li.prev().find('.up').css('visibility', 'hidden');
            $li.find('.up').css('visibility', 'visible');
        }
    });
    $(document).ready(function() {
        $(".up").each(function() {
            var $li = $(this).parent();
            if ($li.is(':first-child'))
                $(this).css('visibility', 'hidden');
        });
        $(".down").each(function() {
            var $li = $(this).parent();
            if ($li.is(':last-child'))
                $(this).css('visibility', 'hidden');
        });
    });
</script>
    </body>
</html>

{# 
  Generated by JinjaGenerator for template 'miss_evt'
    at 2025-10-29T22:35:04.639054

  Used macros:
  - has_missing_birth_date(xx)
  - has_missing_birth_place(xx)
  - has_missing_death_date(xx)
  - has_missing_death_place(xx)
  - has_missing_marriage_date()
  - has_missing_marriage_place()
  - has_missing_events(xx)
  - display_edit_ind_btn(label)
  - display_edit_fam_btn()
  - td_missing_events_rowspan(xx)
  - td_missing_events(xx)
  - td_family_missing_class(xx)
  - table_missing_events(xx)
  - table_family_missing_events(xx)

  Used includes:
  None

  Used variables:
  - xx.has_birth_date (x5)
  - xx.has_baptism_date (x5)
  - xx.birth_date.prec (x1)
  - xx.birth_date.day (x1)
  - xx.baptism_date.prec (x1)
  - xx.baptism_date.day (x1)
  - xx.has_birth_place (x3)
  - xx.has_baptism_place (x3)
  - xx.is_dead (x3)
  - xx.has_death_date (x5)
  - xx.has_burial_date (x5)
  - xx.death_date.prec (x1)
  - xx.death_date.day (x1)
  - xx.burial_date.prec (x1)
  - xx.burial_date.day (x1)
  - xx.has_death_place (x3)
  - xx.has_burial_place (x3)
  - xx.has_families (x6)
  - xx.same (x5)
  - xx.nb_families (x2)
  - xx.anc_sosa (x1)
  - xx.index (x2)
  - xx.same.hexa (x1)
  - xx.same.octal (x1)
  - xx.slash_birth_date (x1)
  - xx.slash_baptism_date (x1)
  - xx.birth_place (x2)
  - xx.baptism_place (x2)
  - xx.slash_death_date (x1)
  - xx.slash_burial_date (x1)
  - xx.death_place (x2)
  - xx.burial_place (x2)
  - e.date (x3)
  - e.marr (x5)
  - e.repeat (x1)
  - e.sosab (x2)
  - e.v (x1)
  - e.only (x2)
  - incr_count (x13)
  - on_marriage_date (x1)
  - marriage_date.prec (x1)
  - marriage_date.day (x1)
  - marriage_place (x1)
  - reset_count (x5)
  - count (x16)
  - wizard (x2)
  - cancel_links (x2)
  - ancestor.index (x2)
  - ancestor.has_families (x1)
  - family.index (x1)
  - is_first (x4)
  - level (x4)
  - lazy_force (x1)
  - mid (x9)
  - sp (x1)
  - max_anc_level (x1)
  - nb_gena (x2)
  - only_v (x1)
#}

{% with %}
    {% set mid = "class=\"align-middle\"" %}
    {% macro has_missing_birth_date(xx) %}
        {% if xx.has_birth_date or xx.has_baptism_date %}
            {% if e.date == "on" %}
                {% if xx.has_birth_date and xx.birth_date.prec == "" and xx.birth_date.day != "" %}
                {% else %}
                    {% if xx.has_baptism_date and xx.baptism_date.prec == "" and xx.baptism_date.day != "" %}
                    {% else %}
                        {{ incr_count }}
                    {% endif %}
                {% endif %}
            {% endif %}
        {% else %}
            {{ incr_count }}
        {% endif %}
    {% endmacro %}
    {% macro has_missing_birth_place(xx) %}
        {% if xx.has_birth_date %}
            {% if not xx.has_birth_place %}{{ incr_count }}{% endif %}
        {% else %}
            {% if xx.has_baptism_date %}
                {% if not xx.has_baptism_place %}{{ incr_count }}{% endif %}
            {% else %}
                {% if not xx.has_birth_place or xx.has_baptism_place %}{{ incr_count }}{% endif %}
            {% endif %}
        {% endif %}
    {% endmacro %}
    {% macro has_missing_death_date(xx) %}
        {% if xx.is_dead %}
            {% if xx.has_death_date or xx.has_burial_date %}
                {% if e.date == "on" %}
                    {% if xx.has_death_date and xx.death_date.prec == "" and xx.death_date.day != "" %}
                    {% else %}
                        {% if xx.has_burial_date and xx.burial_date.prec == "" and xx.burial_date.day != "" %}
                        {% else %}
                            {{ incr_count }}
                        {% endif %}
                    {% endif %}
                {% endif %}
            {% else %}
                {{ incr_count }}
            {% endif %}
        {% endif %}
    {% endmacro %}
    {% macro has_missing_death_place(xx) %}
        {% if xx.is_dead %}
            {% if xx.has_death_date %}
                {% if not xx.has_death_place %}{{ incr_count }}{% endif %}
            {% else %}
                {% if xx.has_burial_date %}
                    {% if not xx.has_burial_place %}{{ incr_count }}{% endif %}
                {% else %}
                    {% if not xx.has_death_place or xx.has_burial_place %}{{ incr_count }}{% endif %}
                {% endif %}
            {% endif %}
        {% endif %}
    {% endmacro %}
    {% macro has_missing_marriage_date() %}
        {% if on_marriage_date == "" %}
            {{ incr_count }}
        {% else %}
            {% if e.date == "on" and marriage_date.prec != "" or marriage_date.day == "" %}{{ incr_count }}{% endif %}
        {% endif %}
    {% endmacro %}
    {% macro has_missing_marriage_place() %}
        {% if marriage_place == "" %}{{ incr_count }}{% endif %}
    {% endmacro %}
    {% macro has_missing_events(xx) %}
        {{ reset_count }}{{ has_missing_birth_date("xx") }}
        {% if count == 0 %}{{ has_missing_birth_place("xx") }}{% endif %}
        {% if count == 0 %}{{ has_missing_death_date("xx") }}{% endif %}
        {% if count == 0 %}{{ has_missing_death_place("xx") }}{% endif %}
        {% if count == 0 %}
            {% if xx.has_families %}{# foreach not implemented yet #}{% endif %}
        {% endif %}
    {% endmacro %}
    {% macro display_edit_ind_btn(label) %}
        {% if wizard and not cancel_links %}
            <div>
                <a href="/m=MOD_IND&i={{ ancestor.index }}#label"
                   title="{{ _('modify::person/persons', variant='0') }}">
                    <i class="fa fa-wrench fa-lg"></i>
                </a>
            </div>
        {% endif %}
    {% endmacro %}
    {% macro display_edit_fam_btn() %}
        {% if wizard and not cancel_links %}
            <div>
                <a href="/m=MOD_FAM&i={{ family.index }}&ip={{ ancestor.index }}#marr"
                   title="{{ _('modify::family/families', variant='0') }}">
                    <i class="fa fa-wrench fa-lg"></i>
                </a>
            </div>
        {% endif %}
    {% endmacro %}
    {% macro td_missing_events_rowspan(xx) %}
        {% if xx.same == "" and e.marr == "on" or is_first and level == 1 and xx.nb_families > 1 %}
            rowspan="{{ xx.nb_families }}"
        {% endif %}
    {% endmacro %}
    {% macro td_missing_events(xx) %}
        {{ td_missing_events_rowspan("xx") }} class="
        {% if count > 0 %}table-warning{% endif %}
    {% endmacro %}
    {% macro td_family_missing_class(xx) %}
        class="align-middle
        {% if count > 0 %}table-warning{% endif %}
        "
    {% endmacro %}
    {% macro table_missing_events(xx) %}
        {{ lazy_force }}<td {{ td_missing_events_rowspan("xx") }} {{ mid }}>{{ xx.anc_sosa }}
    </td>
    <td {% if xx.same != "" %}colspan="8"{% else %}{{ td_missing_events_rowspan("xx") }}{% endif %}
        class="text-left align-middle"
        id="{{ xx.index }}">
        {{ image_MF("xx") }}{{ short_display_person("xx") }}
        {% if xx.same != "" and e.repeat == "on" %}
            {{ sp }}->
            {{ _("same ancestor as nÂ° Sosa") }}
            <a href="#{{ xx.index }}">
                {% if e.sosab == 16 %}
                    {{ xx.same.hexa }}
                {% else %}
                    {% if e.sosab == 8 %}
                        {{ xx.same.octal }}
                    {% else %}
                        {{ xx.same }}
                    {% endif %}
                {% endif %}
            </a>
        {% endif %}
    </td>
    {% if xx.same == "" %}
        {{ reset_count }}{{ has_missing_birth_date("xx") }}<td {{ td_missing_events("xx") }} align-middle">
        {% if xx.has_birth_date %}
            {{ xx.slash_birth_date }}
            {% if count > 0 %}{{ display_edit_ind_btn("birth") }}{% endif %}
        {% else %}
            {% if xx.has_baptism_date %}
                {{ xx.slash_baptism_date }}
                {% if count > 0 %}{{ display_edit_ind_btn("birth") }}{% endif %}
            {% else %}
                {{ display_edit_ind_btn("birth") }}
            {% endif %}
        {% endif %}
    </td> {{ reset_count }}{{ has_missing_birth_place("xx") }}<td {{ td_missing_events("xx") }} align-middle">
    {% if xx.has_birth_date %}
        {{ xx.birth_place }}
        {% if count > 0 %}{{ display_edit_ind_btn("birth") }}{% endif %}
    {% else %}
        {% if xx.has_baptism_date %}
            {{ xx.baptism_place }}
            {% if count > 0 %}{{ display_edit_ind_btn("birth") }}{% endif %}
        {% else %}
            {% if xx.has_birth_place %}
                {{ xx.birth_place }}
            {% else %}
                {% if xx.has_baptism_place %}
                    {{ xx.baptism_place }}
                {% else %}
                    {{ display_edit_ind_btn("birth") }}
                {% endif %}
            {% endif %}
        {% endif %}
    {% endif %}
</td>
{% if e.marr == "on" or is_first and level == 0 %}
    {% if xx.has_families %}
        {# foreach not implemented yet #}
    {% else %}
        <td></td>
    {% endif %}
{% else %}
    <td class="text-left align-middle">
        {% if xx.has_families %}{{ image_MF("xx.spouse") }}{{ short_display_person("xx.spouse") }}{% endif %}
    </td>
{% endif %}
{% if e.marr == "on" or is_first and level == 0 %}
    {% if xx.has_families %}
        {# foreach not implemented yet #}
    {% else %}
        <td></td>
    {% endif %}
{% else %}
    {% if xx.has_families %}
        {# foreach not implemented yet #}
    {% else %}
        <td></td>
    {% endif %}
{% endif %}
{% if e.marr == "on" or is_first and level == 0 %}
    {% if xx.has_families %}
        {# foreach not implemented yet #}
    {% else %}
        <td></td>
    {% endif %}
{% else %}
    {% if ancestor.has_families %}
        {# foreach not implemented yet #}
    {% else %}
        <td></td>
    {% endif %}
{% endif %}
{{ reset_count }}{{ has_missing_death_date("xx") }}<td {{ td_missing_events("xx") }} align-middle">
{% if xx.has_death_date %}
    {{ xx.slash_death_date }}
    {% if count > 0 %}{{ display_edit_ind_btn("death") }}{% endif %}
{% else %}
    {% if xx.has_burial_date %}
        {{ xx.slash_burial_date }}
        {% if count > 0 %}{{ display_edit_ind_btn("death") }}{% endif %}
    {% else %}
        {% if xx.is_dead %}{{ display_edit_ind_btn("death") }}{% endif %}
    {% endif %}
{% endif %}
</td> {{ reset_count }}{{ has_missing_death_place("xx") }}<td {{ td_missing_events("xx") }} align-middle">
{% if xx.has_death_date %}
    {{ xx.death_place }}
    {% if count > 0 %}{{ display_edit_ind_btn("death") }}{% endif %}
{% else %}
    {% if xx.has_burial_date %}
        {{ xx.burial_place }}
        {% if count > 0 %}{{ display_edit_ind_btn("death") }}{% endif %}
    {% else %}
        {% if xx.has_death_place %}
            {{ xx.death_place }}
        {% else %}
            {% if xx.has_burial_place %}{{ xx.burial_place }}{% endif %}
        {% endif %}
        {% if count > 0 %}{{ display_edit_ind_btn("death") }}{% endif %}
    {% endif %}
{% endif %}
</td>
{% endif %}
{% endmacro %}
{% macro td_family_missing_class(xx) %}
    class="text-center align-middle
    {% if count > 0 %}table-warning{% endif %}
    "
{% endmacro %}
{% macro table_family_missing_events(xx) %}
    {# foreach not implemented yet #}
{% endmacro %}
{% with %}
    {% set nb_gena = min(e.v, max_anc_level) %}
    {% with %}
        {% set only_v = (nb_gena) if (e.only == "on") else ("0") %}
        <div class="ml-2">
            {% if e.only == "on" %}
                {{ _("only") }} {{ gena(only_v + 1) }}
            {% else %}
                {{ togena(nb_gena) }}
            {% endif %}
            .
        </div>
        <table class="table table-bordered table-sm asc-desc-table w-auto m-2 text-center">
            <thead {{ mid }}>
                <tr>
                    <th {{ mid }}>{{ _("Sosa") |capitalize }}
                    </th>
                    <th class="text-left align-middle pl-2">{{ _('person/persons', variant='0') |capitalize }}</th>
                    <th {{ mid }}>{{ _("date of birth") |capitalize }}
                    </th>
                    <th {{ mid }}>{{ _("where born") |capitalize }}
                    </th>
                    <th class="text-left align-middle pl-2">
                        {% if e.marr == "on" %}
                            {{ _('spouse/spouses', variant='1') |capitalize }}
                        {% else %}
                            {{ _('spouse/spouses', variant='0') |capitalize }}
                        {% endif %}
                    </th>
                    <th {{ mid }}>{{ _("date of marriage") |capitalize }}
                    </th>
                    <th {{ mid }}>{{ _("where married") |capitalize }}
                    </th>
                    <th {{ mid }}>{{ _("date of death") |capitalize }}
                    </th>
                    <th {{ mid }}>{{ _("where dead") |capitalize }}
                    </th>
                </tr>
            </thead>
            <tbody>
                {# foreach not implemented yet #}
                <tbody>
                </table>
            {% endwith %}
        {% endwith %}
    {% endwith %}

{# 
  Generated by JinjaGenerator for template 'cousmenu'
    at 2025-10-26T20:24:37.374349

  Used macros:
  - picklvl(vvv)
  - cousin_lex_tt(vvv, www)
  - cousin_lex(vvv, www)
  - pindex(iii, xxx)
  - cous_paths_cnt(vvv, www)
  - cousins_cnt(vvv, www)
  - cous_paths_min_date(vvv, www)
  - cous_paths_max_date(vvv, www)
  - cous_mod(vvv, www)
  - link_cousin(vvv, www)
  - table()

  Used includes:
  - favicon
  - css
  - hed
  - perso_utils
  - menubar
  - trl
  - copyr
  - js

  Used variables:
  - lang (x1)
  - sp (x9)
  - public_name (x4)
  - first_name (x2)
  - qualifier (x4)
  - surname (x2)
  - body_prop (x1)
  - message_to_wizard (x1)
  - e.v (x3)
  - cousins.max_a (x2)
  - cousins.max_d (x2)
  - e_v (x11)
  - has_children (x4)
  - bvar.max_anc_level (x3)
  - static_max_anc_level (x1)
  - max_anc_level (x1)
  - max (x9)
  - vvv (x21)
  - url_set.v.vvv (x1)
  - max_desc_level (x1)
  - min (x1)
  - maxp (x1)
  - i (x24)
  - p_of_index.iii.xxx (x1)
  - cous_paths_cnt.vvv.www (x3)
  - cousins_cnt.vvv.www (x9)
  - cous_paths_min_date.vvv.www (x2)
  - cous_paths_max_date.vvv.www (x2)
  - empty_sorted_list (x2)
  - empty_sorted_listb (x2)
  - empty_sorted_listc (x1)
  - reset_count3 (x1)
  - reset_count (x4)
  - reset_count2 (x1)
  - count (x10)
  - listb_size (x2)
  - www (x19)
  - count2 (x2)
  - count3 (x2)
  - extrapaths (x2)
  - min_date_vvv_www (x3)
  - max_date_vvv_www (x2)
  - span (x2)
  - cousdown (x1)
  - access (x1)
  - percent_vvv_www (x8)
  - k (x13)
  - maxa (x8)
  - maxd (x1)
  - j (x3)
  - tot (x1)
  - mx (x1)
  - tot_next (x3)
  - z (x2)
  - dates (x1)
  - has_parents (x2)
  - tt (x2)
  - incr_count (x2)
  - listc_size (x1)
  - query_time (x1)
#}
<!-- $Id: cousmenu.txt v7.1 22/05/2024 04:29:29 $ -->
<!DOCTYPE html>
<html lang="{{ lang }}">
    <head>
        <title>{{ _("relationship link between") |capitalize }}{{ sp }}
            {% if ( public_name != "" ) %}
                {{ public_name }}
            {% else %}
                {{ first_name }}
            {% endif %}
            {% if ( qualifier != "" ) %}{{ qualifier }}{% endif %}
        {{ sp }}{{ surname }}</title>
        <meta name="robots" content="none">
        <meta charset="UTF-8">
        <meta name="viewport"
              content="width=device-width, initial-scale=1, shrink-to-fit=no">
        {% include 'favicon.html.j2' %}
        {% include 'css.html.j2' %}
    </head>
    <body {{ body_prop }}>
        {% include 'hed.html.j2' %}
        {{ message_to_wizard }}
        {% with %}
            {% set e_v = ((( cousins.max_a - 1 )) if (( e.v > cousins.max_a )) else (e.v)) if (( e.v != "" )) else ("5") %}
            <div class="container{% if ( e_v > 6 ) %}-fluid{% endif %}">
                <div class="d-flex flex-column justify-content-center">
                    {% include 'perso_utils.html.j2' %}
                    {% include 'menubar.html.j2' %}
                    {% with %}
                        {% set min = ("1") if (( not has_children )) else ("0") %}
                        {% with %}
                            {% set max = (bvar.max_anc_level) if (( ( bvar.max_anc_level != "" ) and ( bvar.max_anc_level < static_max_anc_level ) )) else (max_anc_level) %}
                            {% with %}
                                {% set maxp = ( max + 1 ) %}
                                {% macro picklvl(vvv) %}
                                    <a role="button"
                                       class="btn btn-sm btn-light{% if ( ( vvv == e_v ) or ( ( e_v > max ) and ( vvv == max ) ) ) %} disabled font-weight-bold text-white bg-dark{% endif %} p-1{% if ( vvv < 10 ) %} px-2{% endif %}"
                                       href="{{ url_set.v.vvv }}"
                                       {{ sp }}
                                       aria-label="select ascending generation level vvv to display ancestors up to that degree."
                                       {{ sp }}
                                       title="{{ _("ascending/descending (degree)", variant='0') |capitalize }} vvv{% if ( vvv == 0 ) %} ({{ _("ascending/descending (degree)", variant='1') }} {{ _("up to") }} {{ max_desc_level }}){% endif %}">vvv</a>
                                {% endmacro %}
                                {% if ( ( max != 0 ) and ( not ( ( max == 1 ) and ( not has_children ) ) ) ) %}
                                    <div class="d-flex flex-wrap align-self-center btn-toolbar py-0 mx-3 mt-1"
                                         role="toolbar"
                                         aria-label="buttons to select maximum ascending level v">
                                        <span>
                                            {% for i in min..maxp %}
                                                {% if ( i == 13 ) %}<span class="high-lev d-none">{% endif %}
                                                    {{ picklvl(i) }}
                                                    {% if ( ( i == max ) and ( max > 12 ) ) %}</span>{% endif %}
                                            {% endfor %}
                                            {% if ( max > 12 ) %}
                                                <span class="toggle-lev ml-1"
                                                      data-caution=". {{ _("high generation caution") |capitalize }}">
                                                    <button type="button"
                                                            class="btn btn-sm btn-danger py-1 m-0"
                                                            title="{{ _("visualize/show/hide/summary", variant='1') |capitalize }} {{ _("high generation levels") }} ({{ _("up to") }} {{ max }}).&#010;{{ _("high generation caution") |capitalize }}">
                                                        <i class="fa fa-plus"></i>
                                                    </button>
                                                    <button type="button"
                                                            class="btn btn-sm btn-light btn-rounded py-1 m-0 d-none"
                                                            title="{{ _("visualize/show/hide/summary", variant='2') |capitalize }} {{ _("high generation levels") }}">
                                                        <i class="fa fa-minus"></i>
                                                    </button>
                                                </span>
                                            {% endif %}
                                        </span>
                                    </div>
                                {% endif %}
                                {% macro cousin_lex_tt(vvv, www) %}
                                    {% if ( _("cousins.vvv.www tt") != "[cousins.vvv.www tt]" ) %}{{ _("cousins.vvv.www tt", variant='1') }}{% endif %}
                                {% endmacro %}
                                {% macro cousin_lex(vvv, www) %}
                                    {{ _("cousins.vvv.www", variant='1') }}
                                {% endmacro %}
                                {% macro pindex(iii, xxx) %}
                                    {{ p_of_index.iii.xxx }}
                                {% endmacro %}
                                {% macro cous_paths_cnt(vvv, www) %}
                                    {{ cous_paths_cnt.vvv.www }}
                                {% endmacro %}
                                {% macro cousins_cnt(vvv, www) %}
                                    {{ cousins_cnt.vvv.www }}
                                {% endmacro %}
                                {% macro cous_paths_min_date(vvv, www) %}
                                    {{ cous_paths_min_date.vvv.www }}
                                {% endmacro %}
                                {% macro cous_paths_max_date(vvv, www) %}
                                    {{ cous_paths_max_date.vvv.www }}
                                {% endmacro %}
                                {{ empty_sorted_list }}{{ empty_sorted_listb }}{{ empty_sorted_listc }}{{ reset_count3 }}
                                {% macro cous_mod(vvv, www) %}
                                    {{ empty_sorted_list }}{{ empty_sorted_listb }}
                                    {% with %}
                                        {% set min_date_vvv_www = cous_paths_min_date.vvv.www %}
                                        {% with %}
                                            {% set max_date_vvv_www = cous_paths_max_date.vvv.www %}{# foreach not implemented yet #}{{ reset_count }}{{ reset_count2 }}{# foreach not implemented yet #}
                                            <div class="modal fade px-4 overflow-y-scroll"
                                                 id="modal_vvv_www"
                                                 tabindex="-1"
                                                 aria-hidden="true">
                                                <div class="modal-dialog modal-xl w-100" style="max-width:1500px;">
                                                    <div class="modal-content bg-transparent border-0">
                                                        <div class="position-relative p-2 pb-1 rounded-lg bg-{% if ( count != 0 ) %}white{% else %}linen{% endif %}">
                                                            {% with %}
                                                                {% set extrapaths = ( cous_paths_cnt.vvv.www - listb_size ) %}
                                                                <div class="modal-title bg-transparent">
                                                                    <div class="d-flex justify-content-around align-items-center">
                                                                        <div class="d-inline-flex flex-column justify-content-around align-self-center text-left ml-4{% if ( www == 0 ) %} mr-5{% endif %}">
                                                                            <div>
                                                                                {{ listb_size }} 
                                                                                {% if ( cousins_cnt.vvv.www == 1 ) %}
                                                                                    {{ _("person/persons", variant='0') }}
                                                                                {% else %}
                                                                                    {{ _("person/persons", variant='1') }}
                                                                                {% endif %}
                                                                                {% if ( ( count != 0 ) and ( count != cousins_cnt.vvv.www ) ) %}
                                                                                    <div>
                                                                                        {% if ( ( 2 * count ) <= cousins_cnt.vvv.www ) %}
                                                                                            {{ count }} {{ _("alive", variant='3') }}
                                                                                        {% else %}
                                                                                            {{ cousins_cnt.vvv.www - count }} {{ _("died", variant='3') }} <span style="background-color: rgba(245,231,216,.7);"></span>
                                                                                        {% endif %}
                                                                                    </div>
                                                                                {% endif %}
                                                                            </div>
                                                                            {% if ( count2 > 0 ) %}<div>{{ count2 }} {{ _("no descendants") }} ║</div>{% endif %}
                                                                            {% if ( count3 > 0 ) %}<div>{{ count3 }} {{ _("unknown spouse") }} ? ?</div>{% endif %}
                                                                        </div>
                                                                        <div class="d-flex flex-column mx-auto text-center align-items-center">
                                                                            <a role="button"
                                                                               class="h2 display-4 stretched-link ml-2 modal-title-font-size"
                                                                               data-toggle="tooltip"
                                                                               data-html="true"
                                                                               href="/m=RLM{# foreach not implemented yet #}{% if ( ( vvv + www ) != 0 ) %}&t1={{ uri_encode(clean_html_tags(_("cousins.vvv.www") )) }}{% endif %}"
                                                                               title="Graphe RLM c(vvv,www)">
                                                                                {% if ( ( vvv + www ) == 0 ) %}
                                                                                    {{ _("him/her", variant='s') }}
                                                                                {% else %}
                                                                                    {% if ( cousins_cnt.vvv.www == 1 ) %}
                                                                                        {{ _("cousins.vvv.www", variant='0') }}
                                                                                    {% else %}
                                                                                        {{ _("cousins.vvv.www", variant='1') }}
                                                                                    {% endif %}
                                                                                {% endif %}
                                                                            </a><small class="text-muted">
                                                                            {% if ( extrapaths != 0 ) %}(+ {{ extrapaths }}){% endif %}
                                                                        </small>
                                                                        {% with %}
                                                                            {% set span = min_date_vvv_www"-"max_date_vvv_www %}<span class="h4">
                                                                            {% if ( not ( 10000 in span ) ) %}
                                                                                {% if ( min_date_vvv_www == max_date_vvv_www ) %}
                                                                                    {{ min_date_vvv_www }}
                                                                                {% else %}
                                                                                    {{ span }}
                                                                                {% endif %}
                                                                            {% endif %}
                                                                        </span>
                                                                    </div>
                                                                    {% with %}
                                                                        {% set cousdown = cousins_cnt("vvv", ( www + 1 )) %}
                                                                        <div class="d-flex justify-content-end align-items-end ml-2 z-index1">
                                                                            <div class="d-inline-flex align-self-center">
                                                                                <div class="d-inline-flex align-items-end mr-1">
                                                                                    {% if ( ( vvv > 0 ) and ( www == 0 ) ) %}
                                                                                        <button type="button"
                                                                                                class="btn btn-sm py-0 mb-2 btn-light"
                                                                                                data-dismiss="modal"
                                                                                                data-toggle="modal"
                                                                                                data-target="#modal_{{ vvv - 1 }}_www">
                                                                                            <i class="fa-solid fa-arrow-down-long fa-fw fa-rotate-by"
                                                                                               style="--fa-rotate-angle: 45deg"
                                                                                               title="{{ vvv - 1 }}/0 ancestors at g-1"
                                                                                               data-toggle="tooltip"></i>
                                                                                        </button>
                                                                                    {% endif %}
                                                                                </div>
                                                                                <div class="d-inline-flex flex-column mr-2">
                                                                                    <div>
                                                                                        <button type="button"
                                                                                                class="btn btn-sm py-0 mt-2 btn-light{% if ( ( vvv == e_v ) and ( www == 0 ) ) %} disabled{% endif %}"
                                                                                                data-dismiss="modal"
                                                                                                data-toggle="modal"
                                                                                                data-target="#modal_{% if ( www == 0 ) %}{{ vvv + 1 }}_0{% else %}vvv_{{ www - 1 }}{% endif %}">
                                                                                            <span title="{% if ( www == 0 ) %}{{ vvv + 1 }}/0{% else %}vvv/{{ www - 1 }}{% endif %}"
                                                                                                  data-toggle="tooltip"
                                                                                                  data-html="true"><i class="fa-solid fa-arrow-up-{% if ( www == 0 ) %}right-dots{% else %}long{% endif %} fa-fw"></i>vvv</span>
                                                                                        </button>
                                                                                    </div>
                                                                                    <div>
                                                                                        <button type="button"
                                                                                                class="btn btn-sm py-0 mt-1 btn-light{% if ( cousdown == 0 ) %} disabled{% endif %}"
                                                                                                data-dismiss="modal"
                                                                                                data-toggle="modal"
                                                                                                data-target="#modal_vvv_{{ www + 1 }}">
                                                                                            <span title="vvv/{{ www + 1 }}" data-toggle="tooltip" data-html="true"><i class="fa-solid fa-arrow-down-long fa-fw"></i>www</span>
                                                                                        </button>
                                                                                    </div>
                                                                                </div>
                                                                                <a role="button"
                                                                                   href="/{{ access }}&m=C&v1=vvv&v2=www"
                                                                                   class="btn btn-lg btn-light p-2 mr-2 align-self-center">
                                                                                    <span data-toggle="tooltip"
                                                                                          data-html="true"
                                                                                          title="{{ vvv + www }} {% if ( ( vvv + www ) < 2 ) %}{{ _("degree of kinship", variant='0') }}{% else %}{{ _("degree of kinship", variant='1') }}{% endif %} ({{ _("show all") }} {{ _("relationship link/relationship links", variant='1') }})">
                                                                                        <i class="fa-solid fa-person-arrow-up-from-line"></i>
                                                                                        <i class="fa-solid fa-person-arrow-down-to-line fa-fw fa-flip-horizontal"></i>
                                                                                    </span>
                                                                                </a>
                                                                                <button type="button" class="btn btn-light p-2 flex-shrink-1 mr-2 sortbtn">
                                                                                    <i class="fa-solid fa-user fa-fw mr-1 sorticon"></i>{{ _("sort by/branch/alphabetic order", variant='0') }}
                                                                                    <br>
                                                                                    <span class="sorttype">{{ _("surname/surnames", variant='0') }}</span>
                                                                                </button>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="modal-body">
                                                                <div class="card-columns">
                                                                    <ul class="list-group bg-transparent listitems">
                                                                        {# foreach not implemented yet #}
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            {% endwith %}
                                        {% endwith %}
                                    {% endwith %}
                                {% endwith %}
                            {% endwith %}
                        {% endmacro %}
                        {% macro link_cousin(vvv, www) %}
                            {% with %}
                                {% set extra_paths_vvv_www = ( cous_paths_cnt.vvv.www - cousins_cnt.vvv.www ) %}
                                {% with %}
                                    {% set width = ( ( 100 / ( e_v + 1 ) ) * vvv ) %}
                                    {% with %}
                                        {% set percent_vvv_www = ( 100 - ( ( count * 100 ) / cousins_cnt.vvv.www ) ) %}
                                        <button type="button" data-toggle="tooltip" data-html="true" class="p-1 mx-1 btn-light position-relative{% if ( ( vvv + www ) == 0 ) %} disabled{% endif %} {% if ( percent_vvv_www == 0 ) %}border-0{% endif %} h-5" {% if ( percent_vvv_www == 100 ) %}style="background-color: rgba(245,231,216,0.9);"{% endif %}title="<span class='h5 pt-2 px-2'>
                                            {% if ( ( i == 0 ) and ( k == 0 ) ) %}
                                                {{ _("him/her", variant='s') }}
                                            {% else %}
                                                {{ cousin_lex(i, k) }}
                                            {% endif %}
                                        </span><hr class='bg-light text-white my-2 mx-4'> <div class='d-flex justify-content-center mt-1'> <div class='mr-4 h5'> <i class='fa-solid fa-arrow-up-right-dots fa-fw'></i> <span class='font-weight-heavy'>vvv</span> <i class='fa-solid fa-arrow-down-long'></i> <span class='font-weight-heavy ml-1'>www</span> </div> <div class='ml-4 h5'> <i class='fa-solid fa-dna fa-fw'></i>
                                        {% if ( ( vvv == 0 ) or ( www == 0 ) ) %}
                                            {{ 100 /. ( 2 ^ ( vvv + www ) ) }}
                                        {% else %}
                                            {{ 100 /. ( 2 ^ ( ( vvv + www ) - 1 ) ) }}
                                        {% endif %}
                                         % </div> </div><hr class='bg-light text-white mt-0 mb-1'>{{ cousin_lex_tt(i, k) }}">
                                        <div class="d-flex justify-content-around stretched-link h-100"
                                             {{ sp }}
                                             data-toggle="modal"
                                             data-target="#modal_vvv_www"
                                             {% if ( ( percent_vvv_www != 0 ) and ( percent_vvv_www != 100 ) ) %}{{ sp }}style="background: linear-gradient(270deg, rgba(245,231,216,0.9) {% if ( percent_vvv_www > 1 ) %}{{ percent_vvv_www - 1 }}{% else %}1{% endif %}
                                             rgba
                                             248
                                             249
                                             250
                                             0
                                             {% if ( percent_vvv_www < 99 ) %}{{ percent_vvv_www + 1 }}{% else %}100{% endif %}
                                             "
                                             {% endif %}>
                                            <div class="order-2 w-75 align-self-center text-bottom ml-1">
                                                {% if ( ( i == 0 ) and ( k == 0 ) ) %}
                                                    {{ _("him/her", variant='s') }}
                                                {% else %}
                                                    {{ cousin_lex(i, k) }}
                                                {% endif %}
                                            </div>
                                            <div class="d-flex justify-content-end align-self-center text-right">
                                                <div class="h5 mt-2 py-0 pr-0 text-{% if ( vvv == 0 ) %}info{% else %}{% if ( ( vvv % 2 ) == 1 ) %}primary
                                                {% else %}
                                                    danger
                                                {% endif %}
                                            {% endif %}
                                            ">{{ cousins_cnt.vvv.www }}</div>
                                    </div>
                                </div>
                            </button>
                        {% endwith %}
                    {% endwith %}
                {% endwith %}
            {% endmacro %}
            {% macro table() %}
                {% with %}
                    {% set maxa = ( e_v + 1 ) %}
                    {% with %}
                        {% set maxd = ( cousins.max_d + maxa ) %}
                        <table id="quickrel"
                               class="table table-responsive-sm mb-0 mt-1 order-3 col-{% if ( e_v == 1 ) %}8{% else %}{% if ( e_v == 0 ) %}4{% endif %}{% endif %}">
                            {% for j in 1..maxd %}
                                <tr>
                                    {% for i in 0..maxa %}
                                        {% with %}
                                            {% set k = ( ( j + i ) - maxa ) %}
                                            {% if ( ( k >= 0 ) and ( i < maxa ) ) %}
                                                {% with %}
                                                    {% set tot = cous_paths_cnt(i, k) %}
                                                    {% with %}
                                                        {% set tot_next = cous_paths_cnt(i, ( k + 1 )) %}
                                                        {% if ( ( i > 1 ) and ( k == 0 ) ) %}
                                                            <td class="h4 font-weight-light user-select-none text-left align-middle border-top-0 pb-3 pl-3">
                                                                {% if ( maxa > 4 ) %}{{ maxa - j }}{% endif %}
                                                            </td>
                                                            {% if ( i > 2 ) %}<td colspan="{{ i - 2 }}" class="border-0"></td>{% endif %}
                                                        {% endif %}
                                                        <td {% if ( j == maxa ) %} style="width:{{ 100 / maxa }}%"{% endif %}
                                                            {% if ( ( i > 0 ) and ( k == 0 ) ) %}colspan="2"{% endif %}
                                                            {{ sp }}
                                                            class="border-0 border-top-0 border-bottom-0 border-right-0">
                                                            {% if ( tot != 0 ) %}
                                                                <div class="d-flex flex-column justify-content-center border-0 py-0">
                                                                    {{ cous_mod(i, k) }}{{ link_cousin(i, k) }}
                                                                    <div class="d-inline-flex py-0">
                                                                        {% if ( ( i != 0 ) and ( k == 0 ) ) %}
                                                                            {% with %}
                                                                                {% set mx = ("1") if (( i == 0 )) else ("3") %}
                                                                                {% for z in 0..mx %}
                                                                                    <div class="h-15p col-{% if ( i == 0 ) %}6{% else %}3{% endif %}{% if ( ( ( ( tot_next == 0 ) and ( z == 0 ) ) or ( ( tot_next != 0 ) and ( ( z % 2 ) == 0 ) ) ) and ( not ( ( i == 0 ) and ( not has_children ) ) ) ) %} border-dark border-right
                                                                                    {% endif %}
                                                                                    "></div>
                                                                            {% endfor %}
                                                                        {% endwith %}
                                                                    {% else %}
                                                                        <div class="col-6 border-dark{% if ( tot_next != 0 ) %} border-right border-top-0 border-left-0 border-bottom-0{% else %} border-0{% endif %} h-15p">
                                                                        </div>
                                                                        <div class="col-6 border-0"></div>
                                                                    {% endif %}
                                                                </div>
                                                            </div>
                                                        {% endif %}
                                                    </td>
                                                {% endwith %}
                                            {% endwith %}
                                        {% endif %}
                                    {% endwith %}
                                {% endfor %}
                            </tr>
                        {% endfor %}
                    </table>
                    <div class="d-flex flex-column justify-items-center order-4 mt-2">
                        <span><i class="fa-solid fa-dna fa-sm mr-1"></i>{{ _("coefficient of relationship") }}</span>
                        <span><i class="fa-solid fa-user fa-sm mr-1"></i>{{ _("one ancestor counted") }}</span>
                        <span><i class="fa-solid fa-triangle-exclamation fa-sm text-danger mr-1"></i>{{ _("multiple relations") }}</span>
                    </div>
                {% endwith %}
            {% endwith %}
        {% endmacro %}
        {{ table() }}
        <div class="d-flex justify-content-between order-2 mt-1">
            <h3 class="{% if ( e_v > 6 ) %} pl-3{% endif %}">
                {{ _("link between") |capitalize }}
                {% if ( public_name != "" ) %}
                    {{ public_name }}
                {% else %}
                    {{ first_name }}
                {% endif %}
                {% if ( qualifier != "" ) %}<em>{{ qualifier }}</em>{% endif %}
                {{ surname }}{{ sp }}{{ dates }}{{ sp }}
                {% if ( ( e_v == 0 ) and ( not has_parents ) ) %}
                    {{ _("and") }} {{ _("a descendant", variant='0') }}
                {% else %}
                    {{ _("and") }} {{ _("close family") }}
                {% endif %}
            </h3>
            <div class="d-flex flex-column justify-content-end align-self-center text-right mr-1">
                {{ reset_count }}
                {% if has_parents %}
                    {% for i in 0..e_v %}
                        {% with %}
                            {% set tt = cousins_cnt(( i + 1 ), "0") %}
                            {% for j in 0..tt %}{{ incr_count }}{% endfor %}
                        {% endwith %}
                    {% endfor %}
                {% endif %}
                <div>
                    <span class="text-muted" title="{{ _("ancestor/ancestors", variant='1') }}">{{ count }}A</span>{{ reset_count }}
                    {% if has_children %}
                        {% for i in 1..cousins.max_d %}
                            {% with %}
                                {% set tt = cousins_cnt("0", i) %}
                                {% for j in 0..tt %}{{ incr_count }}{% endfor %}
                            {% endwith %}
                        {% endfor %}
                    {% endif %}
                    <span class="text-muted" title="{{ _("descendants") }}">/{{ count }}D</span>
                </div>
                {{ reset_count }}{# foreach not implemented yet #}
                <div>
                    <span class="text-muted" title="{{ _("nb individuals") }}">{{ listc_size }}P</span><span class="text-muted" title="{{ _("number of living persons") }}">/{{ count }}L</span>
                </div>
            </div>
        </div>
    </div>
    {% include 'trl.html.j2' %}
    {% include 'copyr.html.j2' %}
</div>
{% include 'js.html.j2' %}
{{ query_time }}<script>
    $(function() {
        $('{{ _("data-toggle="tooltip"") }}').tooltip()
    })
    $(function() {
        $('{{ _("data-toggle="popover"") }}').popover()
    })
    const sortTypes = [{
        type: 'surname',
        icon: 'fa-arrow-down-9-1',
        label: '{{ _("age", variant='
        0 ') }}'
    }, {
        type: 'age',
        order: -1,
        icon: 'fa-cake-candles',
        label: '{{ _("birth", variant='
        0 ') }}'
    }, {
        type: 'birth',
        icon: 'fa-user',
        label: '{{ _("surname/surnames", variant='
        0 ') }}'
    }];
    let currentSortIndex = -1;

    function sort(sortType) {
        $(".listitems").each(function() {
            $(this).html($(this).children('li').sort(function(a, b) {
                if (sortType.order === -1) {
                    return ($(b).data(sortType.type)) > ($(a).data(sortType.type)) ? 1 : -1;
                } else {
                    return ($(b).data(sortType.type)) < ($(a).data(sortType.type)) ? 1 : -1;
                }
            }));
        });
        $('.sorticon').removeClass(sortTypes.map(t => t.icon).join(' ')).addClass(sortType.icon);
        $('.sorttype').text(sortType.label);
    }
    $(document).on('click', '.sortbtn', function() {
        currentSortIndex = (currentSortIndex + 1) % sortTypes.length;
        sort(sortTypes {
            {
                _("currentSortIndex")
            }
        });
    });
    $(document).ready(function() {
        $(".toggle-lev .btn").click(function() {
            $(".high-lev, .toggle-lev .btn").toggleClass("d-none");
        });
    });
    $(document).ready(function() {
        var caution = $(".toggle-lev").data("caution");
        $(".high-lev .btn").each(function() {
            var title = $(this).attr("title");
            $(this).attr("title", title + caution);
        });
    });
</script>
</body>
</html>
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}

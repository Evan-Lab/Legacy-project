<template>
  <a class="skip-link" href="#main">Skip to content</a>

  <header class="hero" role="banner">
    <HeroHeader />
  </header>

  <main id="main" class="container" role="main">
    <SearchForm @demoAlert="onDemoAlert" />

    <section class="panel" aria-labelledby="tools-title">
      <h3 id="tools-title">Tools</h3>
      <ChipsPanel :items="tools" aria-label="Tools" @chip="onChip" />
    </section>

    <section class="panel" aria-labelledby="books-title">
      <h3 id="books-title">Books</h3>
      <ChipsPanel :items="books" aria-label="Books" @chip="onChip" />
    </section>
  </main>
</template>

<script setup>
import { ref } from "vue";
import HeroHeader from "./HeroHeader.vue";
import ChipsPanel from "./ChipsPanel.vue";
import SearchForm from "./SearchForm.vue";

const tools = ref([
  { emoji: "ğŸ“", label: "Add notes" },
  { emoji: "ğŸ“Š", label: "Statistics" },
  { emoji: "ğŸ‰", label: "Anniversaries" },
  { emoji: "ğŸŒ", label: "Places/surname" },
  { emoji: "ğŸ”", label: "Advanced request" },
  { emoji: "ğŸ“…", label: "Calendars" },
  { emoji: "âš™ï¸", label: "Configuration", ariaLabel: "Configuration" },
  { emoji: "â•", label: "Add note" },
  { emoji: "ğŸ‘ª", label: "Add family" },
]);

const books = ref([
  { emoji: "ğŸ§’", label: "First names" },
  { emoji: "ğŸ“›", label: "Surnames" },
  { emoji: "ğŸ·ï¸", label: "Public names" },
  { emoji: "ğŸ…", label: "Qualifiers" },
  { emoji: "ğŸ­", label: "Aliases" },
  { emoji: "ğŸ’¼", label: "Occupations" },
  { emoji: "ğŸ—ºï¸", label: "Places" },
  { emoji: "ğŸ“œ", label: "Sources" },
  { emoji: "ğŸ–ï¸", label: "Titles" },
  { emoji: "ğŸ°", label: "Domains" },
]);

function onChip(payload) {
  // Equivalent de clickToLog(".chip", "Tool/Book")
  const text = `${payload.group} â†’ "${payload.label}" (demo)`;
  // Console + alert, comme dans ton code
  // eslint-disable-next-line no-console
  console.log("[ACTION] Tool/Book:", payload.label);
  alert(text);
}

function onDemoAlert(payload) {
  // Equivalent de lâ€™alert custom au click sur "Search"
  const { q, firstName, surname, oneFirst, sameOrder, partial } = payload;
  const one = oneFirst ? "one" : "any";
  const same = sameOrder ? "same-order" : "any-order";
  const part = partial ? "partial" : "exact";
  alert(`Search (demo):
query="${q}"
first="${firstName}" | surname="${surname}"
opts: ${one}, ${same}, ${part}`);
}
</script>
